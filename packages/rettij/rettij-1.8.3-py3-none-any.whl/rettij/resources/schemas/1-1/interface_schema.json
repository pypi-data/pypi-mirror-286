{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "rettij Interface Schema",
  "description": "Schema for an interface on a node defined in a topology.yml file of rettij",
  "@id": "rettij:interface_schema",
  "type": "array",
  "additionalProperties": false,
  "items": {
    "type": "object",
    "additionalProperties": false,
    "required": [
      "id",
      "channel"
    ],
    "properties": {
      "__line__":{
      "type": "number",
      "description": "Line numbers of the parsed topology added by YamlLoaderWithLineNumbers."
    },
      "id": {
        "type": "string",
        "description": "The id of the interface."
      },
      "channel": {
        "type": "string",
        "description": "The id of the channel the interface is connected to."
      },
      "data-rate": {
        "type": "string",
        "description": "The data-rate of the interface."
      },
      "ip": {
        "type": "string",
        "description": "The ip-address of the interface in CIDR notation.",
        "pattern": "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/([0-9]|[1-2][0-9]|3[0-2]))$",
        "error_msg": "ip-address not valid"
      },
      "mac": {
        "type": "string",
        "description": "The MAC or hardware-address of the interface",
        "pattern": "^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$",
        "error_msg": "mac address not valid"
      },
      "external": {
        "additionalProperties": false,
        "type": "object",
        "required": [
          "interface",
          "networks"
        ],
        "properties": {
          "__line__":{
            "type": "number",
            "description": "Line numbers of the parsed topology added by YamlLoaderWithLineNumbers."
          },
          "interface": {
            "type": "string",
            "description": "Name of the host network interface to bridge to.",
            "pattern": "^[^/\\s]{1,16}$",
            "error_msg": "Interface name is invalid."
          },
          "networks": {
            "additionalItems": false,
            "type": "array",
            "description": "IP ranges (CIDR) of allowed networks.",
            "items": {
              "pattern": "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(/([0-9]|[1-2][0-9]|3[0-2]))$",
              "error_msg": "IP range is invalid."
            }
          }
        }
      }
    }
  }
}