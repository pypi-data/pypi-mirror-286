(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{54727:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return s(88293)}])},9334:function(e,n,s){"use strict";s.d(n,{ZS:function(){return r},a4:function(){return o}});var t=s(80406),i=s(85768).u.injectEndpoints({endpoints:function(e){return{getPurposes:e.query({query:function(){return"purposes"}})}}}),o=i.useGetPurposesQuery,a={purposes:{},special_purposes:{}},r=(0,t.P1)(i.endpoints.getPurposes.select(),(function(e){return e.data||a}))},88293:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return V}});var t=s(24246),i=s(83265),o=s(27378),a=s(1496),r=s(85034),u=s(70169),l=s(92222),c=s(59003),d=s(67447),p=s(73659),x=s(86677),f=s(31373),h=function(e,n){var s=e.filter((function(e){return e.isChecked}));return s.length>0?"".concat(n,"=").concat(s.map((function(e){return e.value})).join("&".concat(n,"="))):void 0},g=function(e){var n=e.value,s=e.displayText,o=e.isChecked,a=e.onCheckboxChange;return(0,t.jsx)(i.XZJ,{value:n,height:"20px",mb:"25px",isChecked:o,onChange:function(e){var s=e.target;a(n,s.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,t.jsx)(i.xvT,{fontSize:"sm",lineHeight:5,textOverflow:"ellipsis",overflow:"hidden",children:s})},n)},C=function(e){var n=e.options,s=e.header,a=e.onCheckboxChange,l=e.columns,c=void 0===l?3:l,d=e.numDefaultOptions,p=void 0===d?15:d,x=(0,o.useState)(!1),f=x[0],h=x[1],C=f?n:n.slice(0,p),j=n.length>p;return(0,t.jsxs)(i.Qdk,{border:"0px",padding:"12px 8px 8px 12px",children:[(0,t.jsx)(i.X6q,{height:"56px",children:(0,t.jsxs)(i.KFZ,{height:"100%",children:[(0,t.jsx)(i.xuv,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",fontWeight:600,children:s}),(0,t.jsx)(i.XEm,{})]})}),(0,t.jsxs)(i.Hk3,{id:"panel-".concat(s),children:[(0,t.jsx)(i.MIq,{columns:c,children:C.map((function(e){return(0,t.jsx)(g,(0,u.Z)((0,r.Z)({},e),{onCheckboxChange:a}),e.value)}))}),!f&&j?(0,t.jsx)(i.zxk,{size:"sm",variant:"ghost",onClick:function(){h(!0)},children:"View more"}):null,f&&j?(0,t.jsx)(i.zxk,{size:"sm",variant:"ghost",onClick:function(){h(!1)},children:"View less"}):null]})]})},j=function(e){var n=e.heading,s=e.children;return(0,t.jsxs)(i.xuv,{padding:"12px 8px 8px 12px",maxHeight:600,children:[n?(0,t.jsx)(i.X6q,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:n}):null,s]})},v=function(e){var n=e.resetFilters,s=e.isOpen,o=e.onClose,a=e.children,l=(0,f.Z)(e,["resetFilters","isOpen","onClose","children"]);return(0,t.jsxs)(i.u_l,(0,u.Z)((0,r.Z)({isOpen:s,onClose:o,isCentered:!0,size:"2xl"},l),{children:[(0,t.jsx)(i.ZAr,{}),(0,t.jsxs)(i.hzk,{children:[(0,t.jsx)(i.xBx,{children:"Filters"}),(0,t.jsx)(i.olH,{}),(0,t.jsx)(i.izJ,{}),(0,t.jsx)(i.fef,{maxH:"85vh",padding:"0px",overflowX:"auto",style:{scrollbarGutter:"stable"},children:a}),(0,t.jsx)(i.mzw,{children:(0,t.jsxs)(i.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,t.jsx)(i.zxk,{variant:"outline",size:"sm",mr:3,onClick:n,flexGrow:1,children:"Reset filters"}),(0,t.jsx)(i.zxk,{colorScheme:"primary",size:"sm",onClick:o,flexGrow:1,children:"Done"})]})})]})]}))},m=s(93677),b=s(70014),k=s(3204),y=s(10503),O=s(9334),_=s(21788),Z=function(e){var n=e.isOpen,s=e.isTcfEnabled,o=e.onClose,a=e.resetFilters,r=e.purposeOptions,u=e.onPurposeChange,l=e.dataUseOptions,c=e.onDataUseChange,d=e.legalBasisOptions,p=e.onLegalBasisChange,x=e.consentCategoryOptions,f=e.onConsentCategoryChange;return(0,t.jsx)(v,{isOpen:n,onClose:o,resetFilters:a,children:(0,t.jsx)(i.UQy,{children:(0,t.jsxs)(j,{children:[s?(0,t.jsx)(C,{options:r,onCheckboxChange:u,header:"TCF purposes",columns:1,numDefaultOptions:5}):null,(0,t.jsx)(C,{options:l,onCheckboxChange:c,header:"Data uses"}),s?(0,t.jsx)(C,{options:d,onCheckboxChange:p,header:"Legal basis"}):null,s?null:(0,t.jsx)(C,{options:x,onCheckboxChange:f,header:"Consent categories"})]})})})},S=s(52050),z=s(34090),w=s(56071),P=s(94353),T=function(e){var n=e.isOpen,s=e.onClose,o=e.fidesKey,a=(0,P.ho)(o),r=a.data,u=a.isLoading;return(0,t.jsxs)(i.u_l,{isOpen:n,onClose:s,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,t.jsx)(i.ZAr,{}),(0,t.jsxs)(i.hzk,{maxWidth:"800px",children:[(0,t.jsx)(i.xBx,{children:"Vendor"}),(0,t.jsx)(i.fef,{children:u?(0,t.jsx)(i.kCb,{width:"100%",height:"324px",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(i.$jN,{})}):(0,t.jsx)(z.J9,{initialValues:r,enableReinitialize:!0,onSubmit:function(){},children:function(e){var n=e.values;return(0,t.jsxs)(z.l0,{children:[(0,t.jsx)(i.xuv,{mb:6,children:(0,t.jsx)(w.j0,{label:"Vendor Name",variant:"stacked",name:"name",disabled:!0})}),Object.entries((null===n||void 0===n?void 0:n.purposes)||{}).length>0?(0,t.jsx)(w.__,{children:" Purposes "}):null,(0,t.jsx)(z.F2,{name:"purposes",render:function(){return(0,t.jsx)(i.UQy,{allowMultiple:!0,children:Object.entries(n.purposes).map((function(e,n){var s=(0,S.Z)(e,1)[0];return(0,t.jsx)(i.Qdk,{children:function(e){var n=e.isExpanded;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.KFZ,{backgroundColor:n?"gray.50":"unset",children:[(0,t.jsx)(i.xuv,{flex:"1",textAlign:"left",children:s}),(0,t.jsx)(i.XEm,{})]}),(0,t.jsxs)(i.Hk3,{backgroundColor:"gray.50",children:[(0,t.jsx)(i.xuv,{my:4,children:(0,t.jsx)(w.VT,{label:"Data Uses",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(s,"'].data_uses")})}),(0,t.jsx)(w.VT,{label:"Legal Basis",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(s,"'].legal_bases")})]})]})}},n)}))})}}),(0,t.jsx)(i.xuv,{my:4,children:(0,t.jsx)(w.VT,{label:"Features",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"features"})}),(0,t.jsx)(w.VT,{label:"Data Categories",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"data_categories"})]})}})}),(0,t.jsxs)(i.mzw,{children:[(0,t.jsxs)(i.zxk,{variant:"outline",size:"sm",onClick:s,children:["Close"," "]}),(0,t.jsx)(i.LZC,{})]})]})]})},F=(0,l.Cl)(),M={items:[],total:0,page:1,size:25,pages:1},D=function(){var e=(0,d.hz)(),n=e.tcf,s=e.dictionaryService,a=(0,P.x8)().isLoading,f=function(){var e=(0,i.qY0)();return{isOpen:e.isOpen,onOpen:e.onOpen,onClose:e.onClose}}(),g=f.isOpen,C=f.onOpen,j=f.onClose,v=(0,x.useRouter)(),S=(0,o.useState)(),z=S[0],w=S[1],D=function(){var e=(0,i.qY0)(),n=e.isOpen,s=e.onClose,t=e.onOpen;(0,_.fd)();var a=(0,y.C)(_.U3);(0,O.a4)();var l=(0,y.C)(O.ZS),c=(0,o.useState)([]),d=c[0],p=c[1],x=(0,o.useState)([]),f=x[0],h=x[1],g=(0,o.useState)([{displayText:"Consent",value:"Consent",isChecked:!1},{displayText:"Legitimate Interest",value:"Legitimate interests",isChecked:!1}]),C=g[0],j=g[1],v=(0,o.useState)([{displayText:"Advertising",value:"advertising",isChecked:!1},{displayText:"Analytics",value:"analytics",isChecked:!1},{displayText:"Functional",value:"functional",isChecked:!1},{displayText:"Essential",value:"essential",isChecked:!1}]),m=v[0],b=v[1];(0,o.useEffect)((function(){0===f.length&&h(a.map((function(e){return{value:e.fides_key,displayText:e.name||e.fides_key,isChecked:!1}})))}),[a,f,h]),(0,o.useEffect)((function(){0===d.length&&p((0,k.Z)(Object.entries(l.purposes).map((function(e){return{value:"normal.".concat(e[0]),displayText:e[1].name,isChecked:!1}}))).concat((0,k.Z)(Object.entries(l.special_purposes).map((function(e){return{value:"special.".concat(e[0]),displayText:e[1].name,isChecked:!1}})))))}),[l,d,h]);var Z=function(e,n,s,t){t(s.map((function(s){return s.value===e?(0,u.Z)((0,r.Z)({},s),{isChecked:n}):s})))};return{isOpen:n,onClose:s,onOpen:t,resetFilters:function(){h((function(e){return e.map((function(e){return(0,u.Z)((0,r.Z)({},e),{isChecked:!1})}))})),j((function(e){return e.map((function(e){return(0,u.Z)((0,r.Z)({},e),{isChecked:!1})}))})),p((function(e){return e.map((function(e){return(0,u.Z)((0,r.Z)({},e),{isChecked:!1})}))})),b((function(e){return e.map((function(e){return(0,u.Z)((0,r.Z)({},e),{isChecked:!1})}))}))},purposeOptions:d,onPurposeChange:function(e,n){Z(e,n,d,p)},dataUseOptions:f,onDataUseChange:function(e,n){Z(e,n,f,h)},legalBasisOptions:C,onLegalBasisChange:function(e,n){Z(e,n,C,j)},consentCategoryOptions:m,onConsentCategoryChange:function(e,n){Z(e,n,m,b)}}}(),R=D.isOpen,V=D.onOpen,E=D.onClose,I=D.resetFilters,U=D.purposeOptions,L=D.onPurposeChange,B=D.dataUseOptions,N=D.onDataUseChange,H=D.legalBasisOptions,X=D.onLegalBasisChange,q=D.consentCategoryOptions,A=D.onConsentCategoryChange,G=(0,o.useMemo)((function(){return h(B,"data_uses")}),[B]),Q=(0,o.useMemo)((function(){return h(H,"legal_bases")}),[H]),K=(0,o.useMemo)((function(){var e=U.filter((function(e){return e.value.includes("normal")})).map((function(e){return(0,u.Z)((0,r.Z)({},e),{value:e.value.split(".")[1]})}));return h(e,"purposes")}),[U]),W=(0,o.useMemo)((function(){var e=U.filter((function(e){return e.value.includes("special")})).map((function(e){return(0,u.Z)((0,r.Z)({},e),{value:e.value.split(".")[1]})}));return h(e,"special_purposes")}),[U]),J=(0,o.useMemo)((function(){return h(q,"consent_category")}),[q]),Y=(0,p.oi)(),$=Y.PAGE_SIZES,ee=Y.pageSize,ne=Y.setPageSize,se=Y.onPreviousPageClick,te=Y.isPreviousPageDisabled,ie=Y.onNextPageClick,oe=Y.isNextPageDisabled,ae=Y.startRange,re=Y.endRange,ue=Y.pageIndex,le=Y.setTotalPages,ce=Y.resetPageIndexToDefault,de=(0,o.useState)(),pe=de[0],xe=de[1],fe=(0,P.de)({pageIndex:ue,pageSize:ee,dataUses:G,search:pe,legalBasis:Q,purposes:K,specialPurposes:W,consentCategories:J}),he=fe.isFetching,ge=fe.isLoading,Ce=fe.data,je=(0,o.useMemo)((function(){return Ce||M}),[Ce]),ve=je.items,me=je.total,be=je.pages;(0,o.useEffect)((function(){le(be)}),[be,le]);var ke=(0,o.useMemo)((function(){return[F.accessor((function(e){return e.name}),{id:"name",cell:function(e){return(0,t.jsx)(p.G3,{value:e.getValue()})},header:function(e){return(0,t.jsx)(p.Rr,(0,r.Z)({value:"Vendor"},e))}}),F.accessor((function(e){return e.data_uses}),{id:"tcf_purpose",cell:function(e){return(0,t.jsx)(p.CI,{plSuffix:"purposes",singSuffix:"purpose",count:e.getValue()})},header:function(e){return(0,t.jsx)(p.Rr,(0,r.Z)({value:"TCF purpose"},e))}}),F.accessor((function(e){return e.data_uses}),{id:"data_uses",cell:function(e){return(0,t.jsx)(p.CI,{plSuffix:"data uses",singSuffix:"data use",count:e.getValue()})},header:function(e){return(0,t.jsx)(p.Rr,(0,r.Z)({value:"Data use"},e))}}),F.accessor((function(e){return e.legal_bases}),{id:"legal_bases",cell:function(e){return(0,t.jsx)(p.CI,{plSuffix:"bases",singSuffix:"basis",count:e.getValue()})},header:function(e){return(0,t.jsx)(p.Rr,(0,r.Z)({value:"Legal basis"},e))}}),F.accessor((function(e){return e.consent_categories}),{id:"consent_categories",cell:function(e){return(0,t.jsx)(p.CI,{plSuffix:"categories",singSuffix:"category",count:e.getValue()})},header:function(e){return(0,t.jsx)(p.Rr,(0,r.Z)({value:"Categories"},e))}}),F.accessor((function(e){return e.cookies}),{id:"cookies",cell:function(e){return(0,t.jsx)(p.CI,{plSuffix:"cookies",singSuffix:"cookie",count:e.getValue()})},header:function(e){return(0,t.jsx)(p.Rr,(0,r.Z)({value:"Cookies"},e))}})]}),[]),ye=(0,c.b7)({columns:ke,data:ve,state:{columnVisibility:{tcf_purpose:n,data_uses:n,legal_bases:n,consent_categories:!n,cookies:!n}},getCoreRowModel:(0,l.sC)(),columnResizeMode:"onChange",enableColumnResizing:!0});return ge||a?(0,t.jsx)(p.I4,{rowHeight:36,numRows:15}):(0,t.jsxs)(i.kCb,{flex:1,direction:"column",overflow:"auto",children:[g&&z?(0,t.jsx)(T,{isOpen:g,fidesKey:z,onClose:j}):null,(0,t.jsxs)(p.Q$,{children:[(0,t.jsx)(p.HO,{globalFilter:pe,setGlobalFilter:function(e){ce(),xe(e)},placeholder:"Search"}),(0,t.jsx)(Z,{isOpen:R,isTcfEnabled:n,onClose:E,resetFilters:I,purposeOptions:U,onPurposeChange:L,dataUseOptions:B,onDataUseChange:N,legalBasisOptions:H,onLegalBasisChange:X,consentCategoryOptions:q,onConsentCategoryChange:A}),(0,t.jsxs)(i.Ugi,{alignItems:"center",spacing:4,children:[(0,t.jsx)(b.Z,{buttonLabel:"Add vendors",buttonVariant:"outline",onButtonClick:s?function(){v.push(m.Gg)}:void 0}),(0,t.jsx)(i.zxk,{onClick:V,"data-testid":"filter-multiple-systems-btn",size:"xs",variant:"outline",children:"Filter"})]})]}),(0,t.jsx)(p.ZK,{tableInstance:ye,onRowClick:function(e){w(e.fides_key),C()}}),(0,t.jsx)(p.s8,{totalRows:me,pageSizes:$,setPageSize:ne,onPreviousPageClick:se,isPreviousPageDisabled:te||he,onNextPageClick:ie,isNextPageDisabled:oe||he,startRange:ae,endRange:re})]})},R=function(e){var n=e.title,s=e.description;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.xuv,{mb:4,children:(0,t.jsx)(i.X6q,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:n})}),(0,t.jsx)(i.kCb,{children:(0,t.jsx)(i.xvT,{fontSize:"sm",mb:8,width:{base:"100%",lg:"50%"},children:s})})]})},V=function(){return(0,t.jsxs)(a.Z,{title:"Configure consent",children:[(0,t.jsx)(R,{title:"Manage your vendors",description:"Use the table below to manage your vendors. Modify the legal basis for a vendor if permitted and view and group your views by applying different filters"}),(0,t.jsx)(D,{})]})}}},function(e){e.O(0,[3667,3659,2981,14,9774,2888,179],(function(){return n=54727,e(e.s=n);var n}));var n=e.O();_N_E=n}]);