(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4650],{68523:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/regulations",function(){return t(31169)}])},31169:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return N}});var i=t(24246),o=t(83265),s=t(79894),l=t.n(s),r=t(10503),a=t(1496),c=t(93677),u=t(96951),d=t(23842),h=t(85034),g=t(70169),m=t(52050),f=t(85556),x=t(98784),p=t.n(x),v=t(86677),j=t(27378),C=t(32556),y=t(49730),w=t(47346),_=t(61186),S=t(50267),Z=t(34038),k=t(8595),O=t(52300),T=t(22938),b=function(e){var n=e.regulations,t=e.isOpen,s=e.onClose,l=e.selected,r=e.onChange,a=(0,j.useState)(l),c=a[0],u=a[1],d=(0,O.QZ)({items:n,selected:c,onChange:u}),h=d.allSelected,g=d.handleToggleAll,m=d.handleToggleSelection,f=c.length,x=n[0].continent;return(0,i.jsxs)(o.u_l,{size:"2xl",isOpen:t,onClose:s,isCentered:!0,children:[(0,i.jsx)(o.ZAr,{}),(0,i.jsxs)(o.hzk,{"data-testid":"regulation-modal",children:[(0,i.jsx)(T.h4,{title:"Select regulations"}),(0,i.jsxs)(o.fef,{p:6,maxHeight:"70vh",overflowY:"auto",children:[(0,i.jsx)(T.x$,{title:x,allSelected:h,onToggleAll:g,numSelected:f}),(0,i.jsx)(o.MIq,{columns:3,spacing:6,paddingInline:4,children:n.map((function(e){return(0,i.jsx)(o.XZJ,{size:"sm",colorScheme:"complimentary",isChecked:c.includes(e.id),onChange:function(){return m(e.id)},"data-testid":"".concat(e.name,"-checkbox"),children:e.name},e.id)}))})]}),(0,i.jsx)(T.$_,{onApply:function(){r(c),s()},onClose:s})]})]})},z=function(e){var n=e.title,t=e.items,s=e.selected,l=e.onChange,r=(0,o.qY0)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.ZP,{title:n,items:t,selected:s,onChange:l,numSelected:s.length,indeterminate:[],onViewMore:t.length>k.I_?r.onOpen:void 0}),(0,i.jsx)(b,{regulations:t,isOpen:r.isOpen,onClose:r.onClose,selected:s,onChange:l},"regulation-modal-selected-".concat(s.length))]})},L=t(77278),q=function(e){var n,t=e.data,s=(0,o.pmc)(),l=(0,o.qY0)(),r=(0,j.useState)(null!==(n=t.regulations)&&void 0!==n?n:[]),a=r[0],x=r[1],k=(0,j.useState)(""),O=k[0],T=k[1],b=(0,m.Z)((0,u.WA)(),2),q=b[0],N=b[1].isLoading,A=(0,j.useMemo)((function(){var e,n,i=null!==(n=null===(e=t.regulations)||void 0===e?void 0:e.filter((function(e){return function(e,n){var t;return null===(t=e.name)||void 0===t?void 0:t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}(e,O)})))&&void 0!==n?n:[];return(0,L.F7)(i)}),[t.regulations,O]),E=!p().isEqual(a,t.regulations),M=(0,v.useRouter)(),I=function(){M.push(c.r5).then((function(){s.closeAll()}))},P=function(){var e=(0,d.Z)((function(){var e;return(0,f.__generator)(this,(function(n){switch(n.label){case 0:return[4,q({regulations:a.map((function(e){return{id:e.id,selected:e.selected}})),locations:[]})];case 1:return e=n.sent(),(0,Z.D4)(e)?s((0,_.Vo)((0,C.e$)(e.error))):s((0,_.t5)((0,i.jsxs)(o.xvT,{display:"inline",children:["Fides has automatically associated the relevant locations with your regulation choices.",(0,i.jsx)(S.Z,{onClick:I,children:"View locations here."})]}))),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(o.gCW,{alignItems:"start",spacing:4,children:[(0,i.jsx)(o.xuv,{maxWidth:"510px",width:"100%",children:(0,i.jsx)(w.Z,{onChange:T,placeholder:"Search",search:O,onClear:function(){return T("")},"data-testid":"search-bar"})}),(0,i.jsx)(o.MIq,{columns:{base:1,md:2,xl:3},spacing:6,width:"100%",children:Object.entries(A).map((function(e){var n=(0,m.Z)(e,2),t=n[0],o=n[1],s=a.filter((function(e){return o.find((function(n){return n.id===e.id}))&&e.selected})).map((function(e){return e.id}));return(0,i.jsx)(z,{title:t,items:o,selected:s,onChange:function(e){!function(e){var n=a.map((function(n){var t=e.find((function(e){return e.id===n.id}));return null!==t&&void 0!==t?t:n}));x(n)}(o.map((function(n){return e.includes(n.id)?(0,g.Z)((0,h.Z)({},n),{selected:!0}):(0,g.Z)((0,h.Z)({},n),{selected:!1})})))}},t)}))}),(0,i.jsx)(y.Z,{isOpen:l.isOpen,onClose:l.onClose,onConfirm:function(){P(),l.onClose()},title:"Location updates",message:"Modifications in your regulation settings may also affect your location settings to simplify management. You can override any Fides-initiated changes directly in the location settings.",isCentered:!0,icon:(0,i.jsx)(o.aNP,{color:"orange"})}),E?(0,i.jsx)(o.zxk,{colorScheme:"primary",size:"sm",onClick:l.onOpen,isLoading:N,"data-testid":"save-btn",children:"Save"}):null]})},N=function(){var e=(0,u.QM)().isLoading,n=(0,r.C)(u.P8);return(0,i.jsx)(a.Z,{title:"Regulations",children:(0,i.jsxs)(o.xuv,{"data-testid":"regulation-management",children:[(0,i.jsx)(o.X6q,{marginBottom:2,fontSize:"2xl",children:"Regulations"}),(0,i.jsxs)(o.xuv,{children:[(0,i.jsxs)(o.xvT,{marginBottom:4,fontSize:"sm",maxWidth:"600px",children:["Select the regulations that apply to your organizations compliance requirements. The selections you make here will automatically update your location selections."," ",(0,i.jsx)(o.xvT,{color:"complimentary.500",children:(0,i.jsx)(l(),{href:c.r5,passHref:!0,children:"You can view your location settings here."})})]}),(0,i.jsx)(o.xuv,{children:e?(0,i.jsx)(o.$jN,{}):(0,i.jsx)(q,{data:n})})]})]})})}}},function(e){e.O(0,[8033,4880,9774,2888,179],(function(){return n=68523,e(e.s=n);var n}));var n=e.O();_N_E=n}]);