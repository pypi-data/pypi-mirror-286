(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4623],{87736:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[id]",function(){return t(82210)}])},96589:function(e,n,t){"use strict";var i=t(85034),r=t(70169),a=t(31373),o=t(3204),s=t(24246),c=t(83265),l=t(27378),u=function(e){var n=e.split("."),t=[];return n.forEach((function(e){var n=t.length>0?t[t.length-1]:null;n?t.push("".concat(n,".").concat(e)):t.push(e)})),t},d=function(e,n){return e===n||!!e.startsWith("".concat(n,"."))},f=function(e,n,t){var i=null!==t&&void 0!==t?t:[];return e.forEach((function(e){e.children&&f(e.children,n,i),d(e.value,n)&&i.push(e)})),i},h=function(e){var n=e.node,t=e.isChecked,i=e.onChecked,r=e.isExpanded,a=e.onExpanded,o=e.isIndeterminate,l=e.isDisabled,u=e.children,d=n.value,f=n.label,h=!!n.children&&n.children.length>0;return(0,s.jsxs)(c.xuv,{children:[(0,s.jsxs)(c.xuv,{display:"flex",justifyContent:"space-between",_hover:{backgroundColor:"gray.100",cursor:"pointer"},onClick:function(){return a(n)},minHeight:8,children:[(0,s.jsx)(c.XZJ,{colorScheme:"complimentary",value:d,isChecked:!o&&t,isIndeterminate:o,isDisabled:l,onChange:function(){return i(n)},mx:2,"data-testid":"checkbox-".concat(f),children:f}),h?(0,s.jsx)(c.hU,{"data-testid":"expand-".concat(f),"aria-label":r?"collapse":"expand",icon:(0,s.jsx)(c.v4q,{boxSize:5}),variant:"ghost",onClick:function(){return a(n)},size:"sm",style:{transform:r?"rotate(180deg)":""}}):null]}),u&&(0,s.jsx)(c.xuv,{ml:5,children:u})]})};n.ZP=function(e){var n=e.nodes,t=e.selected,v=e.onSelected,x=(0,a.Z)(e,["nodes","selected","onSelected"]),m=(0,l.useState)([]),p=m[0],g=m[1],j=(0,l.useState)([]),y=j[0],b=j[1];(0,l.useEffect)((function(){var e=t.map((function(e){return u(e)})).reduce((function(e,n){return e.concat(n)}),[]),i=t.map((function(e){return f(n,e)})).reduce((function(e,n){return e.concat(n)}),[]).map((function(e){return e.value})),r=Array.from(new Set((0,o.Z)(e).concat((0,o.Z)(i))));b(r),g(r)}),[t,n]);var C=function(e){var i=[],r=[];if(p.indexOf(e.value)>=0)i=p.filter((function(n){return!d(n,e.value)})),r=t.filter((function(n){return!d(n,e.value)}));else{var a=f(n,e.value).map((function(e){return e.value}));i=(0,o.Z)(p).concat((0,o.Z)(a)),r=(0,o.Z)(t).concat([e.value])}g(i),v(r)},k=function(e){y.indexOf(e.value)>=0?b(y.filter((function(n){return!d(n,e.value)}))):b((0,o.Z)(y).concat([e.value]))},Z=function(e){if(e.children){var i=p.indexOf(e.value)>=0,r=y.indexOf(e.value)>=0,a=f(n,e.value),o=i&&e.children.length>0&&p.filter((function(n){return n.startsWith("".concat(e.value,"."))})).length+1!==a.length,c=function(e,n){var t=u(n).filter((function(e){return e!==n}));return e.filter((function(e){return t.includes(e)})).length>0}(t,e.value);return(0,s.jsx)(h,{node:e,isChecked:i,onChecked:C,isExpanded:r,onExpanded:k,isDisabled:c,isIndeterminate:o,children:r?e.children.map((function(e){return(0,s.jsx)(l.Fragment,{children:Z(e)},e.value)})):void 0})}return null};return(0,s.jsx)(c.xuv,(0,r.Z)((0,i.Z)({},x),{children:n.map((function(e){return(0,s.jsx)(c.xuv,{children:Z(e)},e.value)}))}))}},17855:function(e,n,t){"use strict";t.d(n,{s:function(){return o}});var i=t(24246),r=t(83265),a=t(27378),o=function(e){var n=e.allColumns,t=e.selectedColumns,o=e.onChange,s=(0,a.useMemo)((function(){var e=new Map;return n.forEach((function(n){return e.set(n.name,!!t.find((function(e){return e.name===n.name})))})),e}),[n,t]),c=function(){s.forEach((function(e,n){return s.set(n,!1)})),o([])};return(0,i.jsx)(r.v2r,{children:function(e){var a=e.onClose;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.j2t,{as:r.zxk,rightIcon:(0,i.jsx)(r.mCO,{}),variant:"outline",fontWeight:"normal","data-testid":"column-dropdown",children:"Columns"}),(0,i.jsx)(r.qyq,{children:(0,i.jsxs)(r.xuv,{px:2,children:[(0,i.jsxs)(r.xuv,{display:"flex",justifyContent:"space-between",mb:2,children:[(0,i.jsx)(r.zxk,{variant:"outline",size:"xs",onClick:c,"data-testid":"column-clear-btn",children:"Clear"}),(0,i.jsx)(r.zxk,{size:"xs",colorScheme:"primary",onClick:a,"data-testid":"column-done-btn",children:"Done"})]}),(0,i.jsx)(r.cOn,{colorScheme:"complimentary",children:(0,i.jsx)(r.Kqy,{children:n.map((function(e){var a=t.filter((function(n){return n.name===e.name})).length>0;return(0,i.jsx)(r.XZJ,{id:e.name,_hover:{bg:"gray.100"},isChecked:a,onChange:function(){return function(e){var t,i=null!==(t=s.get(e.name))&&void 0!==t&&t;s.set(e.name,!i),o(n.filter((function(e){return s.get(e.name)})))}(e)},"data-testid":"checkbox-".concat(e.name),children:e.name},e.name)}))})})]})})]})}})}},23072:function(e,n,t){"use strict";t.d(n,{Gn:function(){return o},zR:function(){return a}});var i=t(24246),r=t(83265),a=function(e){var n=e.title,t=e.onDelete;return(0,i.jsxs)(r.OXI,{py:2,display:"flex",alignItems:"center",children:[(0,i.jsx)(r.xvT,{mr:"2",children:n}),t?(0,i.jsx)(r.hU,{"aria-label":"delete",icon:(0,i.jsx)(r.lr0,{}),size:"xs",onClick:t,"data-testid":"delete-btn"}):null]})},o=function(e){var n=e.onClose,t=e.formId,a=e.isSaving;return(0,i.jsxs)(r.zeN,{justifyContent:"flex-start",children:[(0,i.jsx)(r.zxk,{onClick:n,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,i.jsx)(r.zxk,{type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",form:t,isLoading:a,children:"Save"})]})};n.ZP=function(e){var n=e.header,t=e.description,a=e.isOpen,o=e.onClose,s=e.children,c=e.footer;return(0,i.jsxs)(r.dys,{placement:"right",isOpen:a,onClose:o,size:"lg",children:[(0,i.jsx)(r.P1B,{}),(0,i.jsxs)(r.scA,{"data-testid":"edit-drawer-content",py:2,children:[(0,i.jsx)(r.xuv,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,i.jsx)(r.zxk,{variant:"ghost",onClick:o,"data-testid":"close-drawer-btn",children:(0,i.jsx)(r.LGN,{width:"17px"})})}),n,(0,i.jsxs)(r.Ng0,{children:[t?(0,i.jsx)(r.xvT,{fontSize:"sm",mb:4,children:t}):null,s]}),c]})]})}},1496:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var i=t(85034),r=t(70169),a=t(24246),o=t(83265),s=t(88038),c=t.n(s),l=t(86677),u=(t(27378),t(67447)),d=t(63076),f=t(93677),h=function(){var e=(0,l.useRouter)();return(0,a.jsx)(o.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,a.jsxs)(o.xuv,{children:[(0,a.jsxs)(o.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,a.jsx)(o.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,a.jsx)(o.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(f.fz)},children:"Configure"})]}),(0,a.jsxs)(o.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},v=function(e){var n=e.children,t=e.title,s=e.padded,f=void 0===s||s,v=e.mainProps,x=(0,u.hz)(),m=(0,l.useRouter)(),p="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,g=!(x.flags.privacyRequestsConfiguration&&p),j=(0,d.JE)(void 0,{skip:g}).data,y=(0,d.PW)(void 0,{skip:g}).data,b=x.flags.privacyRequestsConfiguration&&(!j||!y)&&p;return(0,a.jsxs)(o.kCb,{"data-testid":t,direction:"column",h:"100vh",children:[(0,a.jsxs)(c(),{children:[(0,a.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,a.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)(o.kCb,(0,r.Z)((0,i.Z)({as:"main",direction:"column",py:f?6:0,px:f?10:0,h:f?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},v),{children:[b?(0,a.jsx)(h,{}):null,n]}))]})}},32556:function(e,n,t){"use strict";t.d(n,{D4:function(){return r.D4},MM:function(){return h},Ot:function(){return c},c6:function(){return u},cj:function(){return x},e$:function(){return o},fn:function(){return s},iC:function(){return v},nU:function(){return f},tB:function(){return l}});var i=t(17599),r=t(32764),a="An unexpected error occurred. Please try again.",o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,r.Bw)(e)){if((0,r.hE)(e.data))return e.data.detail;if((0,r.cz)(e.data)){var t,i=null===(t=e.data.detail)||void 0===t?void 0:t[0];return"".concat(null===i||void 0===i?void 0:i.msg,": ").concat(null===i||void 0===i?void 0:i.loc)}if(409===e.status&&(0,r.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,r.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return n};function s(e){return"object"===typeof e&&null!=e&&"status"in e}function c(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function l(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var u,d,f=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,r.oK)(e))return{status:e.originalStatus,message:e.data};if((0,r.Bw)(e)){var t=e.status;return{status:t,message:o(e,n.message)}}return n},h=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))};!function(e){e.GVL="gvl",e.AC="gacp",e.COMPASS="compass"}(u||(u={}));var v=(d={},(0,i.Z)(d,u.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,i.Z)(d,u.AC,{label:"AC",fullName:"Google Additional Consent List"}),(0,i.Z)(d,u.COMPASS,{label:"",fullName:""}),d),x=function(e){var n=e.split(".")[0];return n===u.AC?u.AC:n===u.GVL?u.GVL:u.COMPASS}},22850:function(e,n,t){"use strict";t.d(n,{R:function(){return u}});var i=t(85034),r=t(70169),a=t(31373),o=t(24246),s=t(83265),c=t(79894),l=t.n(c),u=function(e){var n=e.onClick,t=(0,a.Z)(e,["onClick"]);return(0,o.jsxs)(s.kCb,(0,r.Z)((0,i.Z)({alignItems:"center",mt:-4,mb:3,onClick:n,cursor:"pointer"},t),{children:[(0,o.jsx)(s.hU,{"aria-label":"Back",icon:(0,o.jsx)(s.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,o.jsx)(s.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]}))};n.Z=function(e){var n=e.backPath,t=(0,a.Z)(e,["backPath"]);return(0,o.jsxs)(s.kCb,(0,r.Z)((0,i.Z)({alignItems:"center",mb:6},t),{children:[(0,o.jsx)(l(),{href:n,passHref:!0,children:(0,o.jsx)(s.hU,{"aria-label":"Back",icon:(0,o.jsx)(s.Rpv,{}),mr:2,size:"xs",variant:"outline"})}),(0,o.jsx)(l(),{href:n,passHref:!0,children:(0,o.jsx)(s.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},61186:function(e,n,t){"use strict";t.d(n,{MA:function(){return c},Vo:function(){return u},t5:function(){return l}});var i=t(85034),r=t(24246),a=t(83265),o=function(e){var n=e.children;return(0,r.jsxs)(a.xvT,{"data-testid":"toast-success-msg",children:[(0,r.jsx)("strong",{children:"Success:"})," ",n]})},s=function(e){var n=e.children;return(0,r.jsxs)(a.xvT,{"data-testid":"toast-error-msg",children:[(0,r.jsx)("strong",{children:"Error:"})," ",n]})},c={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},l=function(e){var n=(0,r.jsx)(o,{children:e});return(0,i.Z)({},c,{description:n})},u=function(e){var n=(0,r.jsx)(s,{children:e});return(0,i.Z)({},c,{description:n,status:"error"})}},90517:function(e,n,t){"use strict";t.d(n,{I:function(){return i}});var i=function(e){var n,t,i=e.dataCategories,r=e.mostLikelyCategories;return(null===i||void 0===i?void 0:i.length)?i:(null===r||void 0===r?void 0:r.length)?[r.reduce((function(e,i){return(null!==(n=i.confidence)&&void 0!==n?n:0)>(null!==(t=e.confidence)&&void 0!==t?t:0)?i:e})).fides_key]:[]}},26950:function(e,n,t){"use strict";var i=t(85034),r=t(70169),a=t(31373),o=t(24246),s=t(83265);n.Z=function(e){var n=e.name,t=e.onClose,c=(0,a.Z)(e,["name","onClose"]),l=(0,i.Z)({backgroundColor:"primary.400",color:"white","data-testid":"taxonomy-entity-".concat(n),width:"fit-content",size:"sm"},c);return t?(0,o.jsxs)(s.Vp9,(0,r.Z)((0,i.Z)({display:"flex",justifyContent:"space-between"},l),{children:[(0,o.jsx)(s.Sn0,{children:n}),(0,o.jsx)(s.SD9,{onClick:t,color:"white"})]})):(0,o.jsx)(s.Vp9,(0,r.Z)((0,i.Z)({},l),{children:n}))}},77966:function(e,n,t){"use strict";t.d(n,{C:function(){return i},P:function(){return r}});var i=function(e,n){var t;if(null==n&&e.every((function(e){return void 0===e.parent_key})))t=e;else{var r=null!==n&&void 0!==n?n:null;t=e.filter((function(e){return e.parent_key===r}))}return t.map((function(n){var t,r,a=n.fides_key;return{value:n.fides_key,label:""===n.name||null==n.name?n.fides_key:n.name,description:n.description,children:i(e,a),is_default:null!==(t=n.is_default)&&void 0!==t&&t,active:null!==(r=n.active)&&void 0!==r&&r}}))},r=function(e){var n=e.split(".");return 1===n.length?"":n.slice(0,n.length-1).join(".")}},82210:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ue}});var i,r=t(24246),a=t(86677),o=t(1496),s=t(22850),c=t(93677),l=t(83265),u=t(27378),d=t(45007),f=t(17855),h=t(67447),v=t(94353),x=t(22735),m=t(23842),p=t(52050),g=t(85556),j=t(32556),y=t(61186),b=t(10439),C=t(59302),k=t(85034),Z=t(65201),_=function(e,n,t){var i=e.collections.map((function(e,i){return i===t?n:e}));return(0,k.Z)({},e,{collections:i})},D=function(e,n,t,i){var r=function(e,n,t){var i=e.fields.map((function(e,i){return i===t?n:e}));return(0,k.Z)({},e,{fields:i})}(e.collections[t],n,i);return _(e,r,t)},w=function(e){return e.classifications.reduce((function(e,n){var t,i;return(null!==(t=e.aggregated_score)&&void 0!==t?t:0)<(null!==(i=n.aggregated_score)&&void 0!==i?i:0)?n:e}))},S=function(){var e,n=(0,h.hz)(),t=(0,d.v9)(C.n0),i=(0,d.v9)(v.Bt),a=(0,d.v9)(v.lG),o=(0,p.Z)((0,C.TG)(),2),s=o[0],c=o[1].isLoading,f=(0,p.Z)((0,v.MD)(),2),x=f[0],k=f[1].isLoading,_=c||k,D=(0,l.pmc)(),S=(0,u.useMemo)((function(){var n;return null!==(e=null===a||void 0===a||null===(n=a.fields)||void 0===n?void 0:n.reduce((function(e,n){return n.classifications.length>0?e+1:e}),0))&&void 0!==e?e:0}),[a]),z=function(){var e=(0,m.Z)((function(){var e,r,o,c,l,u;return(0,g.__generator)(this,(function(d){switch(d.label){case 0:if(_||!t||!i)return[2];e=function(e,n,t){return(0,Z.ZP)(e,(function(e){var i=new Map(n.collections.map((function(e){return[e.name,e]})));e.collections.forEach((function(e){var n,r=i.get(e.name);if(!t||(null===r||void 0===r?void 0:r.name)===t){var a=new Map(null===r||void 0===r||null===(n=r.fields)||void 0===n?void 0:n.map((function(e){return[e.name,e]})));e.fields.forEach((function(e){if(!(e.data_categories&&e.data_categories.length>0)){var n=a.get(e.name);if(n&&n.classifications.length>0){var t=w(n);e.data_categories=[t.label]}}}))}}))}))}(t,i,n.flags.datasetClassificationUpdates?null===a||void 0===a?void 0:a.name:void 0),d.label=1;case 1:return d.trys.push([1,8,,9]),[4,s(e)];case 2:return r=d.sent(),(0,j.D4)(r)?(D((0,y.Vo)((0,j.e$)(r.error))),[2]):n.flags.datasetClassificationUpdates?(D((0,y.t5)("Collection classified and approved")),o=0,e.collections.forEach((function(e){e.fields.forEach((function(e){e.data_categories&&0!==e.data_categories.length||(o+=1)}))})),0!==o?[3,4]:[4,x({dataset_fides_key:t.fides_key,status:b.Wg.REVIEWED})]):[3,5];case 3:if(c=d.sent(),(0,j.D4)(c))return D((0,y.Vo)((0,j.e$)(c.error))),[2];D((0,y.t5)("Dataset classified and approved")),d.label=4;case 4:return[3,7];case 5:return[4,x({dataset_fides_key:t.fides_key,status:b.Wg.REVIEWED})];case 6:if(l=d.sent(),(0,j.D4)(l))return D((0,y.Vo)((0,j.e$)(l.error))),[2];D((0,y.t5)("Dataset classified and approved")),d.label=7;case 7:return[3,9];case 8:return u=d.sent(),D((0,y.Vo)("".concat(u))),[3,9];case 9:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return i&&a&&i.status===b.Wg.COMPLETE?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.m$N.p,{flexGrow:1,textAlign:"center",fontSize:"sm",color:"gray.600",children:[(0,r.jsx)(l.m$N.span,{fontWeight:"bold",children:S})," ",1===S?"field has":"fields have"," been identified within this"," ",(0,r.jsx)(l.m$N.span,{fontWeight:"bold",children:a.name})," ","table that are likely to contain personal data."]}),n.flags.datasetClassificationUpdates?(0,r.jsx)(l.zxk,{size:"sm",variant:"primary",flexShrink:0,onClick:z,isLoading:_,isDisabled:_,"data-testid":"approve-classification-btn",children:"Approve classifications"}):(0,r.jsx)(l.zxk,{size:"sm",variant:"primary",flexShrink:0,onClick:z,isLoading:_,isDisabled:_,"data-testid":"approve-classification-btn",children:"Approve dataset"})]}):(0,r.jsx)(l.LZC,{})},z=t(26950),E=function(e){var n=e.attribute,t=e.field,i=e.classifyField;if("data_categories"===n){var a,o=void 0!==i?w(i):void 0,s=void 0!==o?[o.label]:[],c=null!==(a=t.data_categories)&&void 0!==a?a:[],u=c.length>0?c:s;return(0,r.jsx)(l.ua7,{placement:"right",label:u===s?"Fides has generated these data categories for you. You can override them by modifying the field.":"",children:(0,r.jsx)(l.xuv,{display:"inline-block",children:u.map((function(e){return(0,r.jsx)(l.xuv,{mr:2,mb:2,children:(0,r.jsx)(z.Z,{name:e})},"".concat(t.name,"-").concat(e))}))})})}return(0,r.jsx)(r.Fragment,{children:t[n]})},O=t(23072),A=t(34090),T=t(56071),L=t(90517),F={tooltip:"A UI-friendly label for the Dataset."},I={tooltip:"A human-readable description of the Dataset."},P={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all collections in the Dataset."},N={tooltip:"A human-readable description of the collection."},M={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all fields in the collection."},W={tooltip:"A human-readable description of the field."},R={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to this field."},V=t(12934),q=t(70169),G=t(96589),Y=t(77966),U=function(e){var n=e.dataCategories,t=e.checked,i=e.onChecked,a=e.buttonProps,o=e.buttonLabel,s=(0,u.useMemo)((function(){return(0,Y.C)(n)}),[n]),c={variant:"outline",fontWeight:"normal",size:"sm",borderRadius:"sm",textAlign:"left",_hover:{backgroundColor:"transparent"},_active:{backgroundColor:"transparent"},rightIcon:(0,r.jsx)(l.mCO,{}),width:"100%"},d=null!==a&&void 0!==a?a:c,f=null!==o&&void 0!==o?o:"Select data categories";return(0,r.jsxs)(l.v2r,{closeOnSelect:!0,children:[(0,r.jsx)(l.j2t,(0,q.Z)((0,k.Z)({as:l.zxk},d),{"data-testid":"data-category-dropdown",children:f})),(0,r.jsx)(l.qyq,{children:(0,r.jsxs)(l.xuv,{maxHeight:"50vh",minWidth:"300px",overflowY:"scroll",children:[(0,r.jsxs)(l.xuv,{position:"sticky",top:0,zIndex:1,backgroundColor:"white",pt:1,children:[(0,r.jsx)(l.__7,{children:(0,r.jsxs)(l.xuv,{display:"flex",justifyContent:"space-between",px:2,mb:2,children:[(0,r.jsx)(l.sNh,{as:l.zxk,variant:"outline",size:"xs",onClick:function(){return i([])},mr:2,width:"auto",closeOnSelect:!1,"data-testid":"data-category-clear-btn",children:"Clear"}),(0,r.jsx)(l.xvT,{mr:2,children:"Data Categories"}),(0,r.jsx)(l.sNh,{as:l.zxk,size:"xs",colorScheme:"primary",color:"white",_hover:{backgroundColor:"primary.600"},width:"auto","data-testid":"data-category-done-btn",children:"Done"})]})}),(0,r.jsx)(l.RaW,{})]}),(0,r.jsx)(l.xuv,{px:2,"data-testid":"data-category-checkbox-tree",children:(0,r.jsx)(G.ZP,{nodes:s,selected:t,onSelected:i})})]})})]})},B=function(e){var n=e.dataCategories,t=e.mostLikelyCategories,i=e.checked,a=e.onChecked,o=e.tooltip,s=i.slice().sort((function(e,n){return e.localeCompare(n)}));return(0,r.jsxs)(l.rjZ,{templateColumns:"1fr 3fr",children:[(0,r.jsx)(l.lXp,{children:"Data Categories"}),t?(0,r.jsxs)(l.xuv,{display:"flex",alignItems:"center",children:[(0,r.jsx)(l.xuv,{mr:"2",width:"100%",children:(0,r.jsx)(l.P$4,{dataCategories:n,mostLikelyCategories:t,checked:i,onChecked:a})}),(0,r.jsx)(V.Z,{label:o})]}):(0,r.jsxs)(l.Kqy,{children:[(0,r.jsxs)(l.xuv,{display:"flex",alignItems:"center",children:[(0,r.jsx)(l.xuv,{mr:"2",width:"100%",children:(0,r.jsx)(U,{dataCategories:n,checked:i,onChecked:a})}),(0,r.jsx)(V.Z,{label:o})]}),(0,r.jsx)(l.Kqy,{"data-testid":"selected-categories",children:s.map((function(e){return(0,r.jsx)(z.Z,{name:e,onClose:function(){var n;n=e,a(i.filter((function(e){return e!==n})))}},e)}))})]})]})},J="edit-collection-or-field-form",$=function(e){var n,t=e.values,i=e.onSubmit,a=e.dataType,o={description:null!==(n=t.description)&&void 0!==n?n:"",data_categories:t.data_categories},s=(0,d.v9)(x.qb).filter((function(e){return e.active})),c=(0,d.v9)(v.t6),f=(0,u.useMemo)((function(){if(s&&c){var e=new Map(s.map((function(e){return[e.fides_key,e]})));return c.classifications.map((function(n){var t=n.label,i=n.aggregated_score,r=e.get(t);return(0,k.Z)({fides_key:t,confidence:i},r)}))}}),[s,c]),h=(0,u.useState)((function(){return(0,L.I)({dataCategories:o.data_categories,mostLikelyCategories:f})})),m=h[0],p=h[1],g="collection"===a?N.tooltip:W.tooltip,j="collection"===a?M.tooltip:R.tooltip;return(0,r.jsx)(A.J9,{initialValues:o,onSubmit:function(e){var n=(0,k.Z)({},e,{data_categories:m});i(n)},children:(0,r.jsx)(A.l0,{id:J,children:(0,r.jsxs)(l.Kqy,{children:[(0,r.jsx)(T.j0,{name:"description",label:"Description",tooltip:g,"data-testid":"description-input"}),(0,r.jsx)(B,{dataCategories:s,mostLikelyCategories:f,checked:m,onChecked:p,tooltip:j})]})})})},X=function(e){var n=e.field,t=e.isOpen,i=e.onClose,a=(0,d.v9)(C.n0),o=(0,d.v9)(C.gR),s=(0,d.v9)(C.mZ),c=(0,p.Z)((0,C.TG)(),1)[0],u=(0,l.qY0)(),f=u.isOpen,h=u.onOpen,v=u.onClose;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.ZP,{isOpen:t,onClose:i,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,r.jsx)(O.zR,{title:"Field Name: ".concat(n.name),onDelete:h}),footer:(0,r.jsx)(O.Gn,{onClose:i,formId:J}),children:(0,r.jsx)($,{values:n,onSubmit:function(e){if(a&&void 0!==o&&void 0!==s){var t=(0,k.Z)({},n,e),r=D(a,t,o,s);c(r),i()}},dataType:"field"})}),(0,r.jsx)(l.cVQ,{isOpen:f,onClose:v,onConfirm:function(){if(a&&void 0!==o&&void 0!==s){var e=function(e,n,t){var i=e.collections[n],r=i.fields.filter((function(e,n){return n!==t})),a=(0,k.Z)({},i,{fields:r});return _(e,a,n)}(a,o,s);c(e),i()}},title:"Delete Field",message:(0,r.jsxs)(l.xvT,{children:["You are about to permanently delete the field named"," ",(0,r.jsx)(l.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:n.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})};!function(e){e.DATASET="dataset",e.COLLECTION="collection",e.FIELD="field"}(i||(i={}));var K=function(e){var n=e.columns,t=(0,d.I0)(),a=(0,d.v9)(C.pD),o=(0,d.v9)(C.FJ),s=(0,d.v9)(C.U3),c=(0,d.v9)(v.a$),u=function(e){t((0,C.EQ)(e)),t((0,C.JY)(i.FIELD))};return(0,r.jsxs)(l.xuv,{children:[(0,r.jsxs)(l.iA_,{size:"sm","data-testid":"dataset-fields-table",children:[(0,r.jsx)(l.hrZ,{children:(0,r.jsx)(l.Tr,{children:n.map((function(e){return(0,r.jsx)(l.Th,{pl:0,"data-testid":"column-".concat(e.name),children:e.name},e.name)}))})}),(0,r.jsx)(l.p3B,{children:(null!==a&&void 0!==a?a:[]).map((function(e,t){return(0,r.jsx)(l.Tr,{_hover:{bg:"gray.50"},cursor:"pointer",onClick:function(){return u(t)},tabIndex:0,onKeyPress:function(e){"Enter"===e.key&&u(t)},"data-testid":"field-row-".concat(e.name),children:n.map((function(n){return(0,r.jsx)(l.Td,{pl:0,children:(0,r.jsx)(E,{field:e,classifyField:c.get(e.name),attribute:n.attribute})},"".concat(n.name,"-").concat(e.name))}))},e.name)}))})]}),o?(0,r.jsx)(X,{isOpen:s===i.FIELD,onClose:function(){t((0,C.EQ)(void 0)),t((0,C.JY)(void 0))},field:o}):null]})},Q=function(){var e,n,t=(0,d.v9)(v.Bt),i=null!==(e=null===t||void 0===t?void 0:t.status)&&void 0!==e?e:b.Wg.REVIEWED,a=(0,u.useMemo)((function(){var e;return null!==(n=null===t||void 0===t||null===(e=t.collections)||void 0===e?void 0:e.reduce((function(e,n){return e+n.fields.reduce((function(e,n){return n.classifications.length>0?e+1:e}),0)}),0))&&void 0!==n?n:0}),[t]),o=0===a?"Fides did not identify any fields that are likely to contain personal data, but there may be some.":1===a?"Fides identified a field that is likely to contain personal data.":"Fides identified ".concat(a," fields that are likely to contain personal data.");return(0,r.jsx)(l.gCW,{align:"left",mb:6,children:i===b.Wg.COMPLETE?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Ugi,{children:[(0,r.jsx)(l.X6q,{fontSize:"2xl",children:"Dataset classification ready for review"}),(0,r.jsx)(l.scM,{fontSize:"2xl"})]}),(0,r.jsxs)(l.xvT,{fontSize:"sm",color:"gray.600",maxW:"720px",children:[o," For each table, please review the recommended data categories. You can accept the recommendation or update any field before approving."]})]}):(0,r.jsx)(l.X6q,{fontSize:"2xl",children:"Dataset"})})},H=function(e){var n=e.collection,t=e.isOpen,i=e.onClose,a=(0,d.v9)(C.n0),o=(0,d.v9)(C.gR),s=(0,p.Z)((0,C.TG)(),1)[0],c=(0,l.pmc)(),u=(0,l.qY0)(),f=u.isOpen,h=u.onOpen,v=u.onClose,x=function(){var e=(0,m.Z)((function(e){var t,r,l;return(0,g.__generator)(this,(function(u){switch(u.label){case 0:if(!a||void 0===o)return[3,5];t=(0,k.Z)({},n,e),r=_(a,t,o),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,s(r)];case 2:return u.sent(),c((0,y.t5)("Successfully modified collection")),[3,4];case 3:return l=u.sent(),c((0,y.Vo)(l)),[3,4];case 4:i(),u.label=5;case 5:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=(0,m.Z)((function(){var e,n,t;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:if(!a||void 0===o)return[3,5];e=function(e,n){var t=e.collections.filter((function(e,t){return t!==n}));return(0,k.Z)({},e,{collections:t})}(a,o),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s(e)];case 2:return r.sent(),c((0,y.t5)("Successfully deleted collection")),n=a.collections.length>0?0:void 0,(0,C.Fy)(n),[3,4];case 3:return t=r.sent(),c((0,y.Vo)(t)),[3,4];case 4:i(),r.label=5;case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.ZP,{isOpen:t,onClose:i,description:"Collections are an array of objects that describe the Dataset's collections. Provide additional context to this collection by filling out the fields below.",header:(0,r.jsx)(O.zR,{title:"Collection Name: ".concat(n.name),onDelete:h}),footer:(0,r.jsx)(O.Gn,{onClose:i,formId:J}),children:(0,r.jsx)($,{values:n,onSubmit:x,dataType:"collection"})}),(0,r.jsx)(l.cVQ,{isOpen:f,onClose:v,onConfirm:j,title:"Delete Collection",message:(0,r.jsxs)(l.xvT,{children:["You are about to permanently delete the collection named"," ",(0,r.jsx)(l.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:n.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})},ee="edit-field-drawer",ne=function(e){var n,t,i,a=e.values,o=e.onSubmit,s={name:null!==(n=a.name)&&void 0!==n?n:"",description:null!==(t=a.description)&&void 0!==t?t:"",data_categories:a.data_categories},c=(0,d.v9)(x.qb),f=(0,u.useState)(null!==(i=s.data_categories)&&void 0!==i?i:[]),h=f[0],v=f[1];return(0,r.jsx)(A.J9,{initialValues:s,onSubmit:function(e){var n=(0,k.Z)({},e,{data_categories:h});o(n)},children:(0,r.jsx)(A.l0,{id:ee,children:(0,r.jsxs)(l.Kqy,{spacing:"3",children:[(0,r.jsx)(T.j0,{name:"name",label:"Name",tooltip:F.tooltip,"data-testid":"name-input"}),(0,r.jsx)(T.j0,{name:"description",label:"Description",tooltip:I.tooltip,"data-testid":"description-input"}),(0,r.jsx)(B,{dataCategories:c,checked:h,onChecked:v,tooltip:P.tooltip})]})})})},te=function(e){var n=e.dataset,t=e.isOpen,i=e.onClose,o=(0,p.Z)((0,C.TG)(),1)[0],s=(0,p.Z)((0,C.QY)(),1)[0],c=(0,a.useRouter)(),u=(0,l.pmc)(),d=(0,l.qY0)(),f=d.isOpen,h=d.onOpen,v=d.onClose,x=function(){var e=(0,m.Z)((function(e){var t,r,a;return(0,g.__generator)(this,(function(s){switch(s.label){case 0:t=(0,k.Z)({},n,e),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o(t)];case 2:return r=s.sent(),(0,j.D4)(r)?u((0,y.Vo)((0,j.e$)(r.error))):u((0,y.t5)("Successfully modified dataset")),[3,4];case 3:return a=s.sent(),u((0,y.Vo)(a)),[3,4];case 4:return i(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,m.Z)((function(){var e,t;return(0,g.__generator)(this,(function(r){switch(r.label){case 0:return e=n.fides_key,[4,s(e)];case 1:return t=r.sent(),(0,j.D4)(t)?u((0,y.Vo)((0,j.e$)(t.error))):u((0,y.t5)("Successfully deleted dataset")),(0,C.Zl)(void 0),c.push("/dataset"),i(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.ZP,{isOpen:t,onClose:i,description:"A Dataset takes a database schema (tables and columns) and adds Fides privacy categorizations. Provide additional context to this dataset by filling out the fields below.",header:(0,r.jsx)(O.zR,{title:"Dataset Name: ".concat(n.name),onDelete:h}),footer:(0,r.jsx)(O.Gn,{onClose:i,formId:ee}),children:(0,r.jsx)(ne,{values:n,onSubmit:x})}),(0,r.jsx)(l.cVQ,{isOpen:f,onClose:v,onConfirm:b,title:"Delete Dataset",message:(0,r.jsxs)(l.xvT,{children:["You are about to permanently delete the dataset named"," ",(0,r.jsx)(l.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:n.name}),". Are you sure you would like to continue?"]})})]})},ie=t(31373),re=t(79894),ae=t.n(re),oe=function(e){var n=e.children,t=e.isDisabled,i=e.onClick,a=(0,ie.Z)(e,["children","isDisabled","onClick"]);return(0,r.jsx)(l.sNh,(0,q.Z)((0,k.Z)({isDisabled:t,_hover:{backgroundColor:"gray.100"},fontSize:"sm",onClick:i},a),{children:n}))},se=function(e){var n=e.onModifyCollection,t=e.onModifyDataset;return(0,r.jsxs)(l.v2r,{size:"sm",children:[(0,r.jsx)(l.j2t,{as:l.zxk,variant:"outline","data-testid":"more-actions-btn",children:(0,r.jsx)(l.nXP,{})}),(0,r.jsxs)(l.qyq,{children:[(0,r.jsxs)(l.kSQ,{title:"Collections",color:"gray.500",textTransform:"uppercase",mx:3,children:[(0,r.jsx)(l.RaW,{}),(0,r.jsx)(oe,{isDisabled:!0,children:"Add a collection"}),(0,r.jsx)(oe,{onClick:n,"data-testid":"modify-collection",children:"Modify collection"})]}),(0,r.jsxs)(l.kSQ,{title:"Datasets",color:"gray.500",textTransform:"uppercase",mx:3,children:[(0,r.jsx)(l.RaW,{}),(0,r.jsx)(oe,{children:(0,r.jsx)(ae(),{href:"/dataset",children:"Select new dataset"})}),(0,r.jsx)(oe,{isDisabled:!0,children:"Classify this dataset"}),(0,r.jsx)(oe,{onClick:t,"data-testid":"modify-dataset",children:"Modify dataset"})]})]})]})},ce=[{name:"Field Name",attribute:"name"},{name:"Description",attribute:"description"},{name:"Personal Data Categories",attribute:"data_categories"}],le=function(e){var n=e.fidesKey,t=(0,d.I0)(),a=function(e){var n=(0,C.oM)(e),t=n.data,i=n.isLoading,r=(0,h.hz)(),a=(0,v.Tc)(e,{skip:!r.plus}).isLoading;return(0,x.MO)(),{isLoading:i||a,dataset:t}}(n),o=a.dataset,s=a.isLoading,c=(0,d.v9)(C.fQ),m=(0,d.v9)(C.Jb),p=(0,d.v9)(C.U3),g=(0,u.useState)(ce),j=g[0],y=g[1];(0,x.MO)(),(0,u.useEffect)((function(){o&&t((0,C.Zl)(o.fides_key))}),[t,o]),(0,u.useEffect)((function(){return function(){t((0,C.Zl)(void 0))}}),[]);return s?(0,r.jsx)(l.$jN,{}):o?(0,r.jsxs)(l.xuv,{children:[(0,r.jsx)(Q,{}),(0,r.jsxs)(l.Ugi,{mb:4,children:[(0,r.jsx)(l.PhF,{onChange:function(e){t((0,C.Fy)(e.target.selectedIndex))},width:"fit-content",flexShrink:0,"data-testid":"collection-select",children:(null!==c&&void 0!==c?c:[]).map((function(e){return(0,r.jsx)("option",{value:e.name,children:e.name},e.name)}))}),(0,r.jsx)(S,{}),(0,r.jsx)(l.xuv,{children:(0,r.jsx)(f.s,{allColumns:ce,selectedColumns:j,onChange:y})}),(0,r.jsx)(se,{onModifyCollection:function(){return t((0,C.JY)(i.COLLECTION))},onModifyDataset:function(){return t((0,C.JY)(i.DATASET))}})]}),(0,r.jsx)(K,{columns:j}),m?(0,r.jsx)(H,{collection:m,isOpen:p===i.COLLECTION,onClose:function(){return t((0,C.JY)(void 0))}}):null,o?(0,r.jsx)(te,{dataset:o,isOpen:p===i.DATASET,onClose:function(){return t((0,C.JY)(void 0))}}):null]}):(0,r.jsx)("div",{children:"Dataset not found"})},ue=function(){var e=(0,a.useRouter)().query.id;if(!e)return(0,r.jsx)(o.Z,{title:"Dataset",children:"Dataset not found"});var n=Array.isArray(e)?e[0]:e;return(0,r.jsxs)(o.Z,{title:"Dataset - ".concat(e),children:[(0,r.jsx)(s.Z,{backPath:c.$m}),(0,r.jsx)(le,{fidesKey:n})]})}},32764:function(e,n,t){"use strict";t.d(n,{Bw:function(){return o},D4:function(){return r},Dy:function(){return c},XD:function(){return l},cz:function(){return u},hE:function(){return s},oK:function(){return a}});var i=t(76649),r=function(e){return"error"in e},a=function(e){return(0,i.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},o=function(e){return(0,i.Ln)({status:"number",data:{}},e)},s=function(e){return(0,i.Ln)({detail:"string"},e)},c=function(e){return(0,i.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,i.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,i.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},76649:function(e,n,t){"use strict";t.d(n,{Ln:function(){return i},uX:function(){return o}});const i=(e,n)=>a(e,n),r=Symbol("SOME"),a=(e,n)=>{if("string"==typeof e)return e===typeof n;if(Array.isArray(e))return r in e?e.some((e=>a(e,n))):!!Array.isArray(n)&&(0===e.length||n.every((n=>e.some((e=>a(e,n))))));if("object"!=typeof n||null===n)return!1;const t=n;return Object.entries(e).every((([e,n])=>a(n,t[e])))},o=e=>n=>i(e,n);class s{static narrow(e){return new s((n=>i(e,n)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const n=this.NF,t=e instanceof s?e.NF:e instanceof Function?e:n=>i(e,n);return new s((e=>n(e)&&t(e)))}}new s((e=>!0))}},function(e){e.O(0,[9774,2888,179],(function(){return n=87736,e(e.s=n);var n}));var n=e.O();_N_E=n}]);