(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6050],{91747:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datastore-connection/new",function(){return t(30600)}])},33745:function(e,n,t){"use strict";t.d(n,{Tg:function(){return s}});var i=t(24246),r=t(10503),o=t(23536),s=function(e){return(0,r.C)(o.uu).filter((function(n){return e.includes(n)})).length>0};n.ZP=function(e){var n=e.scopes,t=e.children;return s(n)?(0,i.jsx)(i.Fragment,{children:t}):null}},28953:function(e,n,t){"use strict";var i=t(85034),r=t(70169),o=t(52050),s=t(3204),a=t(24246),c=t(83265),l=t(27378);n.Z=function(e){var n,t=e.disabled,u=void 0!==t&&t,d=e.enableSorting,p=void 0===d||d,f=e.hasClear,x=void 0===f||f,h=e.label,v=e.list,m=e.menuButtonProps,g=e.onChange,j=e.selectedValue,b=(0,l.useState)(!1),y=b[0],C=b[1],T=function(){C(!1)},S=null===(n=(0,s.Z)(v).find((function(e){return(0,o.Z)(e,2)[1].value===j})))||void 0===n?void 0:n[0];return(0,a.jsxs)(c.v2r,{isLazy:!0,onClose:T,onOpen:function(){C(!0)},strategy:"fixed",children:[(0,a.jsx)(c.j2t,(0,r.Z)((0,i.Z)({"aria-label":null!==S&&void 0!==S?S:h,as:c.zxk,color:S?"complimentary.500":void 0,disabled:u,fontWeight:"normal",rightIcon:(0,a.jsx)(c.mCO,{}),size:"sm",variant:"outline",_active:{bg:"none"},_hover:{bg:"none"}},m),{"data-testid":"select-dropdown-btn",children:(0,a.jsx)(c.xvT,{noOfLines:1,wordBreak:"break-all",children:null!==S&&void 0!==S?S:h})})),y?(0,a.jsxs)(c.qyq,{lineHeight:"1rem",p:"0","data-testid":"select-dropdown-list",children:[x&&(0,a.jsx)(c.kCb,{borderBottom:"1px",borderColor:"gray.200",cursor:"auto",p:"8px",children:(0,a.jsx)(c.zxk,{onClick:function(){g(void 0),T()},size:"xs",variant:"outline",children:"Clear"})}),(p?(0,s.Z)(v).sort():(0,s.Z)(v)).map((function(e){var n=(0,o.Z)(e,2),t=n[0],i=n[1];return(0,a.jsx)(c.ua7,{"aria-label":i.toolTip,hasArrow:!0,label:i.toolTip,placement:"auto-start",openDelay:500,shouldWrapChildren:!0,children:(0,a.jsx)(c.sNh,{color:j===i.value?"complimentary.500":void 0,isDisabled:i.isDisabled,onClick:function(){return g(i.value)},paddingTop:"10px",paddingRight:"8.5px",paddingBottom:"10px",paddingLeft:"8.5px",_focus:{bg:"gray.100"},children:(0,a.jsx)(c.xvT,{fontSize:"0.75rem",children:t})})},t)}))]}):null]})}},61186:function(e,n,t){"use strict";t.d(n,{MA:function(){return c},Vo:function(){return u},t5:function(){return l}});var i=t(85034),r=t(24246),o=t(83265),s=function(e){var n=e.children;return(0,r.jsxs)(o.xvT,{"data-testid":"toast-success-msg",children:[(0,r.jsx)("strong",{children:"Success:"})," ",n]})},a=function(e){var n=e.children;return(0,r.jsxs)(o.xvT,{"data-testid":"toast-error-msg",children:[(0,r.jsx)("strong",{children:"Error:"})," ",n]})},c={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},l=function(e){var n=(0,r.jsx)(s,{children:e});return(0,i.Z)({},c,{description:n})},u=function(e){var n=(0,r.jsx)(a,{children:e});return(0,i.Z)({},c,{description:n,status:"error"})}},64619:function(e,n,t){"use strict";t.d(n,{Z:function(){return b}});var i=t(23842),r=t(85034),o=t(70169),s=t(52050),a=t(85556),c=t(24246),l=t(83265),u=t(27378),d=t(44833),p=t(45007),f=t(32556),x=t(61186),h=t(51816),v=t(89319),m=t(99597),g=t(85768),j=((0,v.oM)({name:"connectorTemplate",initialState:{},reducers:{}}).reducer,g.u.injectEndpoints({endpoints:function(e){return{registerConnectorTemplate:e.mutation({query:function(e){var n=new FormData;return n.append("file",e),{url:"".concat(m.o4,"/register"),method:"POST",body:n}},invalidatesTags:function(){return["Connection Type"]}})}}}).useRegisterConnectorTemplateMutation),b=function(e){var n=e.isOpen,t=e.onClose,v=e.testId,m=void 0===v?"connector-template-modal":v,g=(0,p.I0)(),b=(0,u.useState)(null),y=b[0],C=b[1],T=(0,l.pmc)(),S=(0,d.uI)({onDrop:function(e){var n;"zip"===(null===(n=e[0].name.split(".").pop())||void 0===n?void 0:n.toLowerCase())?C(e[0]):T((0,x.Vo)("Only zip files are allowed."))}}),Z=S.getRootProps,k=S.getInputProps,I=S.isDragActive,w=(0,s.Z)(j(),2),_=w[0],O=w[1].isLoading,A=(0,h.$I)({search:""},{skip:!1}).refetch,E=function(){var e=(0,i.Z)((function(){var e,n,i;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:if(!y)return[3,6];r.label=1;case 1:return r.trys.push([1,4,5,6]),[4,_(y).unwrap()];case 2:return r.sent(),T((0,x.t5)("Integration template uploaded successfully.")),[4,A()];case 3:return e=r.sent().data,g((0,h.fP)(null!==(n=null===e||void 0===e?void 0:e.items)&&void 0!==n?n:[])),t(),[3,6];case 4:return i=r.sent(),T((0,x.Vo)((0,f.e$)(i))),[3,6];case 5:return C(null),[7];case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)(l.u_l,{isOpen:n,onClose:t,size:"2xl",children:[(0,c.jsx)(l.ZAr,{}),(0,c.jsxs)(l.hzk,{textAlign:"left",p:2,"data-testid":m,children:[(0,c.jsx)(l.xBx,{children:"Upload integration template"}),(0,c.jsxs)(l.fef,{children:[(0,c.jsx)(l.xvT,{fontSize:"sm",mb:4,children:"Drag and drop your integration template zip file here, or click to browse your files."}),(0,c.jsxs)(l.xuv,(0,o.Z)((0,r.Z)({},Z()),{bg:I?"gray.100":"gray.50",border:"2px dashed",borderColor:I?"gray.300":"gray.200",borderRadius:"md",cursor:"pointer",minHeight:"150px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,c.jsx)("input",(0,r.Z)({},k())),y?(0,c.jsx)(l.xvT,{children:y.name}):I?(0,c.jsx)(l.xvT,{children:"Drop the file here..."}):(0,c.jsx)(l.xvT,{children:"Click or drag and drop your file here."})]})),(0,c.jsx)(l.xvT,{fontSize:"sm",mt:4,children:"An integration template zip file must include a SaaS config and dataset, but may also contain an icon (.svg) as an optional file."})]}),(0,c.jsx)(l.mzw,{children:(0,c.jsxs)(l.hE2,{size:"sm",spacing:"2",width:"100%",display:"flex",justifyContent:"right",children:[(0,c.jsx)(l.zxk,{variant:"outline",onClick:t,"data-testid":"cancel-btn",isDisabled:O,children:"Cancel"}),(0,c.jsx)(l.zxk,{colorScheme:"primary",type:"submit",isDisabled:!y||O,onClick:E,"data-testid":"submit-btn",children:"Submit"})]})})]})]})}},30600:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return z}});var i=t(24246),r=t(53178),o=t(3194),s=t(83265),a=t(86677),c=t(27378),l=t(45007),u=t(10503),d=t(22850),p=t(93677),f=t(3204),x=t(98878),h=t(33745),v=t(64619),m=t(10439),g=t(28953),j=t(47938),b=function(e){var n=e.width,t=(0,l.I0)(),o=(0,c.useRef)(!1),a=(0,u.C)(r.pw);return(0,c.useEffect)((function(){return o.current=!0,function(){t((0,r.zq)(j.gA)),o.current=!1}}),[t]),(0,i.jsx)(s.xuv,{children:(0,i.jsx)(g.Z,{enableSorting:!1,hasClear:!1,label:"Show all connectors",list:j.yI,menuButtonProps:{width:n},onChange:function(e){t((0,r.zq)(e||j.gA))},selectedValue:a.system_type||j.gA})})},y=t(79894),C=t.n(y),T=function(e){var n=e.items;return(0,i.jsx)(s.MIq,{columns:4,spacingX:"16px",spacingY:"16px",children:n.map((function(e){return(0,i.jsx)(C(),{href:{pathname:window.location.pathname,query:{step:2,connectorType:JSON.stringify(e)}},passHref:!0,children:(0,i.jsx)(s.xuv,{boxShadow:"base",borderRadius:"5px",maxWidth:"331px",overflow:"hidden",_hover:{boxShadow:"lg",cursor:"pointer"},"data-testid":"".concat(e.identifier,"-item"),children:(0,i.jsxs)(s.kCb,{alignItems:"center",justifyContent:"start",pl:"24px",pr:"24px",color:"gray.700",fontSize:"14px",fontStyle:"normal",fontWeight:"600",lineHeight:"20px",h:"80px",children:[(0,i.jsx)(o.Z,{data:e}),(0,i.jsx)(s.xvT,{ml:"12px",children:e.human_readable})]})})},e.identifier)}))})},S=function(){var e=(0,l.I0)(),n=(0,c.useRef)(!1),t=(0,u.C)(r.ZZ).step,o=(0,u.C)(r.pw),a=(0,r.$I)(o),d=a.data,p=a.isFetching,g=a.isLoading,j=a.isSuccess,y=(0,c.useState)(!1),C=y[0],S=y[1],Z=(0,c.useCallback)((function(n){(0===n.target.value.length||n.target.value.length>1)&&e((0,r.qP)(n.target.value))}),[e]),k=(0,c.useMemo)((function(){return(0,x.Ds)(Z,250)}),[Z]),I=(0,c.useMemo)((function(){return(null===d||void 0===d?void 0:d.items)&&(0,f.Z)(d.items).sort((function(e,n){return e.human_readable>n.human_readable?1:-1}))}),[d]);return(0,c.useEffect)((function(){return n.current=!0,function(){e((0,r.qP)("")),n.current=!1}}),[e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.kCb,{minWidth:"fit-content",children:(0,i.jsx)(s.xuv,{color:"gray.700",fontSize:"14px",maxHeight:"80px",maxWidth:"474px",mb:"24px",children:t.description})}),(0,i.jsxs)(s.kCb,{alignItems:"center",gap:"4",mb:"24px",minWidth:"fit-content",children:[(0,i.jsx)(b,{}),(0,i.jsxs)(s.BZy,{size:"sm",children:[(0,i.jsx)(s.Z8_,{pointerEvents:"none",children:(0,i.jsx)(s.PTu,{color:"gray.300",h:"17px",w:"17px"})}),(0,i.jsx)(s.IIB,{autoComplete:"off",autoFocus:!0,borderRadius:"md",name:"search",onChange:k,placeholder:"Search integrations",size:"sm",type:"search"})]}),(0,i.jsx)(h.ZP,{scopes:[m.Sh.CONNECTOR_TEMPLATE_REGISTER],children:(0,i.jsx)(s.zxk,{colorScheme:"primary",type:"submit",minWidth:"auto","data-testid":"upload-btn",size:"sm",onClick:function(){S(!0)},children:"Upload connector"})})]}),(0,i.jsx)(v.Z,{isOpen:C,onClose:function(){return S(!1)}}),(p||g)&&(0,i.jsx)(s.M5Y,{children:(0,i.jsx)(s.$jN,{})}),j&&I?(0,i.jsx)(T,{items:I}):null]})},Z=t(83834),k=t(61456),I=t(3550),w=t(50367),_=function(){var e=(0,l.I0)(),n=(0,c.useRef)(!1),t=(0,c.useState)(!1),o=t[0],a=t[1],d=(0,u.C)(r.ZZ),p=d.connection,f=d.connectionOption,x=j.IM.find((function(e){return e.type===(null===f||void 0===f?void 0:f.type)})),h=(0,c.useState)(null===x||void 0===x?void 0:x.options[0]),v=h[0],g=h[1],b=function(){a(!0)},y=(0,c.useMemo)((function(){return function(){var e=[];return(null===x||void 0===x?void 0:x.options)&&x.options.forEach((function(n){var t;switch(n){case j.H5.CONNECTOR_PARAMETERS:t={label:n,content:(0,i.jsx)(k.s,{onConnectionCreated:b})};break;case j.H5.DATASET_CONFIGURATION:t=(null===p||void 0===p?void 0:p.key)?{label:n,content:(0,i.jsx)(I.Z,{})}:void 0;break;case j.H5.DSR_CUSTOMIZATION:t=(null===p||void 0===p?void 0:p.key)?{label:n,content:(0,i.jsx)(w.Z,{})}:void 0}t&&e.push(t)})),e}}),[null===p||void 0===p?void 0:p.key,null===x||void 0===x?void 0:x.options]),C=(0,c.useCallback)((function(n){switch(n){case j.H5.DATASET_CONFIGURATION:case j.H5.DSR_CUSTOMIZATION:e((0,r.nj)(j.Ss[3]));break;case j.H5.CONNECTOR_PARAMETERS:default:e((0,r.nj)(j.Ss[2]))}g(n)}),[e]);return(0,c.useEffect)((function(){return n.current=!0,function(){n.current=!1,e((0,r.mc)())}}),[e]),(0,c.useEffect)((function(){(null===p||void 0===p?void 0:p.key)&&(C((null===f||void 0===f?void 0:f.type)!==m.Zi.MANUAL?j.H5.DATASET_CONFIGURATION:j.H5.DSR_CUSTOMIZATION),o&&a(!1))}),[o,null===p||void 0===p?void 0:p.key,null===f||void 0===f?void 0:f.type,null===x||void 0===x?void 0:x.options,C]),(0,i.jsx)(s.gCW,{alignItems:"stretch",gap:"18px",children:(0,i.jsx)(Z.Z,{data:y(),flexGrow:1,index:null===x||void 0===x?void 0:x.options.findIndex((function(e){return e===v})),isLazy:!0})})},O=t(81881),A=function(){var e=(0,l.I0)(),n=(0,a.useRouter)(),t=n.query,f=t.connectorType,x=t.step,h=(0,u.C)(r.ZZ),v=h.connection,m=h.connectionOption,g=h.step;(0,c.useEffect)((function(){if(f&&e((0,r.yA)(JSON.parse(f))),n.query.step){var t=j.Ss.find((function(e){return e.stepId===Number(x)}));e((0,r.nj)(t||j.Ss[1]))}return!n.query.id&&(null===v||void 0===v?void 0:v.key)&&(0,O.S)(v.key,g.href),function(){}}),[null===v||void 0===v?void 0:v.key,f,x,e,n.query.id,n.query.step,g.href]);var b=(0,c.useCallback)((function(e){var n="";switch(e.stepId){case 2:case 3:n=e.label.replace("{identifier}",m.human_readable);break;default:n=e.label}return n}),[m]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{backPath:p.JR}),(0,i.jsx)(s.X6q,{fontSize:"2xl",fontWeight:"semibold",maxHeight:"40px",mb:"4px",whiteSpace:"nowrap",children:(0,i.jsxs)(s.xuv,{alignItems:"center",display:"flex",children:[m&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{data:m}),(0,i.jsx)(s.xvT,{ml:"8px",children:b(g)})]}),!m&&(0,i.jsx)(s.xvT,{children:b(g)})]})}),function(){switch(g.stepId){case 1:default:return(0,i.jsx)(S,{});case 2:case 3:return(0,i.jsx)(_,{})}}()]})},E=t(1268),z=function(){return(0,i.jsx)(E.Z,{children:(0,i.jsx)(A,{})})}}},function(e){e.O(0,[7923,4833,7146,1397,9774,2888,179],(function(){return n=91747,e(e.s=n);var n}));var n=e.O();_N_E=n}]);