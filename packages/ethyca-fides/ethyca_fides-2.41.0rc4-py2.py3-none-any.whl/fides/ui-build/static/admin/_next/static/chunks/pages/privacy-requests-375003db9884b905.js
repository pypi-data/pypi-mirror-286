(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2369],{1565:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests",function(){return t(50426)}])},25010:function(e,n,t){"use strict";var r=t(85034),i=t(70169),a=t(24246),s=t(83265),o=t(88038),l=t.n(o);t(27378);n.Z=function(e){var n=e.children,t=e.title,o=e.mainProps;return(0,a.jsxs)(s.kCb,{"data-testid":t,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 200px)",children:[(0,a.jsxs)(l(),{children:[(0,a.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,a.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)(s.kCb,(0,i.Z)((0,r.Z)({pt:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0},o),{children:n}))]})}},66081:function(e,n,t){"use strict";var r=t(24246),i=t(83265);n.Z=function(e){var n=e.title,t=e.text,a=e.onClose;return(0,r.jsxs)(i.Ugi,{backgroundColor:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",py:4,pr:6,pl:3,"data-testid":"empty-state",gap:2,position:"relative",children:[a&&(0,r.jsx)(i.Two,{boxSize:5,position:"absolute",right:3,top:3,zIndex:1,cursor:"pointer",p:1,onClick:a}),(0,r.jsx)(i.iid,{alignSelf:"start",color:"blue.400",mt:.5,flexGrow:0}),(0,r.jsxs)(i.kCb,{direction:"column",gap:2,flexGrow:1,children:[(0,r.jsx)(i.X6q,{fontSize:"md",children:n}),(0,r.jsx)(i.xvT,{fontSize:"sm",color:"gray.600",lineHeight:"5",children:t})]})]})}},33745:function(e,n,t){"use strict";t.d(n,{Tg:function(){return s}});var r=t(24246),i=t(10503),a=t(23536),s=function(e){return(0,i.C)(a.uu).filter((function(n){return e.includes(n)})).length>0};n.ZP=function(e){var n=e.scopes,t=e.children;return s(n)?(0,r.jsx)(r.Fragment,{children:t}):null}},83807:function(e,n,t){"use strict";var r=t(52050),i=t(3204),a=t(24246),s=t(83265),o=t(27378);n.Z=function(e){var n=e.defaultValues,t=e.items,l=e.onSelection,u=(0,o.useState)(t),c=u[0],d=u[1],f=function(){l(c)};return(0,a.jsxs)(s.qyq,{lineHeight:"1rem",pt:"0",children:[(0,a.jsxs)(s.kCb,{borderBottom:"1px",borderColor:"gray.200",cursor:"auto",p:"8px",children:[(0,a.jsx)(s.zxk,{onClick:function(){d(t),l(new Map)},size:"xs",variant:"outline",children:"Clear"}),(0,a.jsx)(s.LZC,{}),(0,a.jsx)(s.zxk,{backgroundColor:"primary.800",color:"white",onClick:f,size:"xs",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Done"})]}),(0,a.jsx)(s.xuv,{maxH:"360px",overflow:"auto",children:(0,a.jsx)(s.cOn,{colorScheme:"purple",defaultValue:n,onChange:function(e){var n=new Map(c);n.forEach((function(e,t){n.set(t,!1)})),e.forEach((function(e){n.set(e,!0)})),d(n)},children:(0,i.Z)(t).sort().map((function(e){var n=(0,r.Z)(e,1)[0];return(0,a.jsx)(s.sNh,{p:0,onKeyPress:function(e){" "===e.key&&e.currentTarget.getElementsByTagName("input")[0].click(),"Enter"===e.key&&f()},children:(0,a.jsx)(s.XZJ,{isChecked:t.get(n),spacing:2,value:n,width:"100%",fontSize:"0.75rem",paddingTop:"10px",paddingRight:"8.5px",paddingBottom:"10px",paddingLeft:"8.5px",onClick:function(e){return e.stopPropagation()},children:n})},n)}))})})]})}},23027:function(e,n,t){"use strict";t.d(n,{HK:function(){return a},VY:function(){return r.V},O3:function(){return o}});var r=t(95389),i=t(32556),a=function(){var e=(0,r.V)().errorAlert;return{handleError:function(n){var t="An unexpected error occurred. Please try again.";(0,i.Ot)(n)?t=n.data.detail:(0,i.tB)(n)&&(t=n.data.detail[0].msg),e(t)}}},s=t(27378),o=function(e){var n=(0,s.useRef)(void 0);return(0,s.useEffect)((function(){var t=function(t){var r;(null===(r=n.current)||void 0===r?void 0:r.contains(t.target))||e()};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[n,e]),{ref:n}}},95389:function(e,n,t){"use strict";t.d(n,{V:function(){return o}});var r=t(85034),i=t(70169),a=t(24246),s=t(83265),o=function(){var e=(0,s.pmc)();return{errorAlert:function(n,t,o){var l=(0,i.Z)((0,r.Z)({},o),{position:(null===o||void 0===o?void 0:o.position)||"top",render:function(e){var r=e.onClose;return(0,a.jsxs)(s.bZj,{alignItems:"normal",status:"error",children:[(0,a.jsx)(s.zMQ,{}),(0,a.jsxs)(s.xuv,{children:[t&&(0,a.jsx)(s.CdC,{children:t}),(0,a.jsx)(s.XaZ,{children:n})]}),(0,a.jsx)(s.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});(null===o||void 0===o?void 0:o.id)&&e.isActive(o.id)?e.update(o.id,l):e(l)},successAlert:function(n,t,o){var l=(0,i.Z)((0,r.Z)({},o),{position:(null===o||void 0===o?void 0:o.position)||"top",render:function(e){var r=e.onClose;return(0,a.jsxs)(s.bZj,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,a.jsx)(s.zMQ,{}),(0,a.jsxs)(s.xuv,{children:[t&&(0,a.jsx)(s.CdC,{children:t}),(0,a.jsx)(s.XaZ,{children:n})]}),(0,a.jsx)(s.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});(null===o||void 0===o?void 0:o.id)&&e.isActive(o.id)?e.update(o.id,l):e(l)}}}},82938:function(e,n,t){"use strict";var r=t(52050),i=t(24246),a=t(83265),s=t(27378);n.Z=function(e){var n=e.isOpen,t=e.onClose,o=e.onApproveRequest,l=e.isLoading,u=e.subjectRequest,c=u.identity,d=u.identity_verified_at,f=u.custom_privacy_request_fields,v=(0,s.useCallback)((function(){o().then((function(){t()}))}),[o,t]);return(0,i.jsxs)(a.u_l,{isOpen:n,onClose:t,size:"lg",isCentered:!0,children:[(0,i.jsx)(a.ZAr,{}),(0,i.jsxs)(a.hzk,{children:[(0,i.jsx)(a.xBx,{children:"Privacy request approval"}),(0,i.jsxs)(a.fef,{paddingTop:0,paddingBottom:0,children:[(0,i.jsx)(a.xvT,{color:"gray.500",fontSize:"14px",marginBottom:4,children:"Are you sure you want to approve this privacy request?"}),(0,i.jsxs)(a.QI$,{children:[Object.entries(c).filter((function(e){return null!==(0,r.Z)(e,2)[1].value})).map((function(e){var n=(0,r.Z)(e,2),t=n[0],s=n[1],o=s.value,l=s.label;return(0,i.jsx)(a.HCh,{children:(0,i.jsxs)(a.kCb,{alignItems:"flex-start",children:[(0,i.jsxs)(a.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[l,":"]}),(0,i.jsx)(a.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:o}),"(",d?"Verified":"Unverified",")"]},t)},t)})),f&&Object.entries(f).filter((function(e){return(0,r.Z)(e,2)[1].value})).map((function(e){var n=(0,r.Z)(e,2),t=n[0],s=n[1];return(0,i.jsx)(a.HCh,{children:(0,i.jsxs)(a.kCb,{alignItems:"flex-start",children:[(0,i.jsxs)(a.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[s.label,":"]}),(0,i.jsxs)(a.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:[Array.isArray(s.value)?s.value.join(", "):s.value," "]}),"(Unverified)"]},t)},t)}))]})]}),(0,i.jsx)(a.mzw,{children:(0,i.jsxs)(a.MIq,{columns:2,width:"100%",children:[(0,i.jsx)(a.zxk,{variant:"outline",size:"sm",mr:3,"data-testid":"cancel-btn",onClick:t,children:"Cancel"}),(0,i.jsx)(a.zxk,{colorScheme:"primary",variant:"solid",size:"sm","data-testid":"continue-btn",onClick:v,isLoading:l,children:"Confirm"})]})})]})]})}},30873:function(e,n,t){"use strict";var r=t(24246),i=t(56071),a=t(83265),s=t(34090),o=t(27378),l=t(16310),u={denialReason:""};n.Z=function(e){var n=e.isOpen,t=e.onClose,c=e.onDenyRequest,d=(0,o.useCallback)((function(e,n){var r=n.setSubmitting;c(e.denialReason).then((function(){r(!1),t()}))}),[c,t]);return(0,r.jsxs)(a.u_l,{isOpen:n,onClose:t,isCentered:!0,returnFocusOnClose:!1,children:[(0,r.jsx)(a.ZAr,{}),(0,r.jsx)(a.hzk,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,r.jsx)(s.J9,{initialValues:u,validationSchema:l.Ry({denialReason:l.Z_().required().label("Reason for denial")}),onSubmit:d,children:function(e){var n=e.isSubmitting,o=e.dirty,l=e.isValid;return(0,r.jsxs)(s.l0,{children:[(0,r.jsx)(a.xBx,{children:"Privacy request denial"}),(0,r.jsx)(a.fef,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,r.jsx)(a.fef,{children:(0,r.jsx)(i.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,r.jsxs)(a.mzw,{children:[(0,r.jsx)(a.zxk,{variant:"outline",size:"sm",width:"100%",maxWidth:"198px",mr:3,isDisabled:n,onClick:t,children:"Cancel"}),(0,r.jsx)(a.zxk,{type:"submit",size:"sm",width:"100%",maxWidth:"198px",colorScheme:"primary",variant:"solid",isDisabled:!o||!l,isLoading:n,"data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})}},61932:function(e,n,t){"use strict";t.d(n,{DE:function(){return o},MP:function(){return i},qX:function(){return s},rE:function(){return a}});var r=t(10439),i=new Map([[r.q2.APPROVED,"Approved"],[r.q2.CANCELED,"Canceled"],[r.q2.COMPLETE,"Completed"],[r.q2.DENIED,"Denied"],[r.q2.ERROR,"Error"],[r.q2.IN_PROCESSING,"In Progress"],[r.q2.PENDING,"New"],[r.q2.PAUSED,"Paused"],[r.q2.IDENTITY_UNVERIFIED,"Unverified"],[r.q2.REQUIRES_INPUT,"Requires input"]]),a=new Map([[r.Us.ACCESS,"Access"],[r.Us.ERASURE,"Erasure"],[r.Us.CONSENT,"Consent"],[r.Us.UPDATE,"Update"]]),s={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},o={local:"local",s3:"s3"}},62962:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(52050),i=t(63076),a=function(e){var n=e.subjectRequest,t=(0,r.Z)((0,i.RW)({fixedCacheKey:n.id}),2),a=t[0],s=t[1],o=(0,r.Z)((0,i.F1)({fixedCacheKey:n.id}),2),l=o[0],u=o[1],c=u.isLoading||s.isLoading;return{approveRequest:a,approveRequestResult:s,denyRequest:l,denyRequestResult:u,handleApproveRequest:function(){return a(n)},handleDenyRequest:function(e){return l({id:n.id,reason:e})},isLoading:c}}},50426:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return le}});var r,i=t(24246),a=t(25010),s=t(83265),o=t(65218),l=t.n(o),u=t(27378),c=t(67447),d=t(33745),f=t(23842),v=t(5049),p=t(15963),h=t(85034),x=t(70169),m=t(85556),y=t(59003),g=t(92222),b=t(86677),j=t(45007),_=t(86496),C=t(83334),q=t(73659),R=t(63076),E=t(98878),Z=t(61932),S=t(10439),k={approved:{colorScheme:"green",label:"Approved"},complete:{label:"Completed"},awaiting_email_send:{label:"Awaiting Email Send"},denied:{label:"Denied"},canceled:{label:"Canceled"},error:{colorScheme:"red",label:"Error"},in_processing:{colorScheme:"yellow",label:"In Progress"},paused:{label:"Paused"},pending:{colorScheme:"blue",label:"New"},identity_unverified:{colorScheme:"red",label:"Unverified"},requires_input:{colorScheme:"orange",label:"Requires Input"}},w=function(e){var n=e.value;return(0,i.jsx)(q.A4,{colorScheme:k[n].colorScheme,value:k[n].label,"data-testid":"request-status-badge"})},P=function(e){var n=e.daysLeft,t=e.timeframe,r=void 0===t?45:t,a=e.status,s=e.includeText,o=void 0!==s&&s;if(void 0===n||a===S.q2.COMPLETE||a===S.q2.CANCELED||a===S.q2.DENIED||a===S.q2.IDENTITY_UNVERIFIED)return null;var l,u=100*n/r;return u<25?l="red":u>=75?l="green":u>=25&&(l="orange"),(0,i.jsx)(q.A4,{value:o?"".concat(n," days left"):n.toString(),colorScheme:l})},z=function(e){var n,t=e.value,r=(n=t,Array.from(new Set(n.filter((function(e){return Object.values(S.Us).includes(e.action_type)})).map((function(e){return e.action_type}))))).map((function(e){return Z.rE.get(e)}));return(0,i.jsx)(q.WP,{value:r,isDisplayAll:!0})},I=t(31373),T=t(82938),D=t(30873),A=t(62962),O=function(e){var n=e.subjectRequest,t=(0,I.Z)(e,["subjectRequest"]),r=(0,s.qY0)(),a=(0,s.qY0)(),o=(0,A.Z)({subjectRequest:n}),l=o.handleApproveRequest,u=o.handleDenyRequest,c=o.isLoading;return"pending"!==n.status?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.Ugi,(0,x.Z)((0,h.Z)({},t),{children:[(0,i.jsx)(s.hU,{title:"Approve","aria-label":"Approve",icon:(0,i.jsx)(s.nQG,{w:2,h:2}),onClick:r.onOpen,isLoading:c,isDisabled:c,"data-testid":"privacy-request-approve-btn",size:"xs",variant:"outline"}),(0,i.jsx)(s.hU,{title:"Deny","aria-label":"Deny",icon:(0,i.jsx)(s.Two,{w:2,h:2}),onClick:a.onOpen,isLoading:c,isDisabled:c,"data-testid":"privacy-request-deny-btn",size:"xs",variant:"outline"})]})),(0,i.jsx)(s.h_i,{children:(0,i.jsx)(T.Z,{isOpen:r.isOpen,isLoading:c,onClose:r.onClose,onApproveRequest:l,subjectRequest:n})}),(0,i.jsx)(s.h_i,{children:(0,i.jsx)(D.Z,{isOpen:a.isOpen,onClose:a.onClose,onDenyRequest:u})})]})};!function(e){e.STATUS="status",e.DAYS_LEFT="due_date",e.REQUEST_TYPE="request_type",e.SUBJECT_IDENTITY="subject_identity",e.TIME_RECIEVED="created_at",e.CREATED_BY="created_by",e.REVIEWER="reviewer",e.ID="id",e.ACTIONS="actions"}(r||(r={}));var U=(0,g.Cl)(),F=t(83807),V=function(e){var n=e.closeOnSelect,t=void 0!==n&&n,r=e.options,a=e.value,o=e.onChange,l=e.placeholder,c=void 0===l?"Select one or more items":l,d=(0,I.Z)(e,["closeOnSelect","options","value","onChange","placeholder"]),f=(0,u.useState)(!1),v=f[0],p=f[1],m=(0,u.useMemo)((function(){return(0,E.gv)(r,a)}),[r,a]),y=(0,u.useMemo)((function(){return null===a||void 0===a?void 0:a.map((function(e){return r.get(e)}))}),[r,a]),g=function(){p(!1)};return(0,i.jsx)(s.v2r,{isLazy:!0,closeOnSelect:t,onClose:g,onOpen:function(){p(!0)},children:function(e){var n=e.onClose;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.xuv,{sx:(0,h.Z)({border:"1px solid",borderColor:"gray.200",borderRadius:"md",display:"flex",flexWrap:"wrap",gap:2,py:2,pl:2,pr:10,position:"relative",zIndex:0},d.sx),children:[(null===a||void 0===a?void 0:a.length)?a.map((function(e){return(0,i.jsxs)(s.Vp9,{size:"md",zIndex:1,children:[(0,i.jsx)(s.Sn0,{children:r.get(e)}),(0,i.jsx)(s.SD9,{onClick:function(){return n=e,void o(a.filter((function(e){return e!==n})));var n}})]},e)})):c,(0,i.jsx)(s.j2t,(0,x.Z)((0,h.Z)({as:s.zxk,rightIcon:(0,i.jsx)(s.mCO,{}),variant:"ghost",_active:{bg:"none"},_hover:{bg:"none"},"aria-label":c},d),{sx:(0,h.Z)({position:"absolute",height:"auto",top:0,right:0,bottom:0,left:0,zIndex:0},d.sx)}))]}),v&&(0,i.jsx)(F.Z,{defaultValues:y,items:m,onSelection:function(e){!function(e){var n=(0,E.W)(e,[!0]);o((0,E.W)(r,n)),g()}(e),n()}})]})}})},N=function(e){var n=e.onClose,t=e.onFilterChange,r=(0,I.Z)(e,["onClose","onFilterChange"]),a=function(e){var n=(0,j.v9)(R.dp),t=(0,j.I0)();return(0,h.Z)({handleStatusChange:function(n){t((0,R.CI)(n)),e()},handleActionTypeChange:function(n){t((0,R.aM)(n)),e()},handleFromChange:function(n){t((0,R.su)(null===n||void 0===n?void 0:n.target.value)),e()},handleToChange:function(n){t((0,R.Ue)(null===n||void 0===n?void 0:n.target.value)),e()},handleClearAllFilters:function(){t((0,R.Mk)()),e()}},n)}(t),o=a.handleStatusChange,l=a.handleActionTypeChange,u=a.handleFromChange,c=a.handleToChange,d=a.handleClearAllFilters,f=a.from,v=a.to,p=a.status,m=a.action_type;return(0,i.jsxs)(s.u_l,(0,x.Z)((0,h.Z)({onClose:n,size:"xl"},r),{children:[(0,i.jsx)(s.ZAr,{}),(0,i.jsxs)(s.hzk,{children:[(0,i.jsx)(s.xBx,{borderBottomWidth:1,borderBottomColor:"gray.200",children:"All Filters"}),(0,i.jsx)(s.olH,{}),(0,i.jsx)(s.fef,{py:4,sx:{"& label":{mb:0}},children:(0,i.jsxs)(s.Kqy,{gap:4,children:[(0,i.jsxs)(s.Kqy,{children:[(0,i.jsx)(s.lXp,{size:"md",id:"request-date-range-label",children:"Date range"}),(0,i.jsxs)(s.Ugi,{gap:3,children:[(0,i.jsxs)(s.BZy,{size:"sm",flex:1,children:[(0,i.jsx)(s.UiE,{as:"label",htmlFor:"from-date",borderRadius:"md",children:"From"}),(0,i.jsx)(s.IIB,{type:"date",name:"From",value:f,max:v||void 0,onChange:u,borderRadius:"md",id:"from-date","aria-describedby":"request-date-range-label"})]}),(0,i.jsxs)(s.BZy,{size:"sm",flex:1,children:[(0,i.jsx)(s.UiE,{as:"label",htmlFor:"to-date",borderRadius:"md",children:"To"}),(0,i.jsx)(s.IIB,{type:"date",borderRadius:"md",name:"To",value:v,min:f||void 0,onChange:c,id:"to-date","aria-describedby":"request-date-range-label"})]})]})]}),(0,i.jsxs)(s.Kqy,{children:[(0,i.jsx)(s.lXp,{size:"md",id:"request-status-label",children:"Status"}),(0,i.jsx)(V,{options:Z.MP,value:p,onChange:o,"aria-describedby":"request-status-label"})]}),(0,i.jsxs)(s.Kqy,{children:[(0,i.jsx)(s.lXp,{size:"md",id:"request-action-type-label",children:"Request Type"}),(0,i.jsx)(V,{options:Z.rE,value:m,onChange:l,"aria-describedby":"request-action-type-label"})]})]})}),(0,i.jsxs)(s.mzw,{justifyContent:"space-between",children:[(0,i.jsx)(s.zxk,{size:"sm",variant:"ghost",onClick:d,children:"Clear all"}),(0,i.jsx)(s.zxk,{size:"sm",colorScheme:"primary",onClick:n,children:"Done"})]})]})]}))},L=function(e){var n=(0,v.Z)({},e),t=(0,u.useState)(),a=t[0],o=t[1],l=(0,u.useState)(!1),c=l[0],d=l[1],Z=(0,j.v9)(R.dp),S=(0,j.v9)(_.rK),k=(0,s.pmc)(),I=(0,b.useRouter)(),T=(0,j.I0)(),D=(0,q.oi)(),A=D.PAGE_SIZES,F=D.pageSize,V=D.setPageSize,L=D.onPreviousPageClick,M=D.isPreviousPageDisabled,B=D.onNextPageClick,W=D.isNextPageDisabled,Y=D.startRange,G=D.endRange,K=D.pageIndex,X=D.setTotalPages,Q=D.resetPageIndexToDefault,H=(0,s.qY0)(),J=H.isOpen,$=H.onOpen,ee=H.onClose,ne=(0,R.QA)((0,x.Z)((0,h.Z)({},Z),{page:K,size:F})),te=ne.data,re=ne.isLoading,ie=ne.isFetching,ae=(0,u.useMemo)((function(){var e=te||{items:[],total:0,pages:0};return X(e.pages),e}),[te,X]),se=ae.items,oe=ae.total,le=function(){var e=(0,f.Z)((function(){var e,n;return(0,m.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,R.py)((0,x.Z)((0,h.Z)({},Z),{token:S}))];case 1:return t.sent(),[3,3];case 2:return n=t.sent(),e=(0,p.Z)(n,Error)?n.message:"Unknown error occurred",[3,3];case 3:return e&&k({description:"".concat(e),duration:5e3,status:"error"}),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ue=(0,y.b7)({getCoreRowModel:(0,g.sC)(),data:se,columns:(0,u.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[U.accessor((function(e){return e.status}),{id:r.STATUS,cell:function(e){var n=e.getValue;return(0,i.jsx)(w,{value:n()})},header:function(e){return(0,i.jsx)(q.Rr,(0,h.Z)({value:"Status"},e))}}),U.accessor((function(e){return e.days_left}),{id:r.DAYS_LEFT,cell:function(e){var n=e.row,t=e.getValue;return(0,i.jsx)(P,{daysLeft:t(),timeframe:n.original.policy.execution_timeframe,status:n.original.status})},header:function(e){return(0,i.jsx)(q.Rr,(0,h.Z)({value:"Days left"},e))}}),U.accessor((function(e){return e.policy.rules}),{id:r.REQUEST_TYPE,cell:function(e){var n=e.getValue;return(0,i.jsx)(z,{value:n()})},header:function(e){return(0,i.jsx)(q.Rr,(0,h.Z)({value:"Request type"},e))},enableSorting:!1}),U.accessor((function(e){var n,t;return(null===(n=e.identity)||void 0===n?void 0:n.email.value)||(null===(t=e.identity)||void 0===t?void 0:t.phone_number.value)||""}),{id:r.SUBJECT_IDENTITY,cell:function(n){var t=n.getValue;return(0,i.jsx)(q.G3,{value:(0,E.jK)(t(),e)})},header:function(e){return(0,i.jsx)(q.Rr,(0,h.Z)({value:"Subject identity"},e))},enableSorting:!1}),U.accessor((function(e){return e.created_at}),{id:r.TIME_RECIEVED,cell:function(e){var n=e.getValue;return(0,i.jsx)(q.G3,{value:(0,E.p6)(n())})},header:function(e){return(0,i.jsx)(q.Rr,(0,h.Z)({value:"Time received"},e))}}),U.accessor((function(e){var n;return(null===(n=e.reviewer)||void 0===n?void 0:n.username)||""}),{id:r.REVIEWER,cell:function(n){var t=n.getValue;return(0,i.jsx)(q.G3,{value:(0,E.jK)(t(),e)})},header:function(e){return(0,i.jsx)(q.Rr,(0,h.Z)({value:"Reviewed by"},e))},enableSorting:!1}),U.accessor((function(e){return e.id}),{id:r.ID,cell:function(e){var n=e.getValue;return(0,i.jsx)(q.G3,{value:n()})},header:function(e){return(0,i.jsx)(q.Rr,(0,h.Z)({value:"Request ID"},e))},enableSorting:!1}),U.display({id:r.ACTIONS,cell:function(e){var n=e.row;return(0,i.jsx)(O,{subjectRequest:n.original})},header:function(e){return(0,i.jsx)(q.Rr,(0,h.Z)({value:"Actions"},e))},meta:{disableRowClick:!0}})]}(c)}),[c]),getRowId:function(e){return"".concat(e.status,"-").concat(e.id)},manualPagination:!0});return(0,i.jsxs)(s.xuv,(0,x.Z)((0,h.Z)({},n),{children:[(0,i.jsxs)(q.Q$,{children:[(0,i.jsx)(q.HO,{globalFilter:a,setGlobalFilter:function(e){T((0,R.Nl)(e)),o(e),Q()},placeholder:"Search by request ID"}),(0,i.jsxs)(s.Ugi,{alignItems:"center",spacing:4,children:[(0,i.jsxs)(s.Ugi,{alignItems:"center",children:[(0,i.jsx)(s.lXp,{htmlFor:"reveal-pii",fontSize:"xs",m:0,children:"Reveal PII"}),(0,i.jsx)(s.rsf,{"data-testid":"pii-toggle",colorScheme:"secondary",size:"sm",isChecked:c,onChange:function(){return d(!c)},id:"reveal-pii"})]}),(0,i.jsx)(s.zxk,{"data-testid":"filter-btn",size:"xs",variant:"outline",onClick:$,children:"Filter"}),(0,i.jsx)(s.hU,{"aria-label":"Export report","data-testid":"export-btn",size:"xs",variant:"outline",icon:(0,i.jsx)(C.nM,{}),onClick:le})]}),(0,i.jsx)(s.h_i,{children:(0,i.jsx)(N,{isOpen:J,onClose:ee,onFilterChange:Q})})]}),re?(0,i.jsx)(s.xuv,{p:2,borderWidth:1,children:(0,i.jsx)(q.I4,{rowHeight:26,numRows:10})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(q.ZK,{tableInstance:ue,onRowClick:function(e){return function(e){var n="/privacy-requests/".concat(e);I.push(n)}(e.id)},onSort:function(e){if(!e)return T((0,R.p2)()),void Q();var n=e.id,t=e.desc;T((0,R.PU)(n)),T((0,R.iX)(t?"desc":"asc")),Q()}}),(0,i.jsx)(q.s8,{totalRows:oe,pageSizes:A,setPageSize:V,onPreviousPageClick:L,isPreviousPageDisabled:M||ie,onNextPageClick:B,isNextPageDisabled:W||ie,startRange:Y,endRange:G})]})]}))},M=t(17599),B=t(52050),W=t(32556),Y=t(66081),G=t(61186),K=t(34090),X=t(16310),Q=t(56071),H=function(e,n){return null===n||void 0===n?void 0:n.find((function(n){return n.policy_key===e}))},J={is_verified:!1,policy_key:"",identity:{}},$=function(e){var n=e.identityInputs;return n?(0,i.jsxs)(i.Fragment,{children:[n.email?(0,i.jsx)(Q.j0,{name:"identity.email",label:"User email address",isRequired:n.email===S.R9.email.REQUIRED,variant:"stacked"}):null,n.phone?(0,i.jsx)(Q.j0,{name:"identity.phone_number",label:"User phone number",isRequired:n.phone===S.R9.phone.REQUIRED,variant:"stacked"}):null]}):null},ee=function(e){var n=e.customFieldInputs;if(!n)return null;var t=Object.entries(n);return(0,i.jsx)(i.Fragment,{children:t.map((function(e){var n=(0,B.Z)(e,2),t=n[0],r=n[1];return(0,i.jsx)(Q.j0,{name:"custom_privacy_request_fields.".concat(t,".value"),label:r.label,isRequired:r.required,variant:"stacked"},t)}))})},ne=function(e){var n=e.onSubmit,t=e.onCancel,r=(0,R.xv)().data;return(0,i.jsx)(K.J9,{initialValues:J,onSubmit:n,validationSchema:function(){return(0,X.Vo)((function(e){return function(e){var n,t;if(!e)return X.Ry().shape({policy_key:X.Z_().required().label("Request type")});var r=e.custom_privacy_request_fields?Object.entries(e.custom_privacy_request_fields).map((function(e){var n=(0,B.Z)(e,2),t=n[0],r=n[1];return(0,M.Z)({},t,X.Ry().shape({value:r.required&&!r.hidden?X.Z_().required().label(r.label):X.Z_().nullable()}))})).reduce((function(e,n){return(0,h.Z)({},e,n)}),{}):{};return X.Ry().shape({policy_key:X.Z_().required().label("Request type"),identity:X.Ry().shape({email:"required"===(null===(n=e.identity_inputs)||void 0===n?void 0:n.email)?X.Z_().email().required().label("Email address"):X.Z_().nullable(),phone_number:"required"===(null===(t=e.identity_inputs)||void 0===t?void 0:t.phone)?X.Z_().matches(/^\+?[1-9]\d{1,14}$/,"Phone number must be formatted correctly (e.g. 15555555555)").required().label("Phone number"):X.Z_().matches(/^\+?[1-9]\d{1,14}$/,"Phone number must be formatted correctly (e.g. 15555555555)").nullable()}),custom_privacy_request_fields:X.Ry().shape(r)})}(H(e.policy_key,null===r||void 0===r?void 0:r.actions))}))},children:function(e){var n,a=e.values,o=e.dirty,l=e.isValid,u=e.isSubmitting,c=e.setFieldValue,d=H(a.policy_key,null===r||void 0===r?void 0:r.actions);return(0,i.jsx)(K.l0,{children:(0,i.jsxs)(s.Kqy,{spacing:6,mb:2,children:[(0,i.jsx)(Q.AP,{name:"policy_key",label:"Request type",options:null!==(n=null===r||void 0===r?void 0:r.actions.map((function(e){return{label:e.title,value:e.policy_key}})))&&void 0!==n?n:[],onChange:function(e){return function(e){var n=H(e.value,null===r||void 0===r?void 0:r.actions);if(null===n||void 0===n?void 0:n.custom_privacy_request_fields){var t=Object.entries(n.custom_privacy_request_fields).map((function(e){var n=(0,B.Z)(e,2),t=n[0],r=n[1];return(0,M.Z)({},t,{label:r.label,value:r.default_value})})).reduce((function(e,n){return(0,h.Z)({},e,n)}),{});c("custom_privacy_request_fields",t)}else c("custom_privacy_request_fields",void 0)}(e)},variant:"stacked",isRequired:!0}),(0,i.jsx)($,{identityInputs:null===d||void 0===d?void 0:d.identity_inputs}),(0,i.jsx)(ee,{customFieldInputs:null===d||void 0===d?void 0:d.custom_privacy_request_fields}),(0,i.jsx)(Q.Xl,{name:"is_verified",label:"I confirm that I have verified this user information"}),(0,i.jsxs)(s.hE2,{alignSelf:"end",spacing:0,children:[(0,i.jsx)(s.zxk,{variant:"outline",size:"sm",onClick:t,mr:4,children:"Cancel"}),(0,i.jsx)(s.zxk,{type:"submit",colorScheme:"primary",size:"sm",isDisabled:!a.is_verified||!o||!l,isLoading:u,"data-testid":"submit-btn",children:"Create"})]})]})})}})},te=t(34038),re=function(e){var n=e.isOpen,t=e.onClose,r=(0,B.Z)((0,R.M6)(),1)[0],a=(0,s.pmc)(),o=function(){var e=(0,f.Z)((function(e){var n,i,s,o;return(0,m.__generator)(this,(function(l){switch(l.label){case 0:return e.is_verified,n=(0,I.Z)(e,["is_verified"]),i=n.custom_privacy_request_fields?Object.entries(n.custom_privacy_request_fields).map((function(e){var n=(0,B.Z)(e,2),t=n[0],r=n[1];return r.value?(0,M.Z)({},t,r):{}})).reduce((function(e,n){return(0,h.Z)({},e,n)}),{}):void 0,s=(0,x.Z)((0,h.Z)({},n),{custom_privacy_request_fields:i}),[4,r([s])];case 1:return o=l.sent(),(0,te.D4)(o)?a((0,G.Vo)((0,W.e$)(o.error,"An error occurred while creating this privacy request. Please try again"))):a((0,G.t5)("Privacy request created")),t(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,i.jsxs)(s.u_l,{isOpen:n,onClose:t,size:"2xl",isCentered:!0,children:[(0,i.jsx)(s.ZAr,{}),(0,i.jsxs)(s.hzk,{"data-testid":"submit-request-modal",maxHeight:"80%",overflowY:"auto",children:[(0,i.jsx)(s.xBx,{children:"Create privacy request"}),(0,i.jsx)(s.fef,{children:(0,i.jsxs)(s.Kqy,{spacing:4,children:[(0,i.jsx)(Y.Z,{title:"Warning: You are bypassing identity verification",text:"You are bypassing Fides' built-in identity verification step. Please ensure that you are only entering information on behalf of a verified and approved user's privacy request."}),(0,i.jsx)(ne,{onSubmit:o,onCancel:function(){return t()}})]})})]})]})},ie=function(){var e=(0,s.qY0)(),n=e.onOpen,t=e.isOpen,r=e.onClose;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(re,{isOpen:t,onClose:r}),(0,i.jsx)(s.zxk,{colorScheme:"primary",size:"xs",onClick:n,"data-testid":"submit-request-btn",children:"Create request"})]})},ae=t(23027),se=l()((function(){return t.e(7340).then(t.bind(t,97340))}),{loadableGenerated:{webpack:function(){return[97340]}},loading:function(){return(0,i.jsx)("div",{children:"Loading..."})}}),oe=function(){var e=function(){var e=(0,ae.VY)().errorAlert,n=(0,u.useState)(!1),t=n[0],r=n[1],a=(0,u.useState)({count:0,total:0}),o=a[0],l=a[1],c=(0,u.useState)(!0),d=c[0],f=c[1],v=S.q2.ERROR,p=(0,R.tE)().data,h=(0,R.QA)({status:[v]},{pollingInterval:15e3,skip:d}).data;return(0,u.useEffect)((function(){f(!(p&&p.notify_after_failures>0))}),[p]),(0,u.useEffect)((function(){var e=(null===h||void 0===h?void 0:h.total)||0;e>=((null===p||void 0===p?void 0:p.notify_after_failures)||0)&&e>o.total?(l({count:e-o.total,total:e}),r(!0)):r(!1)}),[null===h||void 0===h?void 0:h.total,null===p||void 0===p?void 0:p.notify_after_failures,o.total]),{processing:function(){t&&e((0,i.jsxs)(s.xuv,{children:["DSR automation has failed for"," ",(0,i.jsx)(s.xvT,{as:"span",fontWeight:"semibold",children:o.count})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null,id:"dsrErrorAlert"})}}}().processing,n=(0,c.hz)().plus;return(0,u.useEffect)((function(){e()}),[e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.kCb,{"data-testid":"privacy-requests",gap:4,children:[(0,i.jsx)(s.X6q,{mb:8,fontSize:"2xl",fontWeight:"semibold",children:"Privacy Requests"}),(0,i.jsx)(s.LZC,{}),n&&(0,i.jsx)(d.ZP,{scopes:[S.Sh.PRIVACY_REQUEST_CREATE],children:(0,i.jsx)(ie,{})}),(0,i.jsx)(se,{})]}),(0,i.jsx)(L,{})]})},le=function(){return(0,i.jsx)(a.Z,{title:"Privacy Requests",mainProps:{px:10},children:(0,i.jsx)(oe,{})})}},34038:function(e,n,t){"use strict";t.d(n,{Bw:function(){return r.Bw},D4:function(){return r.D4}});var r=t(32764)},29906:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(13210).Z;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){var t=s.default,a=(null==n?void 0:n.suspense)?{}:{loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};r(e,Promise)?a.loader=function(){return e}:"function"===typeof e?a.loader=e:"object"===typeof e&&(a=i({},a,e));!1;(a=i({},a,n)).suspense&&(delete a.ssr,delete a.loading);a.loadableGenerated&&delete(a=i({},a,a.loadableGenerated)).loadableGenerated;if("boolean"===typeof a.ssr&&!a.suspense){if(!a.ssr)return delete a.ssr,o(t,a);delete a.ssr}return t(a)},n.noSSR=o;var i=t(76516).Z,a=t(42619).Z,s=(a(t(27378)),a(t(62456)));function o(e,n){return delete n.webpack,delete n.modules,e(n)}("function"===typeof n.default||"object"===typeof n.default&&null!==n.default)&&"undefined"===typeof n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),e.exports=n.default)},37815:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LoadableContext=void 0;var r=(0,t(42619).Z)(t(27378)).default.createContext(null);n.LoadableContext=r},62456:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(30093).Z,i=t(27758).Z;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t(76516).Z,s=(0,t(42619).Z)(t(27378)),o=t(37815),l=t(27378).useSyncExternalStore,u=[],c=[],d=!1;function f(e){var n=e(),t={loading:!0,loaded:null,error:null};return t.promise=n.then((function(e){return t.loading=!1,t.loaded=e,e})).catch((function(e){throw t.loading=!1,t.error=e,e})),t}var v=function(){function e(n,t){r(this,e),this._loadFn=n,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return i(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var n=this._res,t=this._opts;n.loading&&("number"===typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),t.delay)),"number"===typeof t.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),t.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(n){e._update({}),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=a({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var n=this;return this._callbacks.add(e),function(){n._callbacks.delete(e)}}}]),e}();function p(e){return function(e,n){var t=function(){if(!u){var n=new v(e,i);u={getCurrentValue:n.getCurrentValue.bind(n),subscribe:n.subscribe.bind(n),retry:n.retry.bind(n),promise:n.promise.bind(n)}}return u.promise()},r=function(){t();var e=s.default.useContext(o.LoadableContext);e&&Array.isArray(i.modules)&&i.modules.forEach((function(n){e(n)}))},i=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},n);i.suspense&&(i.lazy=s.default.lazy(i.loader));var u=null;if(!d){var f=i.webpack?i.webpack():i.modules;f&&c.push((function(e){var n=!0,r=!1,i=void 0;try{for(var a,s=f[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if(-1!==e.indexOf(o))return t()}}catch(l){r=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}))}var p=i.suspense?function(e,n){return r(),s.default.createElement(i.lazy,a({},e,{ref:n}))}:function(e,n){r();var t=l(u.subscribe,u.getCurrentValue,u.getCurrentValue);return s.default.useImperativeHandle(n,(function(){return{retry:u.retry}}),[]),s.default.useMemo((function(){return t.loading||t.error?s.default.createElement(i.loading,{isLoading:t.loading,pastDelay:t.pastDelay,timedOut:t.timedOut,error:t.error,retry:u.retry}):t.loaded?s.default.createElement((n=t.loaded)&&n.__esModule?n.default:n,e):null;var n}),[e,t])};return p.preload=function(){return t()},p.displayName="LoadableComponent",s.default.forwardRef(p)}(f,e)}function h(e,n){for(var t=[];e.length;){var r=e.pop();t.push(r(n))}return Promise.all(t).then((function(){if(e.length)return h(e,n)}))}p.preloadAll=function(){return new Promise((function(e,n){h(u).then(e,n)}))},p.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(n){var t=function(){return d=!0,n()};h(c,e).then(t,t)}))},window.__NEXT_PRELOADREADY=p.preloadReady;var x=p;n.default=x},65218:function(e,n,t){e.exports=t(29906)}},function(e){e.O(0,[3667,3659,9774,2888,179],(function(){return n=1565,e(e.s=n);var n}));var n=e.O();_N_E=n}]);