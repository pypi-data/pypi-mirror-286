(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{7873:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-management",function(){return i(13714)}])},13714:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return w}});var s=i(24246),t=i(83265),r=i(27378),d=i(85034),a=i(70169),l=i(45007),o=i(10503),c=i(57256),h=i(31716),u=i(86677),x=i(86496),p=i(93677),g=i(33745),f=i(92942),j=i(10439),m=i(46537),v=function(e){var n,i,r=e.user,a=(0,u.useRouter)(),l=(0,t.qY0)(),v=(0,o.C)(x.dy),b=!!v&&v.id===r.id,T=(0,g.Tg)([j.Sh.USER_UPDATE])||b,C=function(){T&&a.push("".concat(p.e3,"/profile/").concat(r.id))},_=(0,c.gU)(null!==(n=r.id)&&void 0!==n?n:"",{skip:!r.id}).data,k=(0,c.d6)(null!==(i=r.id)&&void 0!==i?i:"",{skip:!r.id}).data,y=[];return _&&_.roles&&_.roles.forEach((function(e){var n=f.K.find((function(n){return n.roleKey===e}));n&&y.push(n.permissions_label)})),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.Tr,{_hover:{bg:"gray.50",cursor:T?"pointer":void 0},height:"36px","data-testid":"row-".concat(r.id),children:[(0,s.jsxs)(t.Td,{pl:0,py:1,onClick:C,children:[r.username," ",r.disabled&&(0,s.jsx)(t.Cts,{bg:"green.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"invite-sent-badge",children:"Invite sent"})]}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:C,children:r.email_address}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:C,children:r.first_name}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:C,children:r.last_name}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:C,children:y.map((function(e){return(0,s.jsx)(t.Cts,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-permissions-badge",children:e},e)}))}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:C,children:(0,s.jsx)(t.Cts,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-systems-badge",children:k?k.length:0})}),(0,s.jsx)(t.Td,{pl:0,py:1,onClick:C,children:r.created_at?new Date(r.created_at).toUTCString():null}),(0,s.jsx)(g.ZP,{scopes:[j.Sh.USER_DELETE],children:(0,s.jsx)(t.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:(0,s.jsx)(t.hE2,{children:(0,s.jsx)(t.hU,{"aria-label":"delete",icon:(0,s.jsx)(h.l,{}),variant:"outline",size:"sm",onClick:l.onOpen,"data-testid":"delete-user-btn"})})})})]},r.id),(0,s.jsx)(m.Z,(0,d.Z)({user:r},l))]})},b=function(){var e=function(){var e=(0,l.I0)(),n=(0,l.v9)(c.lq),i=(0,c.wv)(n),s=i.data,t=i.isLoading,r=s||{users:[],total:0},o=r.items,h=r.total;return(0,a.Z)((0,d.Z)({},n),{isLoading:t,users:o,total:h,handleNextPage:function(){e((0,c.YA)(n.page+1))},handlePreviousPage:function(){e((0,c.YA)(n.page-1))}})}(),n=e.users,i=e.total,h=e.page,u=e.size,x=e.handleNextPage,p=e.handlePreviousPage,g=(h-1)*u+1,f=Math.min(i,h*u),j=(0,o.T)();return(0,r.useEffect)((function(){j((0,c.Vv)(void 0))}),[j]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.iA_,{size:"sm","data-testid":"user-management-table",children:[(0,s.jsx)(t.hrZ,{children:(0,s.jsxs)(t.Tr,{children:[(0,s.jsx)(t.Th,{pl:0,children:"Username"}),(0,s.jsx)(t.Th,{pl:0,children:"Email"}),(0,s.jsx)(t.Th,{pl:0,children:"First Name"}),(0,s.jsx)(t.Th,{pl:0,children:"Last Name"}),(0,s.jsx)(t.Th,{pl:0,children:"Permissions"}),(0,s.jsx)(t.Th,{pl:0,children:"Assigned Systems"}),(0,s.jsx)(t.Th,{pl:0,children:"Created At"})]})}),(0,s.jsx)(t.p3B,{children:null===n||void 0===n?void 0:n.map((function(e){return(0,s.jsx)(v,{user:e},e.id)}))})]}),(0,s.jsxs)(t.kCb,{justifyContent:"space-between",mt:6,children:[(0,s.jsx)(t.xvT,{fontSize:"xs",color:"gray.600",children:i>0?(0,s.jsxs)(s.Fragment,{children:["Showing ",Number.isNaN(g)?0:g," to"," ",Number.isNaN(f)?0:f," of"," ",Number.isNaN(i)?0:i," results"]}):"0 results"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(t.zxk,{isDisabled:h<=1,onClick:p,mr:2,size:"sm",children:"Previous"}),(0,s.jsx)(t.zxk,{isDisabled:h*u>=i,onClick:x,size:"sm",children:"Next"})]})]})]})};b.defaultProps={users:[]};var T=b,C=i(79894),_=i.n(C),k=i(47346),y=function(){var e=function(){var e=(0,l.v9)(c.lq),n=(0,l.I0)();return(0,d.Z)({handleSearchChange:function(e){n((0,c.SY)(e))}},e)}(),n=e.handleSearchChange,i=e.username;return(0,s.jsxs)(t.Kqy,{direction:"row",spacing:4,mb:6,children:[(0,s.jsx)(k.Z,{search:i,onChange:n,placeholder:"Search by Username"}),(0,s.jsx)(g.ZP,{scopes:[j.Sh.USER_CREATE],children:(0,s.jsx)(_(),{href:"".concat(p.e3,"/new"),passHref:!0,children:(0,s.jsx)(t.zxk,{colorScheme:"primary",flexShrink:0,size:"sm","data-testid":"add-new-user-btn",children:"Add New User"})})})]})},N=i(1496),w=function(){return(0,s.jsxs)(N.Z,{title:"User Management",children:[(0,s.jsx)(t.X6q,{fontSize:"2xl",fontWeight:"semibold",mb:4,children:"User Management"}),(0,s.jsx)(y,{}),(0,s.jsx)(T,{})]})}}},function(e){e.O(0,[686,9774,2888,179],(function(){return n=7873,e(e.s=n);var n}));var n=e.O();_N_E=n}]);