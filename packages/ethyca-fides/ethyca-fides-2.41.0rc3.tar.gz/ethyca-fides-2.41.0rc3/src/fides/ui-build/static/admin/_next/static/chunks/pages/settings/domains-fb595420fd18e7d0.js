(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9252],{98648:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/domains",function(){return r(72430)}])},51191:function(n,t,r){"use strict";var e=r(85034),i=r(24246),s=r(83265);t.Z=function(n){return(0,i.jsx)(s.rUS,(0,e.Z)({isExternal:!0,color:"complimentary.500"},n))}},1496:function(n,t,r){"use strict";r.d(t,{Z:function(){return h}});var e=r(85034),i=r(70169),s=r(24246),o=r(83265),a=r(88038),c=r.n(a),u=r(86677),d=(r(27378),r(67447)),l=r(63076),f=r(93677),m=function(){var n=(0,u.useRouter)();return(0,s.jsx)(o.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,s.jsxs)(o.xuv,{children:[(0,s.jsxs)(o.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,s.jsx)(o.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,s.jsx)(o.zxk,{size:"sm",variant:"outline",onClick:function(){n.push(f.fz)},children:"Configure"})]}),(0,s.jsxs)(o.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},h=function(n){var t=n.children,r=n.title,a=n.padded,f=void 0===a||a,h=n.mainProps,g=(0,d.hz)(),x=(0,u.useRouter)(),p="/privacy-requests"===x.pathname||"/datastore-connection"===x.pathname,v=!(g.flags.privacyRequestsConfiguration&&p),j=(0,l.JE)(void 0,{skip:v}).data,b=(0,l.PW)(void 0,{skip:v}).data,y=g.flags.privacyRequestsConfiguration&&(!j||!b)&&p;return(0,s.jsxs)(o.kCb,{"data-testid":r,direction:"column",h:"100vh",children:[(0,s.jsxs)(c(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",r]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)(o.kCb,(0,i.Z)((0,e.Z)({as:"main",direction:"column",py:f?6:0,px:f?10:0,h:f?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},h),{children:[y?(0,s.jsx)(m,{}):null,t]}))]})}},61787:function(n,t,r){"use strict";var e=r(85034),i=r(70169),s=r(31373),o=r(24246),a=r(83265),c=r(12934);t.Z=function(n){var t=n.title,r=n.tooltip,u=n.children,d=(0,s.Z)(n,["title","tooltip","children"]);return(0,o.jsxs)(a.xuv,(0,i.Z)((0,e.Z)({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},d),{children:[(0,o.jsxs)(a.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,r?(0,o.jsx)(a.xvT,{as:"span",mx:1,children:(0,o.jsx)(c.Z,{label:r})}):void 0]}),(0,o.jsx)(a.Kqy,{p:6,spacing:6,children:u})]}))}},32556:function(n,t,r){"use strict";r.d(t,{D4:function(){return i.D4},MM:function(){return m},Ot:function(){return c},c6:function(){return d},cj:function(){return g},e$:function(){return o},fn:function(){return a},iC:function(){return h},nU:function(){return f},tB:function(){return u}});var e=r(17599),i=r(32764),s="An unexpected error occurred. Please try again.",o=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if((0,i.Bw)(n)){if((0,i.hE)(n.data))return n.data.detail;if((0,i.cz)(n.data)){var r,e=null===(r=n.data.detail)||void 0===r?void 0:r[0];return"".concat(null===e||void 0===e?void 0:e.msg,": ").concat(null===e||void 0===e?void 0:e.loc)}if(409===n.status&&(0,i.Dy)(n.data))return"".concat(n.data.detail.error," (").concat(n.data.detail.fides_key,")");if(404===n.status&&(0,i.XD)(n.data))return"".concat(n.data.detail.error," (").concat(n.data.detail.fides_key,")")}return t};function a(n){return"object"===typeof n&&null!=n&&"status"in n}function c(n){return"object"===typeof n&&null!=n&&"data"in n&&"string"===typeof n.data.detail}function u(n){return"object"===typeof n&&null!=n&&"data"in n&&Array.isArray(n.data.detail)}var d,l,f=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:s};if((0,i.oK)(n))return{status:n.originalStatus,message:n.data};if((0,i.Bw)(n)){var r=n.status;return{status:r,message:o(n,t.message)}}return t},m=function(n){return Object.entries(n).map((function(n){return{value:n[1],label:n[1]}}))};!function(n){n.GVL="gvl",n.AC="gacp",n.COMPASS="compass"}(d||(d={}));var h=(l={},(0,e.Z)(l,d.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,e.Z)(l,d.AC,{label:"AC",fullName:"Google Additional Consent List"}),(0,e.Z)(l,d.COMPASS,{label:"",fullName:""}),l),g=function(n){var t=n.split(".")[0];return t===d.AC?d.AC:t===d.GVL?d.GVL:d.COMPASS}},61186:function(n,t,r){"use strict";r.d(t,{MA:function(){return c},Vo:function(){return d},t5:function(){return u}});var e=r(85034),i=r(24246),s=r(83265),o=function(n){var t=n.children;return(0,i.jsxs)(s.xvT,{"data-testid":"toast-success-msg",children:[(0,i.jsx)("strong",{children:"Success:"})," ",t]})},a=function(n){var t=n.children;return(0,i.jsxs)(s.xvT,{"data-testid":"toast-error-msg",children:[(0,i.jsx)("strong",{children:"Error:"})," ",t]})},c={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},u=function(n){var t=(0,i.jsx)(o,{children:n});return(0,e.Z)({},c,{description:t})},d=function(n){var t=(0,i.jsx)(a,{children:n});return(0,e.Z)({},c,{description:t,status:"error"})}},72430:function(n,t,r){"use strict";r.r(t);var e=r(23842),i=r(85034),s=r(70169),o=r(52050),a=r(85556),c=r(24246),u=r(83265),d=r(34090),l=r(16310),f=r(10503),m=r(51191),h=r(61787),g=r(56071),x=r(32556),p=r(1496),v=r(61186),j=r(63076);t.default=function(){var n,t=(0,j.tB)({api_set:!0}).isLoading,r=(0,j.tB)({api_set:!1}).isLoading,b=(0,f.C)(j.ak),y=b.apiSet,_=b.configSet,C=!(!(null===(n=_.cors_origins)||void 0===n?void 0:n.length)&&!_.cors_origin_regex),w=(0,f.C)((0,j.U7)()),k=(0,o.Z)((0,j.km)(),2),A=k[0],Z=k[1].isLoading,L=(0,u.pmc)(),S=l.Ry().shape({cors_origins:l.IX().nullable().of(l.Z_().required().trim().test("is-valid-url",(function(n){var t=n.label;return"".concat(t," must be a valid URL (e.g. https://example.com)")}),(function(n){return function(n){if(!n||!n.startsWith("https://")&&!n.startsWith("http://"))return!1;try{new URL(n)}catch(t){return!1}return!0}(n)})).test("has-no-wildcard",(function(n){var t=n.label;return"".concat(t," cannot contain a wildcard (e.g. https://*.example.com)")}),(function(n){return function(n){return!!n&&!n.includes("*")}(n)})).test("has-no-path",(function(n){var t=n.label;return"".concat(t," cannot contain a path (e.g. https://example.com/path)")}),(function(n){return function(n){if(!n)return!1;try{return"/"===new URL(n).pathname&&!n.endsWith("/")}catch(t){return!1}}(n)})).label("Domain"))}),z=function(){var n=(0,e.Z)((function(n,t){var r,e,o,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return r=function(r){if(L.closeAll(),(0,x.D4)(r)){var e=(0,x.e$)(r.error,"An unexpected error occurred while saving domains. Please try again.");L((0,v.Vo)(e))}else L((0,v.t5)("Domains saved successfully")),t.resetForm({values:n})},e=n.cors_origins&&n.cors_origins.length>0?n.cors_origins:void 0,o=(0,s.Z)((0,i.Z)({},w),{security:{cors_origins:e}}),[4,A(o)];case 1:return c=a.sent(),r(c),[2]}}))}));return function(t,r){return n.apply(this,arguments)}}();return(0,c.jsx)(p.Z,{title:"Domains",children:(0,c.jsxs)(u.xuv,{"data-testid":"management-domains",children:[(0,c.jsx)(u.X6q,{marginBottom:4,fontSize:"2xl",children:"Domains"}),(0,c.jsx)(u.xuv,{maxWidth:"600px",children:(0,c.jsxs)(u.xvT,{marginBottom:3,fontSize:"sm",children:["For Fides to work on your website(s), each of your domains must be listed below. You can add and remove domains at any time up to the quantity included in your license. For more information on managing domains"," ",(0,c.jsx)(m.Z,{href:"https://fid.es/domain-configuration",children:"read here"}),"."]})}),(0,c.jsx)(u.xuv,{maxW:"600px",paddingY:3,children:(0,c.jsx)(h.Z,{"data-testid":"api-set-domains-form",title:"Organization domains",tooltip:"Fides uses these domains to enforce cross-origin resource sharing (CORS), a browser-based security standard. Each domain must be a valid URL (e.g. https://example.com) without any wildcards '*' or paths '/blog'",children:t||Z?(0,c.jsx)(u.kCb,{justifyContent:"center",children:(0,c.jsx)(u.$jN,{})}):(0,c.jsx)(d.J9,{initialValues:y,enableReinitialize:!0,onSubmit:z,validationSchema:S,validateOnChange:!0,children:function(n){var t=n.dirty,r=n.values,e=n.isValid;return(0,c.jsxs)(d.l0,{children:[(0,c.jsx)(d.F2,{name:"cors_origins",render:function(n){return(0,c.jsxs)(u.kCb,{flexDir:"column",children:[r.cors_origins.map((function(t,r){return(0,c.jsxs)(u.kCb,{flexDir:"row",my:3,children:[(0,c.jsx)(g.j0,{variant:"stacked",name:"cors_origins[".concat(r,"]"),placeholder:"https://subdomain.example.com:9090"}),(0,c.jsx)(u.hU,{ml:8,"aria-label":"delete-domain",variant:"outline",zIndex:2,size:"sm",onClick:function(){n.remove(r)},children:(0,c.jsx)(u.pJl,{})})]},r)})),(0,c.jsx)(u.kCb,{justifyContent:"center",mt:3,children:(0,c.jsx)(u.zxk,{"aria-label":"add-domain",width:"100%",variant:"outline",size:"sm",onClick:function(){n.push("")},children:"Add domain"})})]})}}),(0,c.jsx)(u.xuv,{mt:6,children:(0,c.jsx)(u.zxk,{type:"submit",variant:"primary",size:"sm",isDisabled:Z||!t||!e,isLoading:Z,"data-testid":"save-btn",children:"Save"})})]})}})})}),(0,c.jsx)(u.xuv,{maxW:"600px",marginY:3,children:(0,c.jsx)(h.Z,{"data-testid":"config-set-domains-form",title:"Advanced settings",tooltip:"These domains are configured by an administrator with access to Fides security settings and can support more advanced options such as wildcards and regex.",children:r?(0,c.jsx)(u.kCb,{justifyContent:"center",children:(0,c.jsx)(u.$jN,{})}):(0,c.jsxs)(u.kCb,{flexDir:"column",children:[_.cors_origins.map((function(n,t){return(0,c.jsx)(g.oi,{"data-testid":"input-config_cors_origins[".concat(t,"]"),marginY:3,value:n,isDisabled:!0,isPassword:!1},t)})),_.cors_origin_regex?(0,c.jsx)(g.oi,{"data-testid":"input-config_cors_origin_regex",marginY:3,value:_.cors_origin_regex,isDisabled:!0,isPassword:!1},"cors_origin_regex"):void 0,C?void 0:(0,c.jsx)(u.xvT,{fontSize:"xs",color:"gray.500",children:"No advanced domain settings configured."})]})})})]})})}},32764:function(n,t,r){"use strict";r.d(t,{Bw:function(){return o},D4:function(){return i},Dy:function(){return c},XD:function(){return u},cz:function(){return d},hE:function(){return a},oK:function(){return s}});var e=r(76649),i=function(n){return"error"in n},s=function(n){return(0,e.Ln)({status:"string"},n)&&"PARSING_ERROR"===n.status},o=function(n){return(0,e.Ln)({status:"number",data:{}},n)},a=function(n){return(0,e.Ln)({detail:"string"},n)},c=function(n){return(0,e.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},n)},u=function(n){return(0,e.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},n)},d=function(n){return(0,e.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},n)}},76649:function(n,t,r){"use strict";r.d(t,{Ln:function(){return e},uX:function(){return o}});const e=(n,t)=>s(n,t),i=Symbol("SOME"),s=(n,t)=>{if("string"==typeof n)return n===typeof t;if(Array.isArray(n))return i in n?n.some((n=>s(n,t))):!!Array.isArray(t)&&(0===n.length||t.every((t=>n.some((n=>s(n,t))))));if("object"!=typeof t||null===t)return!1;const r=t;return Object.entries(n).every((([n,t])=>s(t,r[n])))},o=n=>t=>e(n,t);class a{static narrow(n){return new a((t=>e(n,t)))}constructor(n){this.NF=void 0,this.NF=n}satisfied(n){return this.NF(n)}build(n){return n}and(n){const t=this.NF,r=n instanceof a?n.NF:n instanceof Function?n:t=>e(n,t);return new a((n=>t(n)&&r(n)))}}new a((n=>!0))}},function(n){n.O(0,[9774,2888,179],(function(){return t=98648,n(n.s=t);var t}));var t=n.O();_N_E=t}]);