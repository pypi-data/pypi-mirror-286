"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1209],{83834:function(e,s,n){n.d(s,{q:function(){return l}});var i=n(85034),t=n(70169),r=n(31373),a=n(24246),o=n(83265),l=function(e){var s=e.label,n=e.isDisabled,i=(0,r.Z)(e,["label","isDisabled"]);return(0,a.jsx)(o.OK9,{"data-testid":"tab-".concat(s),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:i.fontSize,fontWeight:"500",color:"gray.500",isDisabled:n||!1,children:s})};s.Z=function(e){var s=e.data,n=e.border,d=void 0===n?"partial":n,c=(0,r.Z)(e,["data","border"]);return(0,a.jsxs)(o.mQc,(0,t.Z)((0,i.Z)({colorScheme:"complimentary"},c),{children:[(0,a.jsx)(o.tdY,{width:"partial"===d?"max-content":void 0,children:s.map((function(e){return(0,a.jsx)(l,{label:e.label,isDisabled:e.isDisabled,fontSize:c.fontSize},e.label)}))}),(0,a.jsx)(o.nPR,{children:s.map((function(e){return(0,a.jsx)(o.x45,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},e.label)}))})]}))}},49730:function(e,s,n){var i=n(85034),t=n(70169),r=n(24246),a=n(83265);s.Z=function(e){var s=e.isOpen,n=e.onClose,o=e.onConfirm,l=e.onCancel,d=e.title,c=e.message,u=e.cancelButtonText,h=e.cancelButtonThemingProps,x=e.continueButtonText,m=e.continueButtonThemingProps,f=e.isLoading,p=e.returnFocusOnClose,g=e.isCentered,j=e.testId,b=void 0===j?"confirmation-modal":j,v=e.icon;return(0,r.jsxs)(a.u_l,{isOpen:s,onClose:n,size:"lg",returnFocusOnClose:null===p||void 0===p||p,isCentered:g,children:[(0,r.jsx)(a.ZAr,{}),(0,r.jsxs)(a.hzk,{textAlign:"center",p:6,"data-testid":b,children:[v?(0,r.jsx)(a.M5Y,{mb:2,children:v}):null,d?(0,r.jsx)(a.xBx,{fontWeight:"medium",pb:0,children:d}):null,c?(0,r.jsx)(a.fef,{children:c}):null,(0,r.jsx)(a.mzw,{children:(0,r.jsxs)(a.MIq,{columns:2,width:"100%",children:[(0,r.jsx)(a.zxk,(0,t.Z)((0,i.Z)({variant:"outline",mr:3,onClick:function(){l&&l(),n()},"data-testid":"cancel-btn",isDisabled:f},h),{children:u||"Cancel"})),(0,r.jsx)(a.zxk,(0,t.Z)((0,i.Z)({colorScheme:"primary",onClick:o,"data-testid":"continue-btn",isLoading:f},m),{children:x||"Continue"}))]})})]})]})}},22850:function(e,s,n){n.d(s,{R:function(){return c}});var i=n(85034),t=n(70169),r=n(31373),a=n(24246),o=n(83265),l=n(79894),d=n.n(l),c=function(e){var s=e.onClick,n=(0,r.Z)(e,["onClick"]);return(0,a.jsxs)(o.kCb,(0,t.Z)((0,i.Z)({alignItems:"center",mt:-4,mb:3,onClick:s,cursor:"pointer"},n),{children:[(0,a.jsx)(o.hU,{"aria-label":"Back",icon:(0,a.jsx)(o.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,a.jsx)(o.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]}))};s.Z=function(e){var s=e.backPath,n=(0,r.Z)(e,["backPath"]);return(0,a.jsxs)(o.kCb,(0,t.Z)((0,i.Z)({alignItems:"center",mb:6},n),{children:[(0,a.jsx)(d(),{href:s,passHref:!0,children:(0,a.jsx)(o.hU,{"aria-label":"Back",icon:(0,a.jsx)(o.Rpv,{}),mr:2,size:"xs",variant:"outline"})}),(0,a.jsx)(d(),{href:s,passHref:!0,children:(0,a.jsx)(o.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},61793:function(e,s,n){var i=n(24246),t=n(83265),r=(n(27378),n(1496)),a=n(22850),o=n(93677);s.Z=function(e){var s=e.children;return(0,i.jsxs)(r.Z,{title:"User Management",children:[(0,i.jsx)(a.Z,{backPath:o.e3}),(0,i.jsx)(t.X6q,{fontSize:"2xl",fontWeight:"semibold",children:"User Management"}),s]})}},90772:function(e,s,n){n.d(s,{Z:function(){return Q}});var i=n(85034),t=n(31373),r=n(24246),a=n(83265),o=n(92942),l=function(){return(0,r.jsxs)(a.xuv,{children:[(0,r.jsx)(a.xuv,{pb:4,fontSize:"18px",fontWeight:"semibold",children:"Role Description"}),(0,r.jsx)(a.gCW,{spacing:4,children:o.K.map((function(e){return(0,r.jsxs)(a.xuv,{width:"100%",padding:4,borderRadius:"md",backgroundColor:"blue.50",fontSize:"14px",children:[(0,r.jsx)(a.xuv,{fontWeight:"semibold",children:e.label}),(0,r.jsx)(a.xuv,{color:"gray.500",children:e.description})]},e.roleKey)}))})]})},d=n(10503),c=n(83834),u=n(10439),h=n(33745),x=n(23842),m=n(52050),f=n(85556),p=n(34090),g=n(79894),j=n.n(g),b=n(27378),v=n(32556),y=n(49730),w=n(93677),C=n(12934),k=n(61186),S=n(47346),_=n(12062),z=n(3204),Z=n(31716),P=n(57256),R=function(e){var s=e.assignedSystems,n=e.onAssignedSystemChange,i=(0,d.C)(P.Ux);if((0,P.d6)(i,{skip:!i}),0===s.length)return null;return(0,r.jsxs)(a.iA_,{size:"sm","data-testid":"assign-systems-delete-table",children:[(0,r.jsx)(a.hrZ,{children:(0,r.jsxs)(a.Tr,{children:[(0,r.jsx)(a.Th,{children:"System"}),(0,r.jsx)(a.Th,{})]})}),(0,r.jsx)(a.p3B,{children:s.map((function(e){return(0,r.jsxs)(a.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,r.jsx)(a.Td,{children:e.name}),(0,r.jsx)(a.Td,{textAlign:"end",children:(0,r.jsx)(a.hU,{background:"gray.50","aria-label":"Unassign system from user",icon:(0,r.jsx)(Z.l,{}),variant:"outline",size:"sm",onClick:function(){return function(e){n(s.filter((function(s){return s.fides_key!==e.fides_key})))}(e)},"data-testid":"unassign-btn"})})]},e.fides_key)}))})]})},T=function(e){var s=e.allSystems,n=e.assignedSystems,i=e.onChange;return(0,r.jsx)(a.xuv,{overflowY:"auto",maxHeight:"300px",children:(0,r.jsxs)(a.iA_,{size:"sm","data-testid":"assign-systems-table",maxHeight:"50vh",overflowY:"scroll",children:[(0,r.jsx)(a.hrZ,{position:"sticky",top:0,background:"white",zIndex:1,children:(0,r.jsxs)(a.Tr,{children:[(0,r.jsx)(a.Th,{children:"System"}),(0,r.jsx)(a.Th,{children:"Assign"})]})}),(0,r.jsx)(a.p3B,{children:s.map((function(e){var s=!!n.find((function(s){return s.fides_key===e.fides_key}));return(0,r.jsxs)(a.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,r.jsx)(a.Td,{children:e.name}),(0,r.jsx)(a.Td,{children:(0,r.jsx)(a.rsf,{isChecked:s,onChange:function(){return function(e){var s=!!n.find((function(s){return s.fides_key===e.fides_key}));i(s?n.filter((function(s){return s.fides_key!==e.fides_key})):(0,z.Z)(n).concat([e]))}(e)},"data-testid":"assign-switch"})})]},e.fides_key)}))})]})})},A=function(e){var s=e.isOpen,n=e.onClose,i=e.assignedSystems,t=e.onAssignedSystemChange,o=(0,_.K3)().data,l=(0,b.useState)(""),d=l[0],c=l[1],u=(0,b.useState)(i),h=u[0],m=u[1],p=function(){var e=(0,x.Z)((function(){return(0,f.__generator)(this,(function(e){return t(h),n(),[2]}))}));return function(){return e.apply(this,arguments)}}(),g=!o||0===o.length,j=(0,b.useMemo)((function(){return o?o.filter((function(e){return function(e,s){var n,i;return(null===(n=e.name)||void 0===n?void 0:n.toLocaleLowerCase().includes(s.toLocaleLowerCase()))||(null===(i=e.description)||void 0===i?void 0:i.toLocaleLowerCase().includes(s.toLocaleLowerCase()))}(e,d)})):[]}),[o,d]),v=(0,b.useMemo)((function(){var e=new Set(h.map((function(e){return e.fides_key})));return j.every((function(s){return e.has(s.fides_key)}))}),[j,h]);return(0,r.jsxs)(a.u_l,{isOpen:s,onClose:n,size:"2xl",children:[(0,r.jsx)(a.ZAr,{}),(0,r.jsxs)(a.hzk,{p:8,"data-testid":"confirmation-modal",children:[(0,r.jsxs)(a.xBx,{fontWeight:"medium",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(a.xvT,{children:"Assign systems"}),(0,r.jsxs)(a.Cts,{bg:"green.500",color:"white",px:1,children:["Assigned to ",i.length," systems"]})]}),(0,r.jsx)(a.fef,{"data-testid":"assign-systems-modal-body",children:g?(0,r.jsx)(a.xvT,{children:"No systems found"}):(0,r.jsxs)(a.Kqy,{spacing:4,children:[(0,r.jsxs)(a.kCb,{justifyContent:"space-between",children:[(0,r.jsx)(a.xvT,{fontSize:"sm",flexGrow:1,fontWeight:"medium",children:"Assign systems in your organization to this user"}),(0,r.jsx)(a.xuv,{children:(0,r.jsxs)(a.NIc,{display:"flex",alignItems:"center",children:[(0,r.jsx)(a.lXp,{fontSize:"sm",htmlFor:"assign-all-systems",mb:"0",children:"Assign all systems"}),(0,r.jsx)(a.rsf,{size:"sm",id:"assign-all-systems",isChecked:v,onChange:function(e){if(e.target.checked&&o)m(j);else{var s=o?o.filter((function(e){return!j.includes(e)})):[];m(s)}},"data-testid":"assign-all-systems-toggle"})]})})]}),(0,r.jsx)(S.Z,{search:d,onChange:c,placeholder:"Search for systems","data-testid":"system-search",withIcon:!0}),(0,r.jsx)(T,{allSystems:j,assignedSystems:h,onChange:m})]})}),(0,r.jsx)(a.mzw,{justifyContent:"flex-start",children:(0,r.jsxs)(a.hE2,{size:"sm",children:[(0,r.jsx)(a.zxk,{variant:"outline",mr:2,onClick:n,"data-testid":"cancel-btn",children:"Cancel"}),g?null:(0,r.jsx)(a.zxk,{colorScheme:"primary",onClick:p,"data-testid":"confirm-btn",children:"Confirm"})]})})]})]})},O=function(e){var s=e.label,n=e.roleKey,i=e.isSelected,t=e.isDisabled,o=e.assignedSystems,l=e.onAssignedSystemChange,d=(0,p.u6)().setFieldValue,c=(0,a.qY0)(),h=t?"You do not have sufficient permissions to assign this role.":void 0;return i?(0,r.jsxs)(a.Kqy,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",p:4,backgroundColor:"gray.50","aria-selected":"true",spacing:4,"data-testid":"selected",children:[(0,r.jsxs)(a.kCb,{alignItems:"center",justifyContent:"space-between",children:[(0,r.jsx)(a.xvT,{fontSize:"md",fontWeight:"semibold",children:s}),(0,r.jsx)(a.StI,{})]}),n!==u.A7.APPROVER?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.kCb,{alignItems:"center",children:[(0,r.jsx)(a.xvT,{fontSize:"sm",fontWeight:"semibold",mr:1,children:"Assigned systems"}),(0,r.jsx)(C.Z,{label:"Assigned systems refer to those systems that have been specifically allocated to a user for management purposes. Users assigned to a system possess full edit permissions and are listed as the Data Steward for the respective system."})]}),(0,r.jsx)(a.zxk,{disabled:t,title:h,colorScheme:"primary",size:"xs",width:"fit-content",onClick:c.onOpen,"data-testid":"assign-systems-btn",children:"Assign systems +"}),(0,r.jsx)(R,{assignedSystems:o,onAssignedSystemChange:l}),c.isOpen?(0,r.jsx)(A,{isOpen:c.isOpen,onClose:c.onClose,assignedSystems:o,onAssignedSystemChange:l}):null]}):null]}):(0,r.jsx)(a.zxk,{onClick:function(){d("roles",[n])},justifyContent:"start",variant:"outline",height:"inherit",p:4,"data-testid":"role-option-".concat(s),title:h,isDisabled:t,children:s})},E={roles:[]},I=function(){var e,s=(0,a.pmc)(),n=(0,d.C)(P.Ux);(0,P.d6)(n,{skip:!n});var t=(0,a.qY0)(),l=t.isOpen,c=t.onOpen,g=t.onClose,S=(0,d.C)(P.R$),_=(0,b.useState)(S),z=_[0],Z=_[1],R=(0,m.Z)((0,P.G$)(),1)[0];(0,b.useEffect)((function(){Z(S)}),[S]);var T=(0,P.gU)(null!==n&&void 0!==n?n:"",{skip:!n}),A=T.data,I=T.isLoading,U=(0,m.Z)((0,P.lD)(),1)[0],q=function(){var e=(0,x.Z)((function(e){var i,t,r,a;return(0,f.__generator)(this,(function(o){switch(o.label){case 0:return l&&g(),n?(i=e.roles.includes(u.A7.APPROVER),[4,U({user_id:n,payload:{roles:e.roles}})]):[2];case 1:return t=o.sent(),(0,v.D4)(t)?(s((0,k.Vo)((0,v.e$)(t.error))),[2]):i?[3,3]:(r=z.map((function(e){return e.fides_key})),[4,R({userId:n,fidesKeys:r})]);case 2:if(a=o.sent(),(0,v.D4)(a))return s((0,k.Vo)((0,v.e$)(a.error))),[2];o.label=3;case 3:return s((0,k.t5)("Permissions updated")),[2]}}))}));return function(s){return e.apply(this,arguments)}}(),D=function(){var e=(0,x.Z)((function(e){return(0,f.__generator)(this,(function(s){switch(s.label){case 0:return n?z.length>0&&e.roles.includes(u.A7.APPROVER)?(c(),[3,3]):[3,1]:[2];case 1:return[4,q(e)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}));return function(s){return e.apply(this,arguments)}}(),V=(0,h.Tg)([u.Sh.USER_PERMISSION_ASSIGN_OWNERS]);if(!n)return null;if(I)return(0,r.jsx)(a.$jN,{});if(!V&&(null===A||void 0===A||null===(e=A.roles)||void 0===e?void 0:e.includes(u.A7.OWNER)))return(0,r.jsx)(a.xvT,{"data-testid":"insufficient-access",children:"You do not have sufficient access to change this user's permissions."});var L=(null===A||void 0===A?void 0:A.roles)?{roles:A.roles}:E;return(0,r.jsx)(p.J9,{onSubmit:D,initialValues:L,enableReinitialize:!0,children:function(e){var s=e.values,n=e.isSubmitting,t=e.dirty;return(0,r.jsxs)(p.l0,{children:[(0,r.jsxs)(a.Kqy,{spacing:7,children:[(0,r.jsxs)(a.Kqy,{spacing:3,"data-testid":"role-options",children:[(0,r.jsxs)(a.kCb,{alignItems:"center",children:[(0,r.jsx)(a.xvT,{fontSize:"sm",fontWeight:"semibold",mr:1,children:"User role"}),(0,r.jsx)(C.Z,{label:"A user's role in the organization determines what parts of the UI they can access and which functions are available to them."})]}),o.K.map((function(e){var n=s.roles.indexOf(e.roleKey)>=0;return(0,r.jsx)(O,(0,i.Z)({isSelected:n,isDisabled:e.roleKey===u.A7.OWNER&&!V,assignedSystems:z,onAssignedSystemChange:Z},e),e.roleKey)}))]}),(0,r.jsxs)(a.hE2,{size:"sm",children:[(0,r.jsx)(j(),{href:w.e3,passHref:!0,children:(0,r.jsx)(a.zxk,{variant:"outline",children:"Cancel"})}),(0,r.jsx)(a.zxk,{colorScheme:"primary",type:"submit",isLoading:n,isDisabled:!t&&z===S,"data-testid":"save-btn",children:"Save"})]})]}),(0,r.jsx)(y.Z,{isOpen:l,onClose:g,onConfirm:function(){return q(s)},title:"Change role to Approver",testId:"downgrade-to-approver-confirmation-modal",continueButtonText:"Yes",message:(0,r.jsx)(a.xvT,{children:"Switching to an approver role will remove all assigned systems. Do you wish to proceed?"})})]})}})},U=n(46537),q=n(16310),D=n(56071),V=n(3116),L=n(85768).u.injectEndpoints({endpoints:function(e){return{getEmailInviteStatus:e.query({query:function(){return{url:"/messaging/email-invite/status"}},providesTags:function(){return["Email Invite Status"]}})}}}).useGetEmailInviteStatusQuery,W=n(86496),B=n(70169),K=n(34038),N=q.Ry().shape({password:V.a.label("Password"),passwordConfirmation:q.Z_().required().oneOf([q.iH("password")],"Passwords must match").label("Password confirmation")}),Y={password:"",passwordConfirmation:""},F=function(e){var s=function(e){var s=(0,a.qY0)(),n=(0,a.pmc)(),t=(0,m.Z)((0,P.ls)(),1)[0],r=function(){var i=(0,x.Z)((function(i){var r;return(0,f.__generator)(this,(function(a){switch(a.label){case 0:return[4,t({id:e,new_password:i.password})];case 1:return r=a.sent(),(0,K.D4)(r)?n((0,k.Vo)((0,v.e$)(r.error))):(n((0,k.t5)("Successfully reset user's password. Please inform the user of their new password.")),s.onClose()),[2]}}))}));return function(e){return i.apply(this,arguments)}}();return(0,B.Z)((0,i.Z)({},s),{handleResetPassword:r})}(e.id),n=s.handleResetPassword,t=s.isOpen,o=s.onClose,l=s.onOpen;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.zxk,{variant:"outline",size:"sm",onClick:l,"data-testid":"reset-password-btn",children:"Reset password"}),(0,r.jsxs)(a.u_l,{isCentered:!0,isOpen:t,onClose:o,children:[(0,r.jsx)(a.ZAr,{}),(0,r.jsx)(a.hzk,{children:(0,r.jsx)(p.J9,{initialValues:Y,validationSchema:N,onSubmit:n,children:function(e){var s=e.isSubmitting,n=e.dirty,i=e.isValid;return(0,r.jsxs)(p.l0,{children:[(0,r.jsx)(a.xBx,{children:"Reset Password"}),(0,r.jsx)(a.olH,{}),(0,r.jsx)(a.fef,{children:(0,r.jsxs)(a.Kqy,{direction:"column",spacing:4,children:[(0,r.jsx)(a.xvT,{mb:2,children:"Choose a new password for this user."}),(0,r.jsx)(D.j0,{name:"password",label:"Password",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol."}),(0,r.jsx)(D.j0,{name:"passwordConfirmation",label:"Confirm Password",placeholder:"********",type:"password",tooltip:"Must match above password."})]})}),(0,r.jsx)(a.mzw,{children:(0,r.jsxs)(a.hE2,{size:"sm",spacing:"2",width:"100%",children:[(0,r.jsx)(a.zxk,{onClick:o,variant:"outline",width:"50%",children:"Cancel"}),(0,r.jsx)(a.zxk,{colorScheme:"primary",isDisabled:!n||!i,isLoading:s,type:"submit",width:"50%","data-testid":"submit-btn",children:"Change Password"})]})})]})}})})]})]})},H=function(e){var s=function(e){var s=(0,a.qY0)(),n=(0,a.pmc)(),t=(0,b.useState)(""),r=t[0],o=t[1],l=(0,b.useState)(""),d=l[0],c=l[1],u=(0,m.Z)((0,P.ev)(),2),h=u[0],p=u[1].isLoading,g=!!(e&&d&&r),j=function(){var i=(0,x.Z)((function(){return(0,f.__generator)(this,(function(i){return g&&h({id:e,old_password:r,new_password:d}).unwrap().then((function(){n((0,k.t5)("Password updated")),s.onClose()})),[2]}))}));return function(){return i.apply(this,arguments)}}();return(0,B.Z)((0,i.Z)({},s),{changePasswordValidation:g,handleChange:function(e){"oldPassword"===e.target.name?o(e.target.value):c(e.target.value)},handleChangePassword:j,isLoading:p,newPasswordValue:d,oldPasswordValue:r})}(e.id),n=s.changePasswordValidation,t=s.handleChange,o=s.handleChangePassword,l=s.isLoading,d=s.isOpen,c=s.newPasswordValue,u=s.oldPasswordValue,h=s.onClose,p=s.onOpen;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.zxk,{variant:"outline",size:"sm",onClick:p,"data-testid":"update-password-btn",children:"Update password"}),(0,r.jsxs)(a.u_l,{isCentered:!0,isOpen:d,onClose:h,children:[(0,r.jsx)(a.ZAr,{}),(0,r.jsxs)(a.hzk,{children:[(0,r.jsx)(a.xBx,{children:"Update Password"}),(0,r.jsx)(a.olH,{}),(0,r.jsx)(a.fef,{pb:6,children:(0,r.jsxs)(a.Kqy,{direction:"column",spacing:"15px",children:[(0,r.jsx)(a.NIc,{children:(0,r.jsx)(a.IIB,{isRequired:!0,name:"oldPassword",onChange:t,placeholder:"Old Password",type:"password",value:u,"data-testid":"input-oldPassword"})}),(0,r.jsx)(a.NIc,{children:(0,r.jsx)(a.IIB,{isRequired:!0,name:"newPassword",onChange:t,placeholder:"New Password",type:"password",value:c,"data-testid":"input-newPassword"})})]})}),(0,r.jsxs)(a.mzw,{children:[(0,r.jsx)(a.zxk,{bg:"white",marginRight:"10px",onClick:h,size:"sm",variant:"solid",width:"50%",children:"Cancel"}),(0,r.jsx)(a.zxk,{bg:"primary.800",color:"white",isDisabled:!n,isLoading:l,mr:3,onClick:o,size:"sm",type:"submit",variant:"solid",width:"50%","data-testid":"submit-btn",children:"Change Password"})]})]})]})]})},M=function(){var e=(0,d.C)(P.Ux),s=(0,d.C)(W.dy),n=!!s&&s.id===e;return(0,r.jsx)(a.xuv,{children:e?(0,r.jsxs)(a.Ugi,{children:[n?(0,r.jsx)(H,{id:e}):null,(0,r.jsx)(h.ZP,{scopes:[u.Sh.USER_PASSWORD_RESET],children:(0,r.jsx)(F,{id:e})})]}):null})},$={username:"",first_name:"",email_address:"",last_name:"",password:""},G=q.Ry().shape({username:q.Z_().required().label("Username"),email_address:q.Z_().email().required().label("Email address"),first_name:q.Z_().label("First name"),last_name:q.Z_().label("Last name"),password:V.a.label("Password")}),J=function(e){var s=e.onSubmit,n=e.initialValues,o=e.canEditNames,l=(0,a.pmc)(),c=(0,d.T)(),u=(0,a.qY0)(),h=(0,d.C)(P.ZC),m=L().data,g=null===m||void 0===m?void 0:m.enabled,b=!h,y=!b&&!o,C=b&&!g,S=function(){var e=(0,x.Z)((function(e){var n,i;return(0,f.__generator)(this,(function(r){switch(r.label){case 0:return e.password,n=(0,t.Z)(e,["password"]),[4,s(C?e:n)];case 1:return i=r.sent(),(0,v.D4)(i)?(l((0,k.Vo)((0,v.e$)(i.error))),[2]):(l((0,k.t5)("".concat(b?"User created. By default, new users are set to the Viewer role. To change the role, please go to the Permissions tab.":"User updated."))),i&&i.data&&c((0,P.Vv)(i.data.id)),[2])}}))}));return function(s){return e.apply(this,arguments)}}(),_=C?G:G.omit(["password"]);return(0,r.jsx)(p.J9,{onSubmit:S,initialValues:null!==n&&void 0!==n?n:$,validationSchema:_,children:function(e){var s=e.dirty,n=e.isSubmitting,t=e.isValid;return(0,r.jsx)(p.l0,{children:(0,r.jsxs)(a.Kqy,{maxW:["xs","xs","100%"],width:"100%",spacing:7,children:[(0,r.jsxs)(a.Kqy,{spacing:6,maxWidth:"55%",children:[(0,r.jsxs)(a.kCb,{children:[(0,r.jsxs)(a.xvT,{display:"flex",alignItems:"center",fontSize:"sm",fontWeight:"semibold",children:["Profile"," ",(null===h||void 0===h?void 0:h.disabled)&&(0,r.jsx)(a.Cts,{bg:"green.500",color:"white",paddingLeft:"2",marginLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"invite-sent-badge",children:"Invite sent"})]}),(0,r.jsx)(a.xuv,{marginLeft:"auto",children:(0,r.jsxs)(a.Ugi,{children:[(0,r.jsx)(M,{}),b?null:(0,r.jsxs)(a.xuv,{children:[(0,r.jsx)(a.hU,{"aria-label":"delete",icon:(0,r.jsx)(Z.l,{}),variant:"outline",size:"sm",onClick:u.onOpen,"data-testid":"delete-user-btn"}),(0,r.jsx)(U.Z,(0,i.Z)({user:h},u))]})]})})]}),(0,r.jsx)(D.j0,{name:"username",label:"Username",variant:"block",placeholder:"Enter new username",disabled:!b,isRequired:!0}),(0,r.jsx)(D.j0,{name:"email_address",label:"Email address",variant:"block",placeholder:"Enter email of user",isRequired:!0}),(0,r.jsx)(D.j0,{name:"first_name",label:"First Name",variant:"block",placeholder:"Enter first name of user",disabled:y}),(0,r.jsx)(D.j0,{name:"last_name",label:"Last Name",variant:"block",placeholder:"Enter last name of user",disabled:y}),C?(0,r.jsx)(D.j0,{name:"password",label:"Password",variant:"block",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol.",isRequired:!0}):null]}),(0,r.jsxs)(a.hE2,{size:"sm",children:[(0,r.jsx)(j(),{href:w.e3,passHref:!0,children:(0,r.jsx)(a.zxk,{variant:"outline",mr:3,children:"Cancel"})}),(0,r.jsx)(a.zxk,{type:"submit",bg:"primary.800",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},colorScheme:"primary",isDisabled:!s||!t,isLoading:n,"data-testid":"save-user-btn",children:"Save"})]})]})})}})},Q=function(e){var s=e.onSubmit,n=e.initialValues,o=(0,t.Z)(e,["onSubmit","initialValues"]),x=(0,d.C)(P.Ux);(0,P.Fk)(x,{skip:!x});var m=(0,h.Tg)([u.Sh.USER_PERMISSION_UPDATE]),f=!x||!m,p=[{label:"Profile",content:(0,r.jsx)(J,(0,i.Z)({onSubmit:s,initialValues:n},o))},{label:"Permissions",content:(0,r.jsxs)(a.kCb,{gap:"97px",children:[(0,r.jsx)(a.xuv,{w:{base:"100%",md:"50%",xl:"50%"},children:(0,r.jsx)(I,{})}),(0,r.jsx)(a.xuv,{position:"absolute",top:"96px",right:6,height:"calc(100% + 100px)",overflowY:"scroll",padding:6,w:"35%",borderLeftWidth:"1px",children:(0,r.jsx)(l,{})})]}),isDisabled:f}];return(0,r.jsx)(c.Z,{data:p})}},34038:function(e,s,n){n.d(s,{Bw:function(){return i.Bw},D4:function(){return i.D4}});var i=n(32764)}}]);