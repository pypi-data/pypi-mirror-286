(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{72011:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var r=n(4),i=n(1),a=n(2),o={addUnnecessaryBendpoints:"de.cau.cs.kieler.klay.layered.unnecessaryBendpoints",alignment:"de.cau.cs.kieler.alignment",aspectRatio:"de.cau.cs.kieler.aspectRatio",borderSpacing:"borderSpacing",compactComponents:"de.cau.cs.kieler.klay.layered.components.compact",compactionStrategy:"de.cau.cs.kieler.klay.layered.nodeplace.compactionStrategy",contentAlignment:"de.cau.cs.kieler.klay.layered.contentAlignment",crossingMinimization:"de.cau.cs.kieler.klay.layered.crossMin",cycleBreaking:"de.cau.cs.kieler.klay.layered.cycleBreaking",debugMode:"de.cau.cs.kieler.debugMode",direction:"de.cau.cs.kieler.direction",edgeLabelSideSelection:"de.cau.cs.kieler.klay.layered.edgeLabelSideSelection",edgeRouting:"de.cau.cs.kieler.edgeRouting",edgeSpacingFactor:"de.cau.cs.kieler.klay.layered.edgeSpacingFactor",feedbackEdges:"de.cau.cs.kieler.klay.layered.feedBackEdges",fixedAlignment:"de.cau.cs.kieler.klay.layered.fixedAlignment",greedySwitchCrossingMinimization:"de.cau.cs.kieler.klay.layered.greedySwitch",hierarchyHandling:"de.cau.cs.kieler.hierarchyHandling",inLayerSpacingFactor:"de.cau.cs.kieler.klay.layered.inLayerSpacingFactor",interactiveReferencePoint:"de.cau.cs.kieler.klay.layered.interactiveReferencePoint",layerConstraint:"de.cau.cs.kieler.klay.layered.layerConstraint",layoutHierarchy:"de.cau.cs.kieler.layoutHierarchy",linearSegmentsDeflectionDampening:"de.cau.cs.kieler.klay.layered.linearSegmentsDeflectionDampening",mergeEdges:"de.cau.cs.kieler.klay.layered.mergeEdges",mergeHierarchyCrossingEdges:"de.cau.cs.kieler.klay.layered.mergeHierarchyEdges",noLayout:"de.cau.cs.kieler.noLayout",nodeLabelPlacement:"de.cau.cs.kieler.nodeLabelPlacement",nodeLayering:"de.cau.cs.kieler.klay.layered.nodeLayering",nodePlacement:"de.cau.cs.kieler.klay.layered.nodePlace",portAlignment:"de.cau.cs.kieler.portAlignment",portAlignmentEastern:"de.cau.cs.kieler.portAlignment.east",portAlignmentNorth:"de.cau.cs.kieler.portAlignment.north",portAlignmentSouth:"de.cau.cs.kieler.portAlignment.south",portAlignmentWest:"de.cau.cs.kieler.portAlignment.west",portConstraints:"de.cau.cs.kieler.portConstraints",portLabelPlacement:"de.cau.cs.kieler.portLabelPlacement",portOffset:"de.cau.cs.kieler.offset",portSide:"de.cau.cs.kieler.portSide",portSpacing:"de.cau.cs.kieler.portSpacing",postCompaction:"de.cau.cs.kieler.klay.layered.postCompaction",priority:"de.cau.cs.kieler.priority",randomizationSeed:"de.cau.cs.kieler.randomSeed",routeSelfLoopInside:"de.cau.cs.kieler.selfLoopInside",separateConnectedComponents:"de.cau.cs.kieler.separateConnComp",sizeConstraint:"de.cau.cs.kieler.sizeConstraint",sizeOptions:"de.cau.cs.kieler.sizeOptions",spacing:"de.cau.cs.kieler.spacing",splineSelfLoopPlacement:"de.cau.cs.kieler.klay.layered.splines.selfLoopPlacement",thoroughness:"de.cau.cs.kieler.klay.layered.thoroughness",wideNodesOnMultipleLayers:"de.cau.cs.kieler.klay.layered.wideNodesOnMultipleLayers"},c=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r],a=o[i],c=e[i];n[a]=c}return n},s={interactiveReferencePoint:"CENTER"},l=function(e){for(var t=e.parent(),n=e.scratch("klay"),r={x:n.x,y:n.y};t.nonempty();){var i=t.scratch("klay");r.x+=i.x,r.y+=i.y,t=t.parent()}return r},u=function(e,t){var n=e.layoutDimensions(t),r=e.numericStyle("padding"),i={_cyEle:e,id:e.id(),padding:{top:r,left:r,bottom:r,right:r}};return e.isParent()||(i.width=n.w,i.height=n.h),e.scratch("klay",i),i},d=function(e,t){var n={_cyEle:e,id:e.id(),source:e.data("source"),target:e.data("target"),properties:{}},r=t.priority(e);return null!=r&&(n.properties.priority=r),e.scratch("klay",n),n};function g(e){var t=e.klay;this.options=i({},a,e),this.options.klay=i({},a.klay,t,s)}g.prototype.run=function(){var e=this.options,t=e.eles,n=t.nodes(),i=function(e,t,n){for(var r=[],i=[],a={},o={id:"root",children:[],edges:[]},c=0;c<e.length;c++){var s=e[c],l=u(s,n);r.push(l),a[s.id()]=l}for(var g=0;g<t.length;g++){var y=t[g],p=d(y,n);i.push(p),a[y.id()]=p}for(var f=0;f<r.length;f++){var m=r[f],k=m._cyEle;if(k.isChild()){var h=a[k.parent().id()];(h.children=h.children||[]).push(m)}else o.children.push(m)}for(var v=0;v<i.length;v++){var b=i[v],S=b._cyEle;S.source().parent(),S.target().parent(),o.edges.push(b)}return o}(n,t.edges(),e);return r.layout({graph:i,options:c(e.klay),success:function(){},error:function(e){throw e}}),n.filter((function(e){return!e.isParent()})).layoutPositions(this,e,l),this},g.prototype.stop=function(){return this},g.prototype.destroy=function(){return this},e.exports=g},function(e,t,n){"use strict";e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.filter((function(e){return null!=e})).forEach((function(t){Object.keys(t).forEach((function(n){return e[n]=t[n]}))})),e}},function(e,t,n){"use strict";var r={nodeDimensionsIncludeLabels:!1,fit:!0,padding:20,animate:!1,animateFilter:function(e,t){return!0},animationDuration:500,animationEasing:void 0,transform:function(e,t){return t},ready:void 0,stop:void 0,klay:{addUnnecessaryBendpoints:!1,aspectRatio:1.6,borderSpacing:20,compactComponents:!1,crossingMinimization:"LAYER_SWEEP",cycleBreaking:"GREEDY",direction:"UNDEFINED",edgeRouting:"ORTHOGONAL",edgeSpacingFactor:.5,feedbackEdges:!1,fixedAlignment:"NONE",inLayerSpacingFactor:1,layoutHierarchy:!1,linearSegmentsDeflectionDampening:.3,mergeEdges:!1,mergeHierarchyCrossingEdges:!0,nodeLayering:"NETWORK_SIMPLEX",nodePlacement:"BRANDES_KOEPF",randomizationSeed:1,routeSelfLoopInside:!1,separateConnectedComponents:!0,spacing:20,thoroughness:7},priority:function(e){return null}};e.exports=r},function(e,t,n){"use strict";var r=n(0),i=function(e){e&&e("layout","klay",r)};"undefined"!==typeof cytoscape&&i(cytoscape),e.exports=i},function(t,n){t.exports=e}])},e.exports=r(n(73552))},538:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(3204),i=n(24246),a=n(83265),o=n(27378),c=n(85034),s=n(76573),l=n(72011),u=n.n(l),d=n(65218),g=n.n(d),y=n(24353),p=g()((function(){return n.e(7062).then(n.bind(n,37062))}),{loadableGenerated:{webpack:function(){return[37062]}},ssr:!1});s.Z.use(u()),s.Z.warnings(!1);var f=function(e){var t=e.data,n=e.setSelectedSystemId,s=function(e){var t=e.data,n=(0,o.useMemo)((function(){var e=t.nodes.map((function(e){return{data:(0,c.Z)({label:e.name},e),grabbable:!1,classes:"center-center multiline-auto outline"}})),n=t.links.map((function(e){return{data:{source:e.source,target:e.target}}}));return(0,r.Z)(e).concat((0,r.Z)(n))}),[t.links,t.nodes]),i=(0,o.useMemo)((function(){return{name:"klay",nodeDimensionsIncludeLabels:!0,klay:{thoroughness:20,borderSpacing:100,direction:"DOWN",edgeRouting:"SPLINES",edgeSpacingFactor:1.3}}}),[]),a="#f7fafc";return{elements:n,layoutConfig:i,styleSheet:(0,o.useMemo)((function(){return[{selector:"node[label]",style:{label:"data(label)"}},{selector:"node",style:{shape:"ellipse",width:"45px",height:"45px",backgroundColor:a}},{selector:"edge[label]",style:{label:"data(label)",width:3}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","line-color":"#888","target-arrow-color":"#888",opacity:.5}},{selector:"node",style:{"background-image":"/images/DatabaseIcon.svg"}},{selector:"node:selected",style:{"background-image":"/images/SelectedDatabaseIcon.svg"}},{selector:".center-center",style:{"text-valign":"center","text-halign":"right"}},{selector:".multiline-auto",style:{"text-wrap":"wrap","text-max-width":"40"}},{selector:".outline",style:{color:"#8d91b4","text-outline-color":"#fff","text-outline-width":1}}]}),[]),backgroundColor:a}}({data:t}),l=s.elements,u=s.layoutConfig,d=s.styleSheet,g=s.backgroundColor,f=(0,o.useContext)(y.Y),m=(0,o.useState)(!1),k=m[0],h=m[1];return(0,o.useEffect)((function(){var e=function(e){var t=e.target._private.data;n(t.id)};return f.current&&(f.current.on("click","node",e),f.current.on("layoutstop",(function(){f.current&&(f.current.maxZoom(2.5),f.current.fit(),f.current.maxZoom(100))}))),function(){f.current&&f.current.off("click","node",e)}}),[f.current,n]),(0,o.useEffect)((function(){return function(){f.current=void 0}}),[f]),(0,o.useEffect)((function(){var e,t,n,r;k&&(null===(e=f.current)||void 0===e||e.layout(u).stop(),null===(t=f.current)||void 0===t||t.layout(u).removeAllListeners(),null===(n=f.current)||void 0===n||n.layout(u),null===(r=f.current)||void 0===r||r.layout(u).run())}),[k,l,f,u]),(0,i.jsx)(a.xuv,{boxSize:"100%","data-testid":"cytoscape-graph",position:"absolute",children:(0,i.jsx)(a.xuv,{boxSize:"100%",bgColor:"gray.50",children:(0,i.jsx)(p,{cy:function(e){k||(h(!0),f.current=e)},elements:l,style:{height:"100%",width:"100%",backgroundColor:g},stylesheet:d,wheelSensitivity:.085,layout:u})})})},m=o.memo(f),k=n(30269),h=function(e){var t=e.setSelectedSystemId,n=(0,o.useContext)(k.Z).tableInstance;if(!n)return null;var c=function(e){var t=(0,o.useMemo)((function(){return new Set(null===e||void 0===e?void 0:e.map((function(e){return e.original["system.fides_key"]})))}),[e]),n=(0,o.useMemo)((function(){return e.reduce((function(e,t){var n=t.original["system.fides_key"];return e[n]||(e[n]={name:t.original["system.name"],description:t.original["system.description"],ingress:t.original["system.ingress"]?t.original["system.ingress"].split(", "):[],egress:t.original["system.egress"]?t.original["system.egress"].split(", "):[],id:t.original["system.fides_key"]}),e}),{})}),[e]);return{data:(0,o.useMemo)((function(){var e=[],t=new Set([]);return n&&(e=Object.values(n)).map((function(e){return(0,r.Z)(e.ingress.filter((function(e){return n[e]})).map((function(t){return{source:t,target:e.id}}))).concat((0,r.Z)(e.egress.filter((function(e){return n[e]})).map((function(t){return{source:e.id,target:t}}))))})).flatMap((function(e){return e})).forEach((function(e){return t.add(JSON.stringify(e))})),{nodes:e,links:Array.from(t).map((function(e){return JSON.parse(e)}))}}),[n]),highlightedNodes:t}}(n.getRowModel().rows).data;return(0,i.jsx)(a.xuv,{boxSize:"100%",minHeight:"600px",position:"relative",children:(0,i.jsx)(m,{data:c,setSelectedSystemId:t})})}}}]);