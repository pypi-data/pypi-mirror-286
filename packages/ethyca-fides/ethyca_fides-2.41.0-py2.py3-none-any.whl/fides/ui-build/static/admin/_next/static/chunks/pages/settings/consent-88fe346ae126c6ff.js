(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[210],{53611:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/consent",function(){return t(74024)}])},51191:function(e,n,t){"use strict";var r=t(85034),i=t(24246),s=t(83265);n.Z=function(e){return(0,i.jsx)(s.rUS,(0,r.Z)({isExternal:!0,color:"complimentary.500"},e))}},1496:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(85034),i=t(70169),s=t(24246),o=t(83265),a=t(88038),l=t.n(a),u=t(86677),c=(t(27378),t(67447)),d=t(63076),p=t(93677),f=function(){var e=(0,u.useRouter)();return(0,s.jsx)(o.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,s.jsxs)(o.xuv,{children:[(0,s.jsxs)(o.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,s.jsx)(o.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,s.jsx)(o.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(p.fz)},children:"Configure"})]}),(0,s.jsxs)(o.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},h=function(e){var n=e.children,t=e.title,a=e.padded,p=void 0===a||a,h=e.mainProps,g=(0,c.hz)(),m=(0,u.useRouter)(),v="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,x=!(g.flags.privacyRequestsConfiguration&&v),b=(0,d.JE)(void 0,{skip:x}).data,j=(0,d.PW)(void 0,{skip:x}).data,y=g.flags.privacyRequestsConfiguration&&(!b||!j)&&v;return(0,s.jsxs)(o.kCb,{"data-testid":t,direction:"column",h:"100vh",children:[(0,s.jsxs)(l(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)(o.kCb,(0,i.Z)((0,r.Z)({as:"main",direction:"column",py:p?6:0,px:p?10:0,h:p?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},h),{children:[y?(0,s.jsx)(f,{}):null,n]}))]})}},32556:function(e,n,t){"use strict";t.d(n,{D4:function(){return i.D4},MM:function(){return f},Ot:function(){return l},c6:function(){return c},cj:function(){return g},e$:function(){return o},fn:function(){return a},iC:function(){return h},nU:function(){return p},tB:function(){return u}});var r=t(17599),i=t(32764),s="An unexpected error occurred. Please try again.",o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if((0,i.Bw)(e)){if((0,i.hE)(e.data))return e.data.detail;if((0,i.cz)(e.data)){var t,r=null===(t=e.data.detail)||void 0===t?void 0:t[0];return"".concat(null===r||void 0===r?void 0:r.msg,": ").concat(null===r||void 0===r?void 0:r.loc)}if(409===e.status&&(0,i.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,i.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return n};function a(e){return"object"===typeof e&&null!=e&&"status"in e}function l(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function u(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var c,d,p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:s};if((0,i.oK)(e))return{status:e.originalStatus,message:e.data};if((0,i.Bw)(e)){var t=e.status;return{status:t,message:o(e,n.message)}}return n},f=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))};!function(e){e.GVL="gvl",e.AC="gacp",e.COMPASS="compass"}(c||(c={}));var h=(d={},(0,r.Z)(d,c.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,r.Z)(d,c.AC,{label:"AC",fullName:"Google Additional Consent List"}),(0,r.Z)(d,c.COMPASS,{label:"",fullName:""}),d),g=function(e){var n=e.split(".")[0];return n===c.AC?c.AC:n===c.GVL?c.GVL:c.COMPASS}},9334:function(e,n,t){"use strict";t.d(n,{ZS:function(){return a},a4:function(){return s}});var r=t(80406),i=t(85768).u.injectEndpoints({endpoints:function(e){return{getPurposes:e.query({query:function(){return"purposes"}})}}}),s=i.useGetPurposesQuery,o={purposes:{},special_purposes:{}},a=(0,r.P1)(i.endpoints.getPurposes.select(),(function(e){return e.data||o}))},61186:function(e,n,t){"use strict";t.d(n,{MA:function(){return l},Vo:function(){return c},t5:function(){return u}});var r=t(85034),i=t(24246),s=t(83265),o=function(e){var n=e.children;return(0,i.jsxs)(s.xvT,{"data-testid":"toast-success-msg",children:[(0,i.jsx)("strong",{children:"Success:"})," ",n]})},a=function(e){var n=e.children;return(0,i.jsxs)(s.xvT,{"data-testid":"toast-error-msg",children:[(0,i.jsx)("strong",{children:"Error:"})," ",n]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},u=function(e){var n=(0,i.jsx)(o,{children:e});return(0,r.Z)({},l,{description:n})},c=function(e){var n=(0,i.jsx)(a,{children:e});return(0,r.Z)({},l,{description:n,status:"error"})}},74024:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return z}});var r=t(23842),i=t(85034),s=t(70169),o=t(31373),a=t(52050),l=t(3204),u=t(85556),c=t(24246),d=t(83265),p=t(34090),f=t(27378),h=t(10503),g=t(51191),m=t(67447),v=t(32556),x=t(1496),b=t(9334),j=t(12934),y=t(61186),_=function(e){var n=e.name,t=e.enabled;return(0,c.jsxs)(d.Kqy,{spacing:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:[(0,c.jsxs)(d.xvT,{children:[n," status"," ",t?(0,c.jsx)(d.Cts,{fontWeight:"semibold",color:"green.800",backgroundColor:"green.100",children:"Enabled"}):(0,c.jsx)(d.Cts,{fontWeight:"semibold",backgroundColor:"red.100",children:"Disabled"})]}),(0,c.jsxs)(d.xvT,{children:["To ",t?"disable":"enable"," ",n,", please contact your Fides administrator or"," ",(0,c.jsx)(g.Z,{href:"mailto:support@ethyca.com",children:"Ethyca support"}),"."]})]})},C=t(56071),w=t(77802),S=t(10439),T=function(e){var n=e.title,t=e.children,r=(0,o.Z)(e,["title","children"]);return(0,c.jsxs)(d.xuv,(0,s.Z)((0,i.Z)({backgroundColor:"gray.50",borderRadius:"4px",padding:"3","data-testid":"setting-".concat(n)},r),{children:[(0,c.jsx)(d.xvT,{fontSize:"md",fontWeight:"bold",lineHeight:5,color:"gray.700",mb:3,children:n}),t]}))},P=function(e){var n=e.title,t=e.children;return(0,c.jsxs)(d.Kqy,{spacing:3,mb:3,"data-testid":"section-".concat(n),children:[(0,c.jsx)(d.xvT,{fontSize:"sm",fontWeight:"bold",lineHeight:5,color:"gray.700",children:n}),t]})},k=function(){var e=(0,m.hz)().tcf,n=!!(0,h.C)(w.D2).enabled,t=(0,p.u6)().values,r=!!t.gpp.us_approach;return(0,c.jsx)(T,{title:"Global Privacy Platform",children:(0,c.jsxs)(d.Kqy,{spacing:6,children:[(0,c.jsx)(_,{name:"GPP",enabled:n}),n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(P,{title:"GPP U.S.",children:(0,c.jsx)(C.xt,{name:"gpp.us_approach",variant:"stacked",defaultFirstSelected:!1,options:[{label:"Enable U.S. National",value:S.en.NATIONAL,tooltip:"When US National is selected, Fides will present the same privacy notices to all consumers located anywhere in the United States."},{label:"Enable U.S. State-by-State",value:S.en.STATE,tooltip:"When state-by-state is selected, Fides will only present consent to consumers and save their preferences if they are located in a state that is supported by the GPP. The consent options presented to consumers will vary depending on the regulations in each state."}]})}),r?(0,c.jsxs)(P,{title:"MSPA",children:[(0,c.jsx)(C.Xl,{name:"gpp.mspa_covered_transactions",label:"All transactions covered by MSPA",tooltip:"When selected, the Fides CMP will communicate to downstream vendors that all preferences are covered under the MSPA."}),(0,c.jsx)(C.w8,{label:"Enable MSPA service provider mode",name:"gpp.mspa_service_provider_mode",variant:"switchFirst",tooltip:"Enable service provider mode if you do not engage in any sales or sharing of personal information.",isDisabled:t.gpp.mspa_opt_out_option_mode}),(0,c.jsx)(C.w8,{label:"Enable MSPA opt-out option mode",name:"gpp.mspa_opt_out_option_mode",variant:"switchFirst",tooltip:"Enable opt-out option mode if you engage or may engage in the sales or sharing of personal information, or process any information for the purpose of targeted advertising.",isDisabled:t.gpp.mspa_service_provider_mode})]}):null]}):null,e?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d.izJ,{color:"gray.200"}),(0,c.jsxs)(P,{title:"GPP Europe",children:[(0,c.jsx)(d.xvT,{fontSize:"sm",fontWeight:"medium",children:"Configure TCF string for Global Privacy Platform"}),(0,c.jsx)(C.w8,{label:"Enable TC string",name:"gpp.enable_tcfeu_string",variant:"switchFirst",tooltip:"When enabled, the GPP API will include a TCF EU consent string for users who are in regions where TCF applies."})]})]}):null]})})},A=function(e){var n=e.children,t=e.purpose,r=e.endCol;return(0,c.jsx)(d.kCb,{flex:"1",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px",borderRight:r?"solid 1px":"unset",borderColor:"gray.200",height:"100%",minWidth:"36px",children:[1,3,4,5,6].includes(t)?null:(0,c.jsx)(d.xuv,{children:n})})},E=function(){var e=(0,p.u6)(),n=e.values,t=e.setFieldValue,r=(0,h.C)(b.ZS).purposes;return(0,c.jsx)(p.F2,{name:"purposeOverrides",render:function(){return(0,c.jsxs)(d.kCb,{flexDirection:"column",minWidth:"944px",children:[(0,c.jsxs)(d.kCb,{width:"100%",border:"solid 1px",borderColor:"gray.200",backgroundColor:"gray.50",height:"36px",children:[(0,c.jsx)(d.kCb,{width:"600px",pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",alignItems:"center",borderRight:"solid 1px",borderColor:"gray.200",children:"TCF purpose"}),(0,c.jsx)(d.kCb,{flex:"1",alignItems:"center",borderRight:"solid 1px",borderColor:"gray.200",minWidth:"36px",children:(0,c.jsx)(d.xvT,{pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",children:"Allowed"})}),(0,c.jsx)(d.kCb,{flex:"1",alignItems:"center",borderRight:"solid 1px",borderColor:"gray.200",children:(0,c.jsx)(d.xvT,{pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",children:"Consent"})}),(0,c.jsx)(d.kCb,{flex:"1",alignItems:"center",children:(0,c.jsx)(d.xvT,{pl:"4",fontSize:"xs",fontWeight:"medium",lineHeight:"4",children:"Legitimate interest"})})]}),n.purposeOverrides.map((function(e,i){return(0,c.jsxs)(d.kCb,{width:"100%",height:"36px",alignItems:"center",borderBottom:"solid 1px",borderColor:"gray.200",children:[(0,c.jsxs)(d.kCb,{width:"600px",borderLeft:"solid 1px",borderColor:"gray.200",p:0,alignItems:"center",height:"100%",pl:"4",fontSize:"xs",fontWeight:"normal",lineHeight:"4",children:["Purpose ",e.purpose,": ",r[e.purpose].name]}),(0,c.jsx)(d.kCb,{flex:"1",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px",borderColor:"gray.200",height:"100%",children:(0,c.jsx)(d.xuv,{children:(0,c.jsx)(C.w8,{name:"purposeOverrides[".concat(i,"].is_included"),onChange:function(e){e.target.checked||(t("purposeOverrides[".concat(i,"].is_consent"),!1),t("purposeOverrides[".concat(i,"].is_legitimate_interest"),!1))}})})}),(0,c.jsx)(A,{purpose:e.purpose,children:(0,c.jsx)(C.w8,{isDisabled:!n.purposeOverrides[i].is_included||n.purposeOverrides[i].is_legitimate_interest,name:"purposeOverrides[".concat(i,"].is_consent")})}),(0,c.jsx)(A,{purpose:e.purpose,endCol:!0,children:(0,c.jsx)(C.w8,{isDisabled:!n.purposeOverrides[i].is_included||n.purposeOverrides[i].is_consent,name:"purposeOverrides[".concat(i,"].is_legitimate_interest")})})]},e.purpose)}))]})}})},F=t(94353),L=t(63076),z=function(){var e=(0,F.x8)().isLoading,n=(0,m.hz)().tcf,t=(0,F.n3)(void 0,{skip:e||!n}),C=t.data,w=t.isLoading,P=(0,a.Z)((0,F.M7)(),1)[0],A=(0,L.tB)({api_set:!0}),z=A.data,O=A.isLoading,Z=(0,L.tB)({api_set:!1}),I=Z.data,N=Z.isLoading,W=(0,a.Z)((0,L.L)(),2),D=W[0],M=W[1].isLoading,G=(0,h.C)(L.D2),R=(0,f.useMemo)((function(){return z&&(null===z||void 0===z?void 0:z.consent)&&"override_vendor_purposes"in z.consent?z.consent.override_vendor_purposes:!!(I&&(null===I||void 0===I?void 0:I.consent)&&"override_vendor_purposes"in I.consent)&&I.consent.override_vendor_purposes}),[z,I]),q=(0,b.a4)().isLoading,V=(0,d.pmc)(),H=function(){var e=(0,r.Z)((function(e){var n,t,r,i,s,a;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return n=function(e){if(V.closeAll(),(0,v.D4)(e)){var n=(0,v.e$)(e.error,"An unexpected error occurred while saving. Please try again.");V((0,y.Vo)(n))}else V((0,y.t5)("Settings saved successfully"))},t=(0,l.Z)(e.purposeOverrides.map((function(e){var n;return e.is_consent&&(n=S.I$.CONSENT),e.is_legitimate_interest&&(n=S.I$.LEGITIMATE_INTERESTS),{purpose:e.purpose,is_included:e.is_included,required_legal_basis:n}}))),R?[4,P(t)]:[3,2];case 1:if(r=u.sent(),(0,v.D4)(r))return n(r),[2];u.label=2;case 2:return i=e.gpp,i.enabled,s=(0,o.Z)(i,["enabled"]),[4,D({gpp:s})];case 3:return a=u.sent(),n(a),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),B=function(){var e=(0,r.Z)((function(e){var n,t;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return n=function(e){if(V.closeAll(),(0,v.D4)(e)){var n=(0,v.e$)(e.error,"An unexpected error occurred while saving vendor override settings. Please try again.");V((0,y.Vo)(n))}},[4,D({consent:{override_vendor_purposes:e.target.checked}})];case 1:return t=r.sent(),e.target.checked?[4,P(C.map((function(e){return(0,s.Z)((0,i.Z)({},e),{is_included:!0,required_legal_basis:void 0})})))]:[3,3];case 2:r.sent(),r.label=3;case 3:return n(t),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),U=(0,f.useMemo)((function(){return{purposeOverrides:C?C.map((function(e){return{purpose:e.purpose,is_included:e.is_included,is_consent:e.required_legal_basis===S.I$.CONSENT,is_legitimate_interest:e.required_legal_basis===S.I$.LEGITIMATE_INTERESTS}})):[],gpp:G}}),[C,G]);return(0,c.jsx)(x.Z,{title:"Consent Configuration",children:e||q||w||O||N?(0,c.jsx)(d.kCb,{justifyContent:"center",alignItems:"center",height:"100%",children:(0,c.jsx)(d.$jN,{})}):(0,c.jsxs)(d.xuv,{"data-testid":"consent-configuration",children:[(0,c.jsx)(d.X6q,{marginBottom:4,fontSize:"2xl",children:"Consent settings"}),(0,c.jsxs)(d.Kqy,{spacing:3,mb:3,children:[(0,c.jsx)(T,{title:"Transparency & Consent Framework settings",children:(0,c.jsx)(_,{name:"TCF",enabled:n})}),(0,c.jsxs)(T,{title:"Vendor overrides",children:[n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d.xvT,{mb:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:"Configure overrides for TCF related purposes."}),(0,c.jsxs)(d.kCb,{alignItems:"center",marginBottom:2,children:[(0,c.jsx)(d.rsf,{size:"sm",colorScheme:"purple",isChecked:R,onChange:B,isDisabled:M}),(0,c.jsx)(d.xvT,{px:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:"Override vendor purposes"}),(0,c.jsx)(j.Z,{label:"Toggle on if you want to globally change any flexible legal bases or remove TCF purposes from your CMP"})]}),(0,c.jsx)(d.xvT,{mb:2,fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:R?"The table below allows you to adjust which TCF purposes you allow as part of your user facing notices and business activites.":null})]}):null,R&&n?(0,c.jsxs)(d.xvT,{fontSize:"sm",lineHeight:"5",fontWeight:"medium",color:"gray.700",children:["To configure this section, select the purposes you allow and where available, the appropriate legal bases (either Consent or Legitimate Interest)."," ",(0,c.jsxs)(g.Z,{href:"https://fid.es/tcf-overrides",children:["Read the guide on vendor overrides here."," "]})]}):null]})]}),(0,c.jsx)(p.J9,{initialValues:U,enableReinitialize:!0,onSubmit:H,children:function(e){var n=e.dirty,t=e.isValid,r=e.isSubmitting;return(0,c.jsx)(p.l0,{children:(0,c.jsxs)(d.Kqy,{spacing:6,children:[R?(0,c.jsx)(E,{}):null,(0,c.jsx)(k,{}),(0,c.jsx)(d.zxk,{type:"submit",variant:"primary",size:"sm",isDisabled:!n||!t,isLoading:r,"data-testid":"save-btn",width:"fit-content",children:"Save"})]})})}})]})})}},32764:function(e,n,t){"use strict";t.d(n,{Bw:function(){return o},D4:function(){return i},Dy:function(){return l},XD:function(){return u},cz:function(){return c},hE:function(){return a},oK:function(){return s}});var r=t(76649),i=function(e){return"error"in e},s=function(e){return(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},o=function(e){return(0,r.Ln)({status:"number",data:{}},e)},a=function(e){return(0,r.Ln)({detail:"string"},e)},l=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},c=function(e){return(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},76649:function(e,n,t){"use strict";t.d(n,{Ln:function(){return r},uX:function(){return o}});const r=(e,n)=>s(e,n),i=Symbol("SOME"),s=(e,n)=>{if("string"==typeof e)return e===typeof n;if(Array.isArray(e))return i in e?e.some((e=>s(e,n))):!!Array.isArray(n)&&(0===e.length||n.every((n=>e.some((e=>s(e,n))))));if("object"!=typeof n||null===n)return!1;const t=n;return Object.entries(e).every((([e,n])=>s(n,t[e])))},o=e=>n=>r(e,n);class a{static narrow(e){return new a((n=>r(e,n)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const n=this.NF,t=e instanceof a?e.NF:e instanceof Function?e:n=>r(e,n);return new a((e=>n(e)&&t(e)))}}new a((e=>!0))}},function(e){e.O(0,[9774,2888,179],(function(){return n=53611,e(e.s=n);var n}));var n=e.O();_N_E=n}]);