(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{23663:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/configure/storage",function(){return n(61869)}])},1496:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(85034),i=n(70169),s=n(24246),a=n(83265),o=n(88038),u=n.n(o),c=n(86677),l=(n(27378),n(67447)),d=n(63076),f=n(93677),h=function(){var e=(0,c.useRouter)();return(0,s.jsx)(a.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,s.jsxs)(a.xuv,{children:[(0,s.jsxs)(a.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,s.jsx)(a.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,s.jsx)(a.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(f.fz)},children:"Configure"})]}),(0,s.jsxs)(a.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},v=function(e){var t=e.children,n=e.title,o=e.padded,f=void 0===o||o,v=e.mainProps,m=(0,l.hz)(),p=(0,c.useRouter)(),x="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,g=!(m.flags.privacyRequestsConfiguration&&x),j=(0,d.JE)(void 0,{skip:g}).data,y=(0,d.PW)(void 0,{skip:g}).data,b=m.flags.privacyRequestsConfiguration&&(!j||!y)&&x;return(0,s.jsxs)(a.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,s.jsxs)(u(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)(a.kCb,(0,i.Z)((0,r.Z)({as:"main",direction:"column",py:f?6:0,px:f?10:0,h:f?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},v),{children:[b?(0,s.jsx)(h,{}):null,t]}))]})}},32556:function(e,t,n){"use strict";n.d(t,{D4:function(){return i.D4},MM:function(){return h},Ot:function(){return u},c6:function(){return l},cj:function(){return m},e$:function(){return a},fn:function(){return o},iC:function(){return v},nU:function(){return f},tB:function(){return c}});var r=n(17599),i=n(32764),s="An unexpected error occurred. Please try again.",a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if((0,i.Bw)(e)){if((0,i.hE)(e.data))return e.data.detail;if((0,i.cz)(e.data)){var n,r=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null===r||void 0===r?void 0:r.msg,": ").concat(null===r||void 0===r?void 0:r.loc)}if(409===e.status&&(0,i.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,i.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function o(e){return"object"===typeof e&&null!=e&&"status"in e}function u(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function c(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var l,d,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:s};if((0,i.oK)(e))return{status:e.originalStatus,message:e.data};if((0,i.Bw)(e)){var n=e.status;return{status:n,message:a(e,t.message)}}return t},h=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))};!function(e){e.GVL="gvl",e.AC="gacp",e.COMPASS="compass"}(l||(l={}));var v=(d={},(0,r.Z)(d,l.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,r.Z)(d,l.AC,{label:"AC",fullName:"Google Additional Consent List"}),(0,r.Z)(d,l.COMPASS,{label:"",fullName:""}),d),m=function(e){var t=e.split(".")[0];return t===l.AC?l.AC:t===l.GVL?l.GVL:l.COMPASS}},23027:function(e,t,n){"use strict";n.d(t,{HK:function(){return s},VY:function(){return r.V},O3:function(){return o}});var r=n(95389),i=n(32556),s=function(){var e=(0,r.V)().errorAlert;return{handleError:function(t){var n="An unexpected error occurred. Please try again.";(0,i.Ot)(t)?n=t.data.detail:(0,i.tB)(t)&&(n=t.data.detail[0].msg),e(n)}}},a=n(27378),o=function(e){var t=(0,a.useRef)(void 0);return(0,a.useEffect)((function(){var n=function(n){var r;(null===(r=t.current)||void 0===r?void 0:r.contains(n.target))||e()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[t,e]),{ref:t}}},95389:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var r=n(85034),i=n(70169),s=n(24246),a=n(83265),o=function(){var e=(0,a.pmc)();return{errorAlert:function(t,n,o){var u=(0,i.Z)((0,r.Z)({},o),{position:(null===o||void 0===o?void 0:o.position)||"top",render:function(e){var r=e.onClose;return(0,s.jsxs)(a.bZj,{alignItems:"normal",status:"error",children:[(0,s.jsx)(a.zMQ,{}),(0,s.jsxs)(a.xuv,{children:[n&&(0,s.jsx)(a.CdC,{children:n}),(0,s.jsx)(a.XaZ,{children:t})]}),(0,s.jsx)(a.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});(null===o||void 0===o?void 0:o.id)&&e.isActive(o.id)?e.update(o.id,u):e(u)},successAlert:function(t,n,o){var u=(0,i.Z)((0,r.Z)({},o),{position:(null===o||void 0===o?void 0:o.position)||"top",render:function(e){var r=e.onClose;return(0,s.jsxs)(a.bZj,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,s.jsx)(a.zMQ,{}),(0,s.jsxs)(a.xuv,{children:[n&&(0,s.jsx)(a.CdC,{children:n}),(0,s.jsx)(a.XaZ,{children:t})]}),(0,s.jsx)(a.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}});(null===o||void 0===o?void 0:o.id)&&e.isActive(o.id)?e.update(o.id,u):e(u)}}}},22850:function(e,t,n){"use strict";n.d(t,{R:function(){return l}});var r=n(85034),i=n(70169),s=n(31373),a=n(24246),o=n(83265),u=n(79894),c=n.n(u),l=function(e){var t=e.onClick,n=(0,s.Z)(e,["onClick"]);return(0,a.jsxs)(o.kCb,(0,i.Z)((0,r.Z)({alignItems:"center",mt:-4,mb:3,onClick:t,cursor:"pointer"},n),{children:[(0,a.jsx)(o.hU,{"aria-label":"Back",icon:(0,a.jsx)(o.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,a.jsx)(o.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]}))};t.Z=function(e){var t=e.backPath,n=(0,s.Z)(e,["backPath"]);return(0,a.jsxs)(o.kCb,(0,i.Z)((0,r.Z)({alignItems:"center",mb:6},n),{children:[(0,a.jsx)(c(),{href:t,passHref:!0,children:(0,a.jsx)(o.hU,{"aria-label":"Back",icon:(0,a.jsx)(o.Rpv,{}),mr:2,size:"xs",variant:"outline"})}),(0,a.jsx)(c(),{href:t,passHref:!0,children:(0,a.jsx)(o.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},61932:function(e,t,n){"use strict";n.d(t,{DE:function(){return o},MP:function(){return i},qX:function(){return a},rE:function(){return s}});var r=n(10439),i=new Map([[r.q2.APPROVED,"Approved"],[r.q2.CANCELED,"Canceled"],[r.q2.COMPLETE,"Completed"],[r.q2.DENIED,"Denied"],[r.q2.ERROR,"Error"],[r.q2.IN_PROCESSING,"In Progress"],[r.q2.PENDING,"New"],[r.q2.PAUSED,"Paused"],[r.q2.IDENTITY_UNVERIFIED,"Unverified"],[r.q2.REQUIRES_INPUT,"Requires input"]]),s=new Map([[r.Us.ACCESS,"Access"],[r.Us.ERASURE,"Erasure"],[r.Us.CONSENT,"Consent"],[r.Us.UPDATE,"Update"]]),a={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},o={local:"local",s3:"s3"}},61869:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(24246),i=n(23842),s=n(52050),a=n(85556),o=n(83265),u=n(27378),c=n(32556),l=n(23027),d=n(1496),f=n(22850),h=n(93677),v=n(61932),m=n(63076),p=n(34090),x=n(56071),g=function(e){var t,n,d,f,h,g=e.storageDetails,j=(0,u.useState)(""),y=j[0],b=j[1],_=(0,s.Z)((0,m.gC)(),1)[0],C=(0,s.Z)((0,m.cf)(),1)[0],k=(0,l.HK)().handleError,E=(0,l.VY)().successAlert,S={type:v.DE.s3,auth_method:null!==(d=null===g||void 0===g||null===(t=g.details)||void 0===t?void 0:t.auth_method)&&void 0!==d?d:"",bucket:null!==(f=null===g||void 0===g||null===(n=g.details)||void 0===n?void 0:n.bucket)&&void 0!==f?f:"",format:null!==(h=null===g||void 0===g?void 0:g.format)&&void 0!==h?h:""},w=function(){var e=(0,i.Z)((function(e){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,_({type:v.DE.s3,details:{auth_method:e.auth_method,bucket:e.bucket},format:e.format})];case 1:return t=n.sent(),(0,c.D4)(t)?k(t.error):(b(e.auth_method),E("S3 storage credentials successfully updated.")),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,i.Z)((function(e){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,C({details:{aws_access_key_id:e.aws_access_key_id,aws_secret_access_key:e.aws_secret_access_key},type:v.DE.s3})];case 1:return t=n.sent(),(0,c.D4)(t)?k(t.error):E("S3 storage secrets successfully updated."),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"S3 storage configuration"}),(0,r.jsx)(o.Kqy,{children:(0,r.jsx)(p.J9,{initialValues:S,onSubmit:w,enableReinitialize:!0,children:function(e){var t=e.isSubmitting,n=e.handleReset;return(0,r.jsxs)(p.l0,{children:[(0,r.jsxs)(o.Kqy,{mt:5,spacing:5,children:[(0,r.jsx)(x.AP,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,r.jsx)(x.AP,{name:"auth_method",label:"Auth method",options:[{label:"secret_keys",value:"secret_keys"},{label:"automatic",value:"automatic"}],"data-testid":"auth_method",isRequired:!0}),(0,r.jsx)(x.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,r.jsx)(o.zxk,{onClick:function(){return n()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,r.jsx)(o.zxk,{mt:5,isDisabled:t,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})}})}),"secret_keys"===y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.izJ,{mt:5}),(0,r.jsx)(o.X6q,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,r.jsx)(o.Kqy,{children:(0,r.jsx)(p.J9,{initialValues:{aws_access_key_id:"",aws_secret_access_key:""},onSubmit:A,children:function(e){var t=e.isSubmitting,n=e.handleReset;return(0,r.jsxs)(p.l0,{children:[(0,r.jsxs)(o.Kqy,{mt:5,spacing:5,children:[(0,r.jsx)(x.j0,{name:"aws_access_key_id",label:"AWS access key ID"}),(0,r.jsx)(x.j0,{name:"aws_secret_access_key",label:"AWS secret access key",type:"password"})]}),(0,r.jsxs)(o.xuv,{mt:10,children:[(0,r.jsx)(o.zxk,{onClick:function(){return n()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,r.jsx)(o.zxk,{mt:5,isDisabled:t,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})]})}})})]}):null]})},j=function(){var e=(0,l.VY)().successAlert,t=(0,l.HK)().handleError,n=(0,u.useState)(""),p=n[0],x=n[1],j=(0,m.PW)().data,y=(0,m.Au)({type:p}).data,b=(0,s.Z)((0,m.gC)(),2),_=b[0],C=b[1].isLoading,k=(0,s.Z)((0,m.L)(),1)[0];(0,u.useEffect)((function(){j&&x(j.type)}),[j]);var E=function(){var n=(0,i.Z)((function(n){var r,i;return(0,a.__generator)(this,(function(s){switch(s.label){case 0:return n!==v.DE.local?[3,2]:[4,_({type:n,details:{},format:"json"})];case 1:r=s.sent(),(0,c.D4)(r)?t(r.error):e("Configured storage details successfully."),s.label=2;case 2:return[4,k({storage:{active_default_storage_type:n}})];case 3:return i=s.sent(),(0,c.D4)(i)?t(i.error):x(n),[2]}}))}));return function(e){return n.apply(this,arguments)}}();return(0,r.jsxs)(d.Z,{title:"Configure Privacy Requests - Storage",children:[(0,r.jsx)(f.Z,{backPath:h.fz}),(0,r.jsx)(o.X6q,{mb:5,fontSize:"2xl",fontWeight:"semibold",children:"Configure storage"}),(0,r.jsxs)(o.xuv,{display:"flex",flexDirection:"column",width:"50%",children:[(0,r.jsx)(o.xuv,{mb:5,children:"Fides requires a storage destination to store and share the results of privacy requests. For a production setup, it is highly recommended to have S3 as a storage destination. Ensure you have completed the setup for the storage destination and have the details handy prior to the following steps."}),(0,r.jsxs)(o.xuv,{children:["To configure a Storage destination, first choose a method to store your results. Fides currently supports"," ",(0,r.jsx)(o.xvT,{as:"span",color:"complimentary.500",children:"Local"})," ","and"," ",(0,r.jsx)(o.xvT,{as:"span",color:"complimentary.500",children:"S3"})," ","storage methods."]}),(0,r.jsx)(o.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Choose storage type to configure"}),(0,r.jsx)(o.FXm,{isDisabled:C,onChange:E,value:p,"data-testid":"privacy-requests-storage-selection",colorScheme:"secondary",p:3,children:(0,r.jsxs)(o.Kqy,{direction:"row",children:[(0,r.jsx)(o.Y8K,{value:"local","data-testid":"option-local",mr:5,children:"Local"},"local"),(0,r.jsx)(o.Y8K,{value:"s3","data-testid":"option-s3",children:"S3"},"s3")]})}),"s3"===p&&y?(0,r.jsx)(g,{storageDetails:y}):null]})]})},y=function(){return(0,r.jsx)(j,{})}},32764:function(e,t,n){"use strict";n.d(t,{Bw:function(){return a},D4:function(){return i},Dy:function(){return u},XD:function(){return c},cz:function(){return l},hE:function(){return o},oK:function(){return s}});var r=n(76649),i=function(e){return"error"in e},s=function(e){return(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},a=function(e){return(0,r.Ln)({status:"number",data:{}},e)},o=function(e){return(0,r.Ln)({detail:"string"},e)},u=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},c=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r},uX:function(){return a}});const r=(e,t)=>s(e,t),i=Symbol("SOME"),s=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return i in e?e.some((e=>s(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>s(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>s(t,n[e])))},a=e=>t=>r(e,t);class o{static narrow(e){return new o((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof o?e.NF:e instanceof Function?e:t=>r(e,t);return new o((e=>t(e)&&n(e)))}}new o((e=>!0))}},function(e){e.O(0,[9774,2888,179],(function(){return t=23663,e(e.s=t);var t}));var t=e.O();_N_E=t}]);