Metadata-Version: 2.1
Name: kweather-cord
Version: 0.0.1
Summary: Nice Embed Template for Korean Weather for Discord Bot
Home-page: https://github.com/Gooraeng/KweatherDiscord
Author: Gooraeng
Author-email: birdyoon1998@gmail.com
Keywords: koreaweather,kweather,공공데이터포털,기상청,discord,discord.py
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.8
Description-Content-Type: text/x-rst
License-File: LICENSE.txt
Requires-Dist: discord.py >=2.4.0
Requires-Dist: pydantic
Requires-Dist: rapidfuzz

KweatherDiscord
===============

- KweatherDiscord은 대한민국 기상청 API을 이용하여 날씨를 Embed, Button, Select Menu를 이용하여 확인하는 간단한 도구입니다.


파이썬 요구 사항
------------------

.. note::
   - Python 3.8 이상에서 작동합니다.


의존 패키지
----------------
- Discord.py (2.4.0 이상)
- pydantic
- RapidFuzz

설치 방법
--------------

.. code:: sh

    pip install kweatherdiscord


제한 사항
-------------
- 이 패키지는 discord.py의 Interaction 모듈(Slash command)이 사용되어야 합니다. "commands.Context"는 사용하시면 안 됩니다.


사용 예시
-------------

1. bot.py
~~~~~~~~~~~~

.. code:: py

    from aiohttp import ClientSession
    from discord.ext import commands

    import asyncio
    import discord


    initial_extensions = (
        'cogs.weather'
    )


    class BotTest(commands.Bot):
        def __init__(self):
            intents = discord.Intents.default()
            super().__init__(
                command_prefix='!',
                intents=intents
            )
        
        async def setup_hook(self):
            # aiohttp 사용을 위한 선언 (동기 함수에서 선언할 수 없습니다.)
            self.session = ClientSession()
            for extension in initial_extensions:
                try:
                    await self.load_extension(extension)
                except Exception:
                    pass
        
        async def on_ready(self):
            ...
            # on_ready에서 사용해도 되나, 이 함수에서 복잡한 작업은 권장되지 않습니다.
            # 따라서, setup_hook 함수 내에서 이루어지는 것이 좋습니다.


    async def main():
        async with BotTest() as bot:
            # 토큰 넣기
            await bot.start()


    if __name__ == "__main__":
        asyncio.run(main())

2. cog.weather
~~~~~~~~~~~~~~~~

.. code:: py

    from discord import app_commands, Interaction
    from discord.ext import commands
    from typing import TYPE_CHECKING, Literal
    # import 경로에 따라 적절하게 조절해야 합니다
    from KweatherDiscord import KoreaForecastForDiscord

    if TYPE_CHECKING:
        from bot_example import BotTest


    class Weather(commands.Cog):
        def __init__(self, bot : BotTest):
            self.bot = bot
            # "setup_hook 함수 내"에서 선언할 수 있다면 상관없습니다.
            self.weather = KoreaForecastForDiscord(self.bot)
        
        # commands.Context는 사용하지 않습니다.
        @app_commands.command(name='날씨', description='지역의 날씨를 찾아보세요')
        @app_commands.describe(
            where='어느 지역의 날씨를 검색하실 건가요?',
            period='어떤 검색 방식을 이용하실 건가요?'
        )
        @app_commands.rename(where='지역', period='기간')
        async def search(self, interaction : Interaction, where : str, period : Literal['지금', '향후 6시간', '향후 3~4일']):
            try:
                if period == '지금':
                    method = '초단기실황'  # 수정: '=='를 '='로 변경
                elif period == '향후 3~4일':
                    method = '단기예보'
                else:
                    method = '초단기예보'
                await self.weather.get_weather(interaction, method=method, city=where)
                
            except Exception:
                ...

    async def setup(bot : BotTest):
        await bot.add_cog(Weather(bot))


링크
--------

- `대한민국 기상청 API <https://www.data.go.kr/tcs/dss/selectApiDataDetailView.do?publicDataPk=15084084>`_
