"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([[7991],{87545:function(e,t,n){n.d(t,{z:function(){return r}});var i=n(67234),r=(n(650),n(68113),n(58971),function(e){if(void 0!==e){if("object"!==(0,i.A)(e)){if("string"==typeof e||isNaN(e)){var t=(null==e?void 0:e.toString().split(":"))||[];if(1===t.length)return{seconds:Number(t[0])};if(t.length>3)return;var n=Number(t[2])||0,r=Math.floor(n);return{hours:Number(t[0])||0,minutes:Number(t[1])||0,seconds:r,milliseconds:Math.floor(1e3*(n-r))}}return{seconds:e}}if(!("days"in e))return e;var o=e.days,a=e.minutes,u=e.seconds,c=e.milliseconds,s=e.hours||0;return{hours:s=(s||0)+24*(o||0),minutes:a,seconds:u,milliseconds:c}}})},56591:function(e,t,n){n.d(t,{a:function(){return r}});n(77052);var i=function(e){return e<10?"0".concat(e):e},r=function(e,t){var n=t.days||0,r=t.hours||0,o=t.minutes||0,a=t.seconds||0,u=t.milliseconds||0;return n>0?"".concat(Intl.NumberFormat(e.language,{style:"unit",unit:"day",unitDisplay:"long"}).format(n)," ").concat(r,":").concat(i(o),":").concat(i(a)):r>0?"".concat(r,":").concat(i(o),":").concat(i(a)):o>0?"".concat(o,":").concat(i(a)):a>0?Intl.NumberFormat(e.language,{style:"unit",unit:"second",unitDisplay:"long"}).format(a):u>0?Intl.NumberFormat(e.language,{style:"unit",unit:"millisecond",unitDisplay:"long"}).format(u):null}},53935:function(e,t,n){n.d(t,{A:function(){return r}});n(77052);var i=function(e){return e<10?"0".concat(e):e};function r(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return t>0?"".concat(t,":").concat(i(n),":").concat(i(r)):n>0?"".concat(n,":").concat(i(r)):r>0?""+r:null}},67905:function(e,t,n){n.d(t,{I:function(){return u}});var i=n(89231),r=n(36683),o=(n(75658),n(71936),n(60060),n(59092),n(43859),n(1158),n(68113),n(66274),n(84531),n(32877),n(34290),function(){return(0,r.A)((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.localStorage;(0,i.A)(this,e),this.storage=void 0,this._storage={},this._listeners={},this.storage=n,n===window.localStorage&&window.addEventListener("storage",(function(e){e.key&&t.hasKey(e.key)&&(t._storage[e.key]=e.newValue?JSON.parse(e.newValue):e.newValue,t._listeners[e.key]&&t._listeners[e.key].forEach((function(n){return n(e.oldValue?JSON.parse(e.oldValue):e.oldValue,t._storage[e.key])})))}))}),[{key:"addFromStorage",value:function(e){if(!this._storage[e]){var t=this.storage.getItem(e);t&&(this._storage[e]=JSON.parse(t))}}},{key:"subscribeChanges",value:function(e,t){var n=this;return this._listeners[e]?this._listeners[e].push(t):this._listeners[e]=[t],function(){n.unsubscribeChanges(e,t)}}},{key:"unsubscribeChanges",value:function(e,t){if(e in this._listeners){var n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}}},{key:"hasKey",value:function(e){return e in this._storage}},{key:"getValue",value:function(e){return this._storage[e]}},{key:"setValue",value:function(e,t){var n=this._storage[e];this._storage[e]=t;try{void 0===t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify(t))}catch(i){}finally{this._listeners[e]&&this._listeners[e].forEach((function(e){return e(n,t)}))}}}])}()),a={},u=function(e){return function(t){var n,i=e.storage||"localStorage";i&&i in a?n=a[i]:(n=new o(window[i]),a[i]=n);var r=String(t.key),u=e.key||String(t.key),c=t.initializer?t.initializer():void 0;n.addFromStorage(u);var s=!1!==e.subscribe?function(e){return n.subscribeChanges(u,(function(n,i){e.requestUpdate(t.key,n)}))}:void 0,l=function(){return n.hasKey(u)?e.deserializer?e.deserializer(n.getValue(u)):n.getValue(u):c};return{kind:"method",placement:"prototype",key:t.key,descriptor:{set:function(i){!function(i,r){var o;e.state&&(o=l()),n.setValue(u,e.serializer?e.serializer(r):r),e.state&&i.requestUpdate(t.key,o)}(this,i)},get:function(){return l()},enumerable:!0,configurable:!0},finisher:function(n){if(e.state&&e.subscribe){var i=n.prototype.connectedCallback,o=n.prototype.disconnectedCallback;n.prototype.connectedCallback=function(){i.call(this),this["__unbsubLocalStorage".concat(r)]=null==s?void 0:s(this)},n.prototype.disconnectedCallback=function(){var e;o.call(this),null===(e=this["__unbsubLocalStorage".concat(r)])||void 0===e||e.call(this),this["__unbsubLocalStorage".concat(r)]=void 0}}e.state&&n.createProperty(t.key,Object.assign({noAccessor:!0},e.stateOptions))}}}}},11519:function(e,t,n){n.d(t,{e:function(){return i}});var i=function(e){return"latitude"in e.attributes&&"longitude"in e.attributes}},68873:function(e,t,n){n.d(t,{a:function(){return o}});n(53501);var i=n(6601),r=n(19263);function o(e,t){var n=(0,r.m)(e.entity_id),o=void 0!==t?t:null==e?void 0:e.state;if(["button","event","input_button","scene"].includes(n))return o!==i.Hh;if((0,i.g0)(o))return!1;if(o===i.KF&&"alert"!==n)return!1;switch(n){case"alarm_control_panel":return"disarmed"!==o;case"alert":return"idle"!==o;case"cover":case"valve":return"closed"!==o;case"device_tracker":case"person":return"not_home"!==o;case"lawn_mower":return["mowing","error"].includes(o);case"lock":return"locked"!==o;case"media_player":return"standby"!==o;case"vacuum":return!["idle","docked","paused"].includes(o);case"plant":return"problem"===o;case"group":return["on","home","open","locked","problem"].includes(o);case"timer":return"active"===o;case"camera":return"streaming"===o}return!0}},76201:function(e,t,n){n.d(t,{c:function(){return r},q:function(){return o}});var i=n(45081),r=function(e,t){return a(e).format(t)},o=function(e,t){return u(e).format(t)},a=(0,i.A)((function(e){return new Intl.ListFormat(e.language,{style:"long",type:"conjunction"})})),u=(0,i.A)((function(e){return new Intl.ListFormat(e.language,{style:"long",type:"disjunction"})}))},78226:function(e,t,n){n.d(t,{_:function(){return o}});var i=n(66123),r=(n(53156),n(71936),n(59092),n(26777),n(73842),n(63428)),o=function(e,t){if(!(t instanceof r.C5))return{warnings:[t.message],errors:void 0};var n,o=[],a=[],u=(0,i.A)(t.failures());try{for(u.s();!(n=u.n()).done;){var c=n.value;if(void 0===c.value)o.push(e.localize("ui.errors.config.key_missing",{key:c.path.join(".")}));else if("never"===c.type)a.push(e.localize("ui.errors.config.key_not_expected",{key:c.path.join(".")}));else{if("union"===c.type)continue;"enums"===c.type?a.push(e.localize("ui.errors.config.key_wrong_type",{key:c.path.join("."),type_correct:c.message.replace("Expected ","").split(", ")[0],type_wrong:JSON.stringify(c.value)})):a.push(e.localize("ui.errors.config.key_wrong_type",{key:c.path.join("."),type_correct:c.refinement||c.type,type_wrong:JSON.stringify(c.value)}))}}}catch(t){u.e(t)}finally{u.f()}return{warnings:a,errors:o}}},4449:function(e,t,n){n.d(t,{w:function(){return o}});n(22481);var i=n(95803);n(19954),n(60060),n(43859),n(68113),n(66274),n(91078);function r(e,t,n){return t.reduce((function(e,t,i,r){if(void 0!==e){if(!e[t]&&n){var o=r[i+1];e[t]=void 0===o||"number"==typeof o?[]:{}}return e[t]}}),e)}function o(e,t,n,o,a){var u=Array.isArray(e)?(0,i.A)(e):Object.assign({},e),c=o?r(u,o):u,s=a?r(u,a,!0):u;if(!Array.isArray(c)||!Array.isArray(s))return e;var l=c.splice(t,1)[0];return s.splice(n,0,l),u}},82358:function(e,t,n){n.d(t,{V:function(){return O}});var i,r,o,a,u,c=n(22481),s=n(94881),l=n(1781),d=n(6238),f=n(36683),v=n(89231),h=n(29864),y=n(83647),m=n(8364),p=n(76504),_=n(80792),g=(n(77052),n(34186),n(53501),n(36724),n(14460),n(43859),n(98168),n(26349)),b=(n(23981),n(98597)),k=n(196),A=n(33167),z=n(54671),w=n(95336),x=(n(96334),"NO_AUTOMATION"),q="UNKNOWN_AUTOMATION",O=(0,m.A)(null,(function(e,t){var n,m=function(t){function n(t,i,r){var o;return(0,v.A)(this,n),o=(0,h.A)(this,n),e(o),o._localizeDeviceAutomation=t,o._fetchDeviceAutomations=i,o._createNoAutomation=r,o}return(0,y.A)(n,t),(0,f.A)(n)}(t);return{F:m,d:[{kind:"field",decorators:[(0,k.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,k.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,k.MZ)()],key:"deviceId",value:void 0},{kind:"field",decorators:[(0,k.MZ)({type:Object})],key:"value",value:void 0},{kind:"field",decorators:[(0,k.wk)()],key:"_automations",value:function(){return[]}},{kind:"field",decorators:[(0,k.wk)()],key:"_renderEmpty",value:function(){return!1}},{kind:"field",decorators:[(0,k.wk)(),(0,g.Fg)({context:z.ih,subscribe:!0})],key:"_entityReg",value:void 0},{kind:"get",key:"NO_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.actions.no_actions")}},{kind:"get",key:"UNKNOWN_AUTOMATION_TEXT",value:function(){return this.hass.localize("ui.panel.config.devices.automation.actions.unknown_action")}},{kind:"field",key:"_localizeDeviceAutomation",value:void 0},{kind:"field",key:"_fetchDeviceAutomations",value:void 0},{kind:"field",key:"_createNoAutomation",value:void 0},{kind:"get",key:"_value",value:function(){var e=this;if(!this.value)return"";if(!this._automations.length)return x;var t=this._automations.findIndex((function(t){return(0,w.Po)(e._entityReg,t,e.value)}));return-1===t?q:"".concat(this._automations[t].device_id,"_").concat(t)}},{kind:"method",key:"render",value:function(){var e=this;if(this._renderEmpty)return b.s6;var t=this._value;return(0,b.qy)(i||(i=(0,d.A)(["\n      <ha-select\n        .label=","\n        .value=","\n        @selected=","\n        .disabled=","\n      >\n        ","\n        ","\n        ","\n      </ha-select>\n    "])),this.label,t,this._automationChanged,0===this._automations.length,t===x?(0,b.qy)(r||(r=(0,d.A)(["<mwc-list-item .value=",">\n              ","\n            </mwc-list-item>"])),x,this.NO_AUTOMATION_TEXT):"",t===q?(0,b.qy)(o||(o=(0,d.A)(["<mwc-list-item .value=",">\n              ","\n            </mwc-list-item>"])),q,this.UNKNOWN_AUTOMATION_TEXT):"",this._automations.map((function(t,n){return(0,b.qy)(a||(a=(0,d.A)(["\n            <mwc-list-item .value=",">\n              ","\n            </mwc-list-item>\n          "])),"".concat(t.device_id,"_").concat(n),e._localizeDeviceAutomation(e.hass,e._entityReg,t))})))}},{kind:"method",key:"updated",value:function(e){(0,p.A)((0,_.A)(m.prototype),"updated",this).call(this,e),e.has("deviceId")&&this._updateDeviceInfo()}},{kind:"method",key:"_updateDeviceInfo",value:(n=(0,l.A)((0,s.A)().mark((function e(){return(0,s.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.deviceId){e.next=6;break}return e.next=3,this._fetchDeviceAutomations(this.hass,this.deviceId);case 3:e.t0=e.sent.sort(w.RK),e.next=7;break;case 6:e.t0=[];case 7:return this._automations=e.t0,this.value&&this.value.device_id===this.deviceId||this._setValue(this._automations.length?this._automations[0]:this._createNoAutomation(this.deviceId)),this._renderEmpty=!0,e.next=12,this.updateComplete;case 12:this._renderEmpty=!1;case 13:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_automationChanged",value:function(e){var t=e.target.value;if(t&&![q,x].includes(t)){var n=t.split("_"),i=(0,c.A)(n,2),r=i[0],o=i[1],a=this._automations[o];a.device_id===r&&this._setValue(a)}}},{kind:"method",key:"_setValue",value:function(e){if(!this.value||!(0,w.Po)(this._entityReg,e,this.value)){var t=Object.assign({},e);delete t.metadata,(0,A.r)(this,"value-changed",{value:t})}}},{kind:"get",static:!0,key:"styles",value:function(){return(0,b.AH)(u||(u=(0,d.A)(["\n      ha-select {\n        display: block;\n      }\n    "])))}}]}}),b.WF)},87190:function(e,t,n){var i,r,o=n(94881),a=n(1781),u=n(36683),c=n(89231),s=n(29864),l=n(83647),d=n(8364),f=n(6238),v=(n(77052),n(69466),n(53501),n(36724),n(14460),n(848),n(68113),n(84368),n(34517),n(66274),n(38129),n(85038),n(98168),n(22836),n(98597)),h=n(196),y=n(45081),m=n(33167),p=n(19263),_=n(66412),g=n(38848),b=n(71378),k=(n(66442),n(9484),function(e){return(0,v.qy)(i||(i=(0,f.A)(["<ha-list-item .twoline=",">\n    <span>",'</span>\n    <span slot="secondary">',"</span>\n  </ha-list-item>"])),!!e.area,e.name,e.area)});(0,d.A)([(0,h.EM)("ha-device-picker")],(function(e,t){var n,i,d=function(t){function n(){var t;(0,c.A)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=(0,s.A)(this,n,[].concat(r)),e(t),t}return(0,l.A)(n,t),(0,u.A)(n)}(t);return{F:d,d:[{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,h.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,h.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,h.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,h.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,h.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,h.MZ)({type:Array,attribute:"exclude-devices"})],key:"excludeDevices",value:void 0},{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"deviceFilter",value:void 0},{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,h.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,h.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,h.wk)()],key:"_opened",value:void 0},{kind:"field",decorators:[(0,h.P)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"field",key:"_init",value:function(){return!1}},{kind:"field",key:"_getDevices",value:function(){var e=this;return(0,y.A)((function(t,n,i,r,o,a,u,c,s){if(!t.length)return[{id:"no_devices",area:"",name:e.hass.localize("ui.components.device-picker.no_devices"),strings:[]}];var l={};(r||o||a||c)&&(l=(0,b.g2)(i));var d=t.filter((function(t){return t.id===e.value||!t.disabled_by}));r&&(d=d.filter((function(e){var t=l[e.id];return!(!t||!t.length)&&l[e.id].some((function(e){return r.includes((0,p.m)(e.entity_id))}))}))),o&&(d=d.filter((function(e){var t=l[e.id];return!t||!t.length||i.every((function(e){return!o.includes((0,p.m)(e.entity_id))}))}))),s&&(d=d.filter((function(e){return!s.includes(e.id)}))),a&&(d=d.filter((function(t){var n=l[t.id];return!(!n||!n.length)&&l[t.id].some((function(t){var n=e.hass.states[t.entity_id];return!!n&&(n.attributes.device_class&&a.includes(n.attributes.device_class))}))}))),c&&(d=d.filter((function(t){var n=l[t.id];return!(!n||!n.length)&&n.some((function(t){var n=e.hass.states[t.entity_id];return!!n&&c(n)}))}))),u&&(d=d.filter((function(t){return t.id===e.value||u(t)})));var f=d.map((function(t){var i=(0,b.xn)(t,e.hass,l[t.id]);return{id:t.id,name:i,area:t.area_id&&n[t.area_id]?n[t.area_id].name:e.hass.localize("ui.components.device-picker.no_area"),strings:[i||""]}}));return f.length?1===f.length?f:f.sort((function(t,n){return(0,_.x)(t.name||"",n.name||"",e.hass.locale.language)})):[{id:"no_devices",area:"",name:e.hass.localize("ui.components.device-picker.no_match"),strings:[]}]}))}},{kind:"method",key:"open",value:(i=(0,a.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.open();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"focus",value:(n=(0,a.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.focus();case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"updated",value:function(e){if(!this._init&&this.hass||this._init&&e.has("_opened")&&this._opened){this._init=!0;var t=this._getDevices(Object.values(this.hass.devices),this.hass.areas,Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeDevices);this.comboBox.items=t,this.comboBox.filteredItems=t}}},{kind:"method",key:"render",value:function(){return(0,v.qy)(r||(r=(0,f.A)(["\n      <ha-combo-box\n        .hass=","\n        .label=","\n        .value=","\n        .helper=","\n        .renderer=","\n        .disabled=","\n        .required=",'\n        item-id-path="id"\n        item-value-path="id"\n        item-label-path="name"\n        @opened-changed=',"\n        @value-changed=","\n        @filter-changed=","\n      ></ha-combo-box>\n    "])),this.hass,void 0===this.label&&this.hass?this.hass.localize("ui.components.device-picker.device"):this.label,this._value,this.helper,k,this.disabled,this.required,this._openedChanged,this._deviceChanged,this._filterChanged)}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_filterChanged",value:function(e){var t=e.target,n=e.detail.value.toLowerCase();t.filteredItems=n.length?(0,g.H)(n,t.items||[]):t.items}},{kind:"method",key:"_deviceChanged",value:function(e){e.stopPropagation();var t=e.detail.value;"no_devices"===t&&(t=""),t!==this._value&&this._setValue(t)}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_setValue",value:function(e){var t=this;this.value=e,setTimeout((function(){(0,m.r)(t,"value-changed",{value:e}),(0,m.r)(t,"change")}),0)}}]}}),v.WF)},80920:function(e,t,n){var i,r,o=n(6238),a=n(36683),u=n(89231),c=n(29864),s=n(83647),l=n(8364),d=n(76504),f=n(80792),v=(n(77052),n(650),n(68113),n(58177),n(42416),n(66274),n(84531),n(34290),n(27350),n(98597)),h=n(196),y=n(10),m=n(22994);(0,l.A)([(0,h.EM)("ha-button-menu")],(function(e,t){var n=function(t){function n(){var t;(0,u.A)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=(0,c.A)(this,n,[].concat(r)),e(t),t}return(0,s.A)(n,t),(0,a.A)(n)}(t);return{F:n,d:[{kind:"field",key:m.Xr,value:void 0},{kind:"field",decorators:[(0,h.MZ)()],key:"corner",value:function(){return"BOTTOM_START"}},{kind:"field",decorators:[(0,h.MZ)()],key:"menuCorner",value:function(){return"START"}},{kind:"field",decorators:[(0,h.MZ)({type:Number})],key:"x",value:function(){return null}},{kind:"field",decorators:[(0,h.MZ)({type:Number})],key:"y",value:function(){return null}},{kind:"field",decorators:[(0,h.MZ)({type:Boolean})],key:"multi",value:function(){return!1}},{kind:"field",decorators:[(0,h.MZ)({type:Boolean})],key:"activatable",value:function(){return!1}},{kind:"field",decorators:[(0,h.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,h.MZ)({type:Boolean})],key:"fixed",value:function(){return!1}},{kind:"field",decorators:[(0,h.MZ)({type:Boolean,attribute:"no-anchor"})],key:"noAnchor",value:function(){return!1}},{kind:"field",decorators:[(0,h.P)("mwc-menu",!0)],key:"_menu",value:void 0},{kind:"get",key:"items",value:function(){var e;return null===(e=this._menu)||void 0===e?void 0:e.items}},{kind:"get",key:"selected",value:function(){var e;return null===(e=this._menu)||void 0===e?void 0:e.selected}},{kind:"method",key:"focus",value:function(){var e,t;null!==(e=this._menu)&&void 0!==e&&e.open?this._menu.focusItemAtIndex(0):null===(t=this._triggerButton)||void 0===t||t.focus()}},{kind:"method",key:"render",value:function(){return(0,v.qy)(i||(i=(0,o.A)(["\n      <div @click=",'>\n        <slot name="trigger" @slotchange=',"></slot>\n      </div>\n      <mwc-menu\n        .corner=","\n        .menuCorner=","\n        .fixed=","\n        .multi=","\n        .activatable=","\n        .y=","\n        .x=","\n      >\n        <slot></slot>\n      </mwc-menu>\n    "])),this._handleClick,this._setTriggerAria,this.corner,this.menuCorner,this.fixed,this.multi,this.activatable,this.y,this.x)}},{kind:"method",key:"firstUpdated",value:function(e){var t=this;(0,d.A)((0,f.A)(n.prototype),"firstUpdated",this).call(this,e),"rtl"===y.G.document.dir&&this.updateComplete.then((function(){t.querySelectorAll("mwc-list-item").forEach((function(e){var t=document.createElement("style");t.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",e.shadowRoot.appendChild(t)}))}))}},{kind:"method",key:"_handleClick",value:function(){this.disabled||(this._menu.anchor=this.noAnchor?null:this,this._menu.show())}},{kind:"get",key:"_triggerButton",value:function(){return this.querySelector('ha-icon-button[slot="trigger"], mwc-button[slot="trigger"]')}},{kind:"method",key:"_setTriggerAria",value:function(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,v.AH)(r||(r=(0,o.A)(["\n      :host {\n        display: inline-block;\n        position: relative;\n      }\n      ::slotted([disabled]) {\n        color: var(--disabled-text-color);\n      }\n    "])))}}]}}),v.WF)},93259:function(e,t,n){var i,r,o,a,u,c,s,l,d,f=n(23141),v=n(22481),h=n(6238),y=n(94881),m=n(66123),p=n(1781),_=n(36683),g=n(89231),b=n(29864),k=n(83647),A=n(8364),z=n(76504),w=n(80792),x=(n(77052),n(21950),n(36724),n(848),n(43859),n(21968),n(68113),n(55888),n(56262),n(66274),n(84531),n(98168),n(34290),n(8339),n(98597)),q=n(196),O=n(90662),M=n(33167),N=(n(91074),n(52631),{boolean:function(){return n.e(7150).then(n.bind(n,47150))},constant:function(){return n.e(3908).then(n.bind(n,73908))},float:function(){return n.e(2292).then(n.bind(n,82292))},grid:function(){return n.e(6880).then(n.bind(n,96880))},expandable:function(){return n.e(6048).then(n.bind(n,66048))},integer:function(){return n.e(3172).then(n.bind(n,73172))},multi_select:function(){return n.e(5494).then(n.bind(n,95494))},positive_time_period_dict:function(){return Promise.all([n.e(6759),n.e(8590)]).then(n.bind(n,38590))},select:function(){return n.e(3644).then(n.bind(n,73644))},string:function(){return n.e(9345).then(n.bind(n,39345))}}),S=function(e,t){return e?t.name?e[t.name]:e:null};(0,A.A)([(0,q.EM)("ha-form")],(function(e,t){var n,A=function(t){function n(){var t;(0,g.A)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=(0,b.A)(this,n,[].concat(r)),e(t),t}return(0,k.A)(n,t),(0,_.A)(n)}(t);return{F:A,d:[{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"schema",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"error",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"warning",value:void 0},{kind:"field",decorators:[(0,q.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"computeError",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"computeWarning",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"computeLabel",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"computeHelper",value:void 0},{kind:"field",decorators:[(0,q.MZ)({attribute:!1})],key:"localizeValue",value:void 0},{kind:"method",key:"getFormProperties",value:function(){return{}}},{kind:"method",key:"focus",value:(n=(0,p.A)((0,y.A)().mark((function e(){var t,n,i,r;return(0,y.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:if(t=this.renderRoot.querySelector(".root")){e.next=5;break}return e.abrupt("return");case 5:n=(0,m.A)(t.children),e.prev=6,n.s();case 8:if((i=n.n()).done){e.next=18;break}if("HA-ALERT"===(r=i.value).tagName){e.next=16;break}if(!(r instanceof x.mN)){e.next=14;break}return e.next=14,r.updateComplete;case 14:return r.focus(),e.abrupt("break",18);case 16:e.next=8;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),n.e(e.t0);case 23:return e.prev=23,n.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[6,20,23,26]])}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"willUpdate",value:function(e){e.has("schema")&&this.schema&&this.schema.forEach((function(e){var t;"selector"in e||null===(t=N[e.type])||void 0===t||t.call(N)}))}},{kind:"method",key:"render",value:function(){var e=this;return(0,x.qy)(i||(i=(0,h.A)(['\n      <div class="root" part="root">\n        ',"\n        ","\n      </div>\n    "])),this.error&&this.error.base?(0,x.qy)(r||(r=(0,h.A)(['\n              <ha-alert alert-type="error">\n                ',"\n              </ha-alert>\n            "])),this._computeError(this.error.base,this.schema)):"",this.schema.map((function(t){var n,i=function(e,t){return e&&t.name?e[t.name]:null}(e.error,t),r=function(e,t){return e&&t.name?e[t.name]:null}(e.warning,t);return(0,x.qy)(o||(o=(0,h.A)(["\n            ","\n            ","\n          "])),i?(0,x.qy)(a||(a=(0,h.A)(['\n                  <ha-alert own-margin alert-type="error">\n                    ',"\n                  </ha-alert>\n                "])),e._computeError(i,t)):r?(0,x.qy)(u||(u=(0,h.A)(['\n                    <ha-alert own-margin alert-type="warning">\n                      ',"\n                    </ha-alert>\n                  "])),e._computeWarning(r,t)):"","selector"in t?(0,x.qy)(c||(c=(0,h.A)(["<ha-selector\n                  .schema=","\n                  .hass=","\n                  .name=","\n                  .selector=","\n                  .value=","\n                  .label=","\n                  .disabled=","\n                  .placeholder=","\n                  .helper=","\n                  .localizeValue=","\n                  .required=","\n                  .context=","\n                ></ha-selector>"])),t,e.hass,t.name,t.selector,S(e.data,t),e._computeLabel(t,e.data),t.disabled||e.disabled||!1,t.required?"":t.default,e._computeHelper(t),e.localizeValue,t.required||!1,e._generateContext(t)):(0,O._)(e.fieldElementName(t.type),Object.assign({schema:t,data:S(e.data,t),label:e._computeLabel(t,e.data),helper:e._computeHelper(t),disabled:e.disabled||t.disabled||!1,hass:e.hass,localize:null===(n=e.hass)||void 0===n?void 0:n.localize,computeLabel:e.computeLabel,computeHelper:e.computeHelper,context:e._generateContext(t)},e.getFormProperties())))})))}},{kind:"method",key:"fieldElementName",value:function(e){return"ha-form-".concat(e)}},{kind:"method",key:"_generateContext",value:function(e){if(e.context){for(var t={},n=0,i=Object.entries(e.context);n<i.length;n++){var r=(0,v.A)(i[n],2),o=r[0],a=r[1];t[o]=this.data[a]}return t}}},{kind:"method",key:"createRenderRoot",value:function(){var e=(0,z.A)((0,w.A)(A.prototype),"createRenderRoot",this).call(this);return this.addValueChangedListener(e),e}},{kind:"method",key:"addValueChangedListener",value:function(e){var t=this;e.addEventListener("value-changed",(function(e){e.stopPropagation();var n=e.target.schema;if(e.target!==t){var i=n.name?(0,f.A)({},n.name,e.detail.value):e.detail.value;t.data=Object.assign(Object.assign({},t.data),i),(0,M.r)(t,"value-changed",{value:t.data})}}))}},{kind:"method",key:"_computeLabel",value:function(e,t){return this.computeLabel?this.computeLabel(e,t):e?e.name:""}},{kind:"method",key:"_computeHelper",value:function(e){return this.computeHelper?this.computeHelper(e):""}},{kind:"method",key:"_computeError",value:function(e,t){var n=this;return Array.isArray(e)?(0,x.qy)(s||(s=(0,h.A)(["<ul>\n        ","\n      </ul>"])),e.map((function(e){return(0,x.qy)(l||(l=(0,h.A)(["<li>\n              ","\n            </li>"])),n.computeError?n.computeError(e,t):e)}))):this.computeError?this.computeError(e,t):e}},{kind:"method",key:"_computeWarning",value:function(e,t){return this.computeWarning?this.computeWarning(e,t):e}},{kind:"get",static:!0,key:"styles",value:function(){return(0,x.AH)(d||(d=(0,h.A)(["\n      .root > * {\n        display: block;\n      }\n      .root > *:not([own-margin]):not(:last-child) {\n        margin-bottom: 24px;\n      }\n      ha-alert[own-margin] {\n        margin-bottom: 4px;\n      }\n    "])))}}]}}),x.WF)},61792:function(e,t,n){n.d(t,{Hg:function(){return i},e0:function(){return r}});n(94881),n(1781),n(70598),n(77052),n(53501),n(36724),n(848),n(59092),n(43859),n(68113),n(55888),n(3359),n(34517),n(98168),"".concat(location.protocol,"//").concat(location.host);var i=function(e){return e.map((function(e){if("string"!==e.type)return e;switch(e.name){case"username":return Object.assign(Object.assign({},e),{},{autocomplete:"username"});case"password":return Object.assign(Object.assign({},e),{},{autocomplete:"current-password"});case"code":return Object.assign(Object.assign({},e),{},{autocomplete:"one-time-code"});default:return e}}))},r=function(e,t){return e.callWS({type:"auth/sign_path",path:t})}},61673:function(e,t,n){n.d(t,{Dp:function(){return r},S9:function(){return o},XF:function(){return i}});n(43859),n(13314);var i=function(e){if("condition"in e&&Array.isArray(e.condition))return{condition:"and",conditions:e.condition};for(var t=0,n=["and","or","not"];t<n.length;t++){var i=n[t];if(i in e)return{condition:i,conditions:e[i]}}return e},r=function(e,t,n,i){return e.connection.subscribeMessage(t,{type:"subscribe_trigger",trigger:n,variables:i})},o=function(e,t,n){return e.callWS({type:"test_condition",condition:t,variables:n})}},28712:function(e,t,n){n.d(t,{g:function(){return m},p:function(){return _}});var i=n(66123),r=(n(54317),n(77052),n(53501),n(21950),n(36724),n(71936),n(59092),n(650),n(68113),n(43618),n(26777),n(58971),n(54895),n(34517),n(47711),n(97754),n(98168),n(8339),n(96041)),o=n(56591),a=n(13634),u=n(53935),c=n(97995),s=n(91330),l=n(95336),d=n(76201),f="ui.panel.config.automation.editor.triggers.type",v="ui.panel.config.automation.editor.conditions.type",h=function(e,t){return"number"==typeof t?(0,u.A)(t):"string"==typeof t?t:(0,o.a)(e,t)},y=function(e,t,n){var i=e.split(":");if(i.length<2||i.length>3)return e;try{var r=new Date("1970-01-01T"+e);return 2===i.length||0===Number(i[2])?(0,a.fU)(r,t,n):(0,a.ie)(r,t,n)}catch(o){return e}},m=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{return p(e,t,n,i)}catch(o){console.error(o);var r="Error in describing trigger";return o.message&&(r+=": "+o.message),r}},p=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.alias&&!o)return e.alias;if("event"===e.platform&&e.event_type){var a=[];if(Array.isArray(e.event_type)){var v,m=(0,i.A)(e.event_type.values());try{for(m.s();!(v=m.n()).done;){var p=v.value;a.push(p)}}catch(je){m.e(je)}finally{m.f()}}else a.push(e.event_type);var _=(0,d.q)(t.locale,a);return t.localize("".concat(f,".event.description.full"),{eventTypes:_})}if("homeassistant"===e.platform&&e.event)return t.localize("start"===e.event?"".concat(f,".homeassistant.description.started"):"".concat(f,".homeassistant.description.shutdown"));if("numeric_state"===e.platform&&e.entity_id){var g=[],b=t.states,k=Array.isArray(e.entity_id)?t.states[e.entity_id[0]]:t.states[e.entity_id];if(Array.isArray(e.entity_id)){var A,z=(0,i.A)(e.entity_id.values());try{for(z.s();!(A=z.n()).done;){var w=A.value;b[w]&&g.push((0,s.u)(b[w])||w)}}catch(je){z.e(je)}finally{z.f()}}else e.entity_id&&g.push(b[e.entity_id]?(0,s.u)(b[e.entity_id]):e.entity_id);var x=e.attribute?(0,c.R)(t.localize,k,t.entities,e.attribute):void 0,q=e.for?h(t.locale,e.for):void 0;if(void 0!==e.above&&void 0!==e.below)return t.localize("".concat(f,".numeric_state.description.above-below"),{attribute:x,entity:(0,d.q)(t.locale,g),numberOfEntities:g.length,above:e.above,below:e.below,duration:q});if(void 0!==e.above)return t.localize("".concat(f,".numeric_state.description.above"),{attribute:x,entity:(0,d.q)(t.locale,g),numberOfEntities:g.length,above:e.above,duration:q});if(void 0!==e.below)return t.localize("".concat(f,".numeric_state.description.below"),{attribute:x,entity:(0,d.q)(t.locale,g),numberOfEntities:g.length,below:e.below,duration:q})}if("state"===e.platform){var O=[],M=t.states,N="";if(e.attribute){var S=Array.isArray(e.entity_id)?t.states[e.entity_id[0]]:t.states[e.entity_id];N=(0,c.R)(t.localize,S,t.entities,e.attribute)}var C=(0,r.e)(e.entity_id);if(C){var E,I=(0,i.A)(C);try{for(I.s();!(E=I.n()).done;){var T=E.value;M[T]&&O.push((0,s.u)(M[T])||T)}}catch(je){I.e(je)}finally{I.f()}}var Z=t.states[C[0]],j="other",D="";if(void 0!==e.from){var V=[];if(null===e.from)e.attribute||(j="null");else{V=(0,r.e)(e.from);var W,F=[],H=(0,i.A)(V);try{for(H.s();!(W=H.n()).done;){var L=W.value;F.push(e.attribute?t.formatEntityAttributeValue(Z,e.attribute,L).toString():t.formatEntityState(Z,L))}}catch(je){H.e(je)}finally{H.f()}0!==F.length&&(D=(0,d.q)(t.locale,F),j="fromUsed")}}var R="other",B="";if(void 0!==e.to){var P=[];if(null===e.to)e.attribute||(R="null");else{P=(0,r.e)(e.to);var U,K=[],J=(0,i.A)(P);try{for(J.s();!(U=J.n()).done;){var X=U.value;K.push(e.attribute?t.formatEntityAttributeValue(Z,e.attribute,X).toString():t.formatEntityState(Z,X).toString())}}catch(je){J.e(je)}finally{J.f()}0!==K.length&&(B=(0,d.q)(t.locale,K),R="toUsed")}}e.attribute||void 0!==e.from||void 0!==e.to||(R="special");var Y,$="";if(e.for)$=null!==(Y=h(t.locale,e.for))&&void 0!==Y?Y:"";return t.localize("".concat(f,".state.description.full"),{hasAttribute:""!==N?"true":"false",attribute:N,hasEntity:0!==O.length?"true":"false",entity:(0,d.q)(t.locale,O),fromChoice:j,fromString:D,toChoice:R,toString:B,hasDuration:""!==$?"true":"false",duration:$})}if("sun"===e.platform&&e.event){var G="";return e.offset&&(G="number"==typeof e.offset?(0,u.A)(e.offset):"string"==typeof e.offset?e.offset:JSON.stringify(e.offset)),t.localize("sunset"===e.event?"".concat(f,".sun.description.sets"):"".concat(f,".sun.description.rises"),{hasDuration:""!==G?"true":"false",duration:G})}if("tag"===e.platform)return t.localize("".concat(f,".tag.description.full"));if("time"===e.platform&&e.at){var Q=(0,r.e)(e.at).map((function(e){return"string"!=typeof e?e:e.includes(".")?"entity ".concat(t.states[e]?(0,s.u)(t.states[e]):e):y(e,t.locale,t.config)}));return t.localize("".concat(f,".time.description.full"),{time:(0,d.q)(t.locale,Q)})}if("time_pattern"===e.platform){if(!e.seconds&&!e.minutes&&!e.hours)return t.localize("".concat(f,".time_pattern.description.initial"));var ee=[],te="other",ne="other",ie="other",re=0,oe=0,ae=0;if(void 0!==e.seconds){var ue="*"===e.seconds,ce="string"==typeof e.seconds&&e.seconds.startsWith("/");re=ue?0:"number"==typeof e.seconds?e.seconds:ce?parseInt(e.seconds.substring(1)):parseInt(e.seconds),(isNaN(re)||re>59||re<0||ce&&0===re)&&ee.push("seconds"),te=ue||ce&&1===re?"every":ce?"every_interval":"on_the_xth"}if(void 0!==e.minutes){var se="*"===e.minutes,le="string"==typeof e.minutes&&e.minutes.startsWith("/");oe=se?0:"number"==typeof e.minutes?e.minutes:le?parseInt(e.minutes.substring(1)):parseInt(e.minutes),(isNaN(oe)||oe>59||oe<0||le&&0===oe)&&ee.push("minutes"),ne=se||le&&1===oe?"every":le?"every_interval":void 0!==e.seconds?"has_seconds":"on_the_xth"}else void 0!==e.seconds&&(void 0!==e.hours?(oe=0,ne="has_seconds"):ne="every");if(void 0!==e.hours){var de="*"===e.hours,fe="string"==typeof e.hours&&e.hours.startsWith("/");ae=de?0:"number"==typeof e.hours?e.hours:fe?parseInt(e.hours.substring(1)):parseInt(e.hours),(isNaN(ae)||ae>23||ae<0||fe&&0===ae)&&ee.push("hours"),ie=de||fe&&1===ae?"every":fe?"every_interval":void 0!==e.seconds||void 0!==e.minutes?"has_seconds_or_minutes":"on_the_xth"}else ie="every";return 0!==ee.length?t.localize("".concat(f,".time_pattern.description.invalid"),{parts:(0,d.c)(t.locale,ee.map((function(e){return t.localize("".concat(f,".time_pattern.").concat(e))})))}):t.localize("".concat(f,".time_pattern.description.full"),{secondsChoice:te,minutesChoice:ne,hoursChoice:ie,seconds:re,minutes:oe,hours:ae,secondsWithOrdinal:t.localize("".concat(f,".time_pattern.description.ordinal"),{part:re}),minutesWithOrdinal:t.localize("".concat(f,".time_pattern.description.ordinal"),{part:oe}),hoursWithOrdinal:t.localize("".concat(f,".time_pattern.description.ordinal"),{part:ae})})}if("zone"===e.platform&&e.entity_id&&e.zone){var ve=[],he=[],ye=t.states;if(Array.isArray(e.entity_id)){var me,pe=(0,i.A)(e.entity_id.values());try{for(pe.s();!(me=pe.n()).done;){var _e=me.value;ye[_e]&&ve.push((0,s.u)(ye[_e])||_e)}}catch(je){pe.e(je)}finally{pe.f()}}else ve.push(ye[e.entity_id]?(0,s.u)(ye[e.entity_id]):e.entity_id);if(Array.isArray(e.zone)){var ge,be=(0,i.A)(e.zone.values());try{for(be.s();!(ge=be.n()).done;){var ke=ge.value;ye[ke]&&he.push((0,s.u)(ye[ke])||ke)}}catch(je){be.e(je)}finally{be.f()}}else he.push(ye[e.zone]?(0,s.u)(ye[e.zone]):e.zone);return t.localize("".concat(f,".zone.description.full"),{entity:(0,d.q)(t.locale,ve),event:e.event.toString(),zone:(0,d.q)(t.locale,he),numberOfZones:he.length})}if("geo_location"===e.platform&&e.source&&e.zone){var Ae=[],ze=[],we=t.states;if(Array.isArray(e.source)){var xe,qe=(0,i.A)(e.source.values());try{for(qe.s();!(xe=qe.n()).done;){var Oe=xe.value;Ae.push(Oe)}}catch(je){qe.e(je)}finally{qe.f()}}else Ae.push(e.source);if(Array.isArray(e.zone)){var Me,Ne=(0,i.A)(e.zone.values());try{for(Ne.s();!(Me=Ne.n()).done;){var Se=Me.value;we[Se]&&ze.push((0,s.u)(we[Se])||Se)}}catch(je){Ne.e(je)}finally{Ne.f()}}else ze.push(we[e.zone]?(0,s.u)(we[e.zone]):e.zone);return t.localize("".concat(f,".geo_location.description.full"),{source:(0,d.q)(t.locale,Ae),event:e.event.toString(),zone:(0,d.q)(t.locale,ze),numberOfZones:ze.length})}if("mqtt"===e.platform)return t.localize("".concat(f,".mqtt.description.full"));if("template"===e.platform){var Ce,Ee="";if(e.for)Ee=null!==(Ce=h(t.locale,e.for))&&void 0!==Ce?Ce:"";return t.localize("".concat(f,".template.description.full"),{hasDuration:""!==Ee?"true":"false",duration:Ee})}if("webhook"===e.platform)return t.localize("".concat(f,".webhook.description.full"));if("conversation"===e.platform)return e.command?t.localize("".concat(f,".conversation.description.full"),{sentence:(0,d.q)(t.locale,(0,r.e)(e.command).map((function(e){return"'".concat(e,"'")})))}):t.localize("".concat(f,".conversation.description.empty"));if("persistent_notification"===e.platform)return t.localize("".concat(f,".persistent_notification.description.full"));if("device"===e.platform&&e.device_id){var Ie=e,Te=(0,l.nx)(t,n,Ie);if(Te)return Te;var Ze=t.states[Ie.entity_id];return"".concat(Ze?(0,s.u)(Ze):Ie.entity_id," ").concat(Ie.type)}return t.localize("ui.panel.config.automation.editor.triggers.type.".concat(e.platform,".label"))||t.localize("ui.panel.config.automation.editor.triggers.unknown_trigger")},_=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{return g(e,t,n,i)}catch(o){console.error(o);var r="Error in describing condition";return o.message&&(r+=": "+o.message),r}},g=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.alias&&!o)return e.alias;if(!e.condition)for(var a=0,f=["and","or","not"];a<f.length;a++){var m=f[a];m in e&&((0,r.e)(e[m])&&(e={condition:m,conditions:e[m]}))}if("or"===e.condition){var p=(0,r.e)(e.conditions);if(!p||0===p.length)return t.localize("".concat(v,".or.description.no_conditions"));var _=p.length;return t.localize("".concat(v,".or.description.full"),{count:_})}if("and"===e.condition){var g=(0,r.e)(e.conditions);if(!g||0===g.length)return t.localize("".concat(v,".and.description.no_conditions"));var b=g.length;return t.localize("".concat(v,".and.description.full"),{count:b})}if("not"===e.condition){var k=(0,r.e)(e.conditions);return k&&0!==k.length?1===k.length?t.localize("".concat(v,".not.description.one_condition")):t.localize("".concat(v,".not.description.full"),{count:k.length}):t.localize("".concat(v,".not.description.no_conditions"))}if("state"===e.condition){if(!e.entity_id)return t.localize("".concat(v,".state.description.no_entity"));var A="";if(e.attribute){var z=Array.isArray(e.entity_id)?t.states[e.entity_id[0]]:t.states[e.entity_id];A=(0,c.R)(t.localize,z,t.entities,e.attribute)}var w=[];if(Array.isArray(e.entity_id)){var x,q=(0,i.A)(e.entity_id.values());try{for(q.s();!(x=q.n()).done;){var O=x.value;t.states[O]&&w.push((0,s.u)(t.states[O])||O)}}catch(ue){q.e(ue)}finally{q.f()}}else e.entity_id&&w.push(t.states[e.entity_id]?(0,s.u)(t.states[e.entity_id]):e.entity_id);var M=[],N=t.states[Array.isArray(e.entity_id)?e.entity_id[0]:e.entity_id];if(Array.isArray(e.state)){var S,C=(0,i.A)(e.state.values());try{for(C.s();!(S=C.n()).done;){var E=S.value;M.push(e.attribute?t.formatEntityAttributeValue(N,e.attribute,E).toString():t.formatEntityState(N,E))}}catch(ue){C.e(ue)}finally{C.f()}}else""!==e.state&&M.push(e.attribute?t.formatEntityAttributeValue(N,e.attribute,e.state).toString():t.formatEntityState(N,e.state.toString()));var I="";return e.for&&(I=h(t.locale,e.for)||""),t.localize("".concat(v,".state.description.full"),{hasAttribute:""!==A?"true":"false",attribute:A,numberOfEntities:w.length,entities:"any"===e.match?(0,d.q)(t.locale,w):(0,d.c)(t.locale,w),numberOfStates:M.length,states:(0,d.q)(t.locale,M),hasDuration:""!==I?"true":"false",duration:I})}if("numeric_state"===e.condition&&e.entity_id){var T=t.states[e.entity_id],Z=T?(0,s.u)(T):e.entity_id,j=e.attribute?(0,c.R)(t.localize,T,t.entities,e.attribute):void 0;if(void 0!==e.above&&void 0!==e.below)return t.localize("".concat(v,".numeric_state.description.above-below"),{attribute:j,entity:Z,above:e.above,below:e.below});if(void 0!==e.above)return t.localize("".concat(v,".numeric_state.description.above"),{attribute:j,entity:Z,above:e.above});if(void 0!==e.below)return t.localize("".concat(v,".numeric_state.description.below"),{attribute:j,entity:Z,below:e.below})}if("time"===e.condition){var D=(0,r.e)(e.weekday),V=D&&D.length>0&&D.length<7;if(e.before||e.after||V){var W="string"!=typeof e.before?e.before:e.before.includes(".")?"entity ".concat(t.states[e.before]?(0,s.u)(t.states[e.before]):e.before):y(e.before,t.locale,t.config),F="string"!=typeof e.after?e.after:e.after.includes(".")?"entity ".concat(t.states[e.after]?(0,s.u)(t.states[e.after]):e.after):y(e.after,t.locale,t.config),H=[];V&&(H=D.map((function(e){return t.localize("ui.panel.config.automation.editor.conditions.type.time.weekdays.".concat(e))})));var L="";return void 0!==F&&void 0!==W?L="after_before":void 0!==F?L="after":void 0!==W&&(L="before"),t.localize("".concat(v,".time.description.full"),{hasTime:L,hasTimeAndDay:(F||W)&&V?"true":"false",hasDay:V?"true":"false",time_before:W,time_after:F,day:(0,d.q)(t.locale,H)})}}if("sun"===e.condition&&(e.before||e.after)){var R,B,P="";e.after&&e.after_offset&&(P="number"==typeof e.after_offset?(0,u.A)(e.after_offset):"string"==typeof e.after_offset?e.after_offset:JSON.stringify(e.after_offset));var U="";return e.before&&e.before_offset&&(U="number"==typeof e.before_offset?(0,u.A)(e.before_offset):"string"==typeof e.before_offset?e.before_offset:JSON.stringify(e.before_offset)),t.localize("".concat(v,".sun.description.full"),{afterChoice:null!==(R=e.after)&&void 0!==R?R:"other",afterOffsetChoice:""!==P?"offset":"other",afterOffset:P,beforeChoice:null!==(B=e.before)&&void 0!==B?B:"other",beforeOffsetChoice:""!==U?"offset":"other",beforeOffset:U})}if("zone"===e.condition&&e.entity_id&&e.zone){var K=[],J=[],X=t.states;if(Array.isArray(e.entity_id)){var Y,$=(0,i.A)(e.entity_id.values());try{for($.s();!(Y=$.n()).done;){var G=Y.value;X[G]&&K.push((0,s.u)(X[G])||G)}}catch(ue){$.e(ue)}finally{$.f()}}else K.push(X[e.entity_id]?(0,s.u)(X[e.entity_id]):e.entity_id);if(Array.isArray(e.zone)){var Q,ee=(0,i.A)(e.zone.values());try{for(ee.s();!(Q=ee.n()).done;){var te=Q.value;X[te]&&J.push((0,s.u)(X[te])||te)}}catch(ue){ee.e(ue)}finally{ee.f()}}else J.push(X[e.zone]?(0,s.u)(X[e.zone]):e.zone);var ne=(0,d.q)(t.locale,K),ie=(0,d.q)(t.locale,J);return t.localize("".concat(v,".zone.description.full"),{entity:ne,numberOfEntities:K.length,zone:ie,numberOfZones:J.length})}if("device"===e.condition&&e.device_id){var re=e,oe=(0,l.I3)(t,n,re);if(oe)return oe;var ae=t.states[re.entity_id];return"".concat(ae?(0,s.u)(ae):re.entity_id," ").concat(re.type)}return"template"===e.condition?t.localize("".concat(v,".template.description.full")):"trigger"===e.condition&&null!=e.id?t.localize("".concat(v,".trigger.description.full"),{id:(0,d.q)(t.locale,(0,r.e)(e.id).map((function(e){return e.toString()})))}):t.localize("ui.panel.config.automation.editor.conditions.type.".concat(e.condition,".label"))||t.localize("ui.panel.config.automation.editor.conditions.unknown_condition")}},44164:function(e,t,n){n.d(t,{$:function(){return i}});n(43859);var i=function(e,t){return e.callWS(Object.assign({type:"validate_config"},t))}},54671:function(e,t,n){n.d(t,{HD:function(){return a},ih:function(){return r},rf:function(){return o}});var i=n(26349),r=((0,i.q6)("connection"),(0,i.q6)("states"),(0,i.q6)("entities"),(0,i.q6)("devices"),(0,i.q6)("areas"),(0,i.q6)("localize"),(0,i.q6)("locale"),(0,i.q6)("config"),(0,i.q6)("themes"),(0,i.q6)("selectedTheme"),(0,i.q6)("user"),(0,i.q6)("userData"),(0,i.q6)("panels"),(0,i.q6)("extendedEntities")),o=(0,i.q6)("floors"),a=(0,i.q6)("labels")},95336:function(e,t,n){n.d(t,{I$:function(){return l},I3:function(){return p},PV:function(){return m},Po:function(){return v},RK:function(){return k},TB:function(){return d},TH:function(){return b},T_:function(){return g},am:function(){return a},jR:function(){return s},ng:function(){return u},nx:function(){return _},o9:function(){return c}});var i=n(67234),r=(n(77052),n(53501),n(848),n(93046),n(34517),n(91330)),o=n(27761),a=function(e,t){return e.callWS({type:"device_automation/action/list",device_id:t})},u=function(e,t){return e.callWS({type:"device_automation/condition/list",device_id:t})},c=function(e,t){return e.callWS({type:"device_automation/trigger/list",device_id:t})},s=function(e,t){return e.callWS({type:"device_automation/action/capabilities",action:t})},l=function(e,t){return e.callWS({type:"device_automation/condition/capabilities",condition:t})},d=function(e,t){return e.callWS({type:"device_automation/trigger/capabilities",trigger:t})},f=["device_id","domain","entity_id","type","subtype","event","condition","platform"],v=function(e,t,n){if((0,i.A)(t)!==(0,i.A)(n))return!1;for(var r in t){var o,a;if(f.includes(r))if("entity_id"!==r||(null===(o=t[r])||void 0===o?void 0:o.includes("."))===(null===(a=n[r])||void 0===a?void 0:a.includes("."))){if(!Object.is(t[r],n[r]))return!1}else if(!h(e,t[r],n[r]))return!1}for(var u in n){var c,s;if(f.includes(u))if("entity_id"!==u||(null===(c=t[u])||void 0===c?void 0:c.includes("."))===(null===(s=n[u])||void 0===s?void 0:s.includes("."))){if(!Object.is(t[u],n[u]))return!1}else if(!h(e,t[u],n[u]))return!1}return!0},h=function(e,t,n){return!(!t||!n)&&(t.includes(".")&&(t=(0,o.Ox)(e)[t].id),n.includes(".")&&(n=(0,o.Ox)(e)[n].id),t===n)},y=function(e,t,n){if(!n)return"<unknown entity>";if(n.includes(".")){var i=e.states[n];return i?(0,r.u)(i):n}var a=(0,o.P9)(t)[n];return a?(0,o.jh)(e,a)||n:"<unknown entity>"},m=function(e,t,n){return e.localize("component.".concat(n.domain,".device_automation.action_type.").concat(n.type),{entity_name:y(e,t,n.entity_id),subtype:n.subtype?e.localize("component.".concat(n.domain,".device_automation.action_subtype.").concat(n.subtype))||n.subtype:""})||(n.subtype?'"'.concat(n.subtype,'" ').concat(n.type):n.type)},p=function(e,t,n){return e.localize("component.".concat(n.domain,".device_automation.condition_type.").concat(n.type),{entity_name:y(e,t,n.entity_id),subtype:n.subtype?e.localize("component.".concat(n.domain,".device_automation.condition_subtype.").concat(n.subtype))||n.subtype:""})||(n.subtype?'"'.concat(n.subtype,'" ').concat(n.type):n.type)},_=function(e,t,n){return e.localize("component.".concat(n.domain,".device_automation.trigger_type.").concat(n.type),{entity_name:y(e,t,n.entity_id),subtype:n.subtype?e.localize("component.".concat(n.domain,".device_automation.trigger_subtype.").concat(n.subtype))||n.subtype:""})||(n.subtype?'"'.concat(n.subtype,'" ').concat(n.type):n.type)},g=function(e,t){return function(n){return e.localize("component.".concat(t.domain,".device_automation.extra_fields.").concat(n.name))||n.name}},b=function(e,t){return function(n){return e.localize("component.".concat(t.domain,".device_automation.extra_fields_descriptions.").concat(n.name))}},k=function(e,t){var n,i,r,o;return null===(n=e.metadata)||void 0===n||!n.secondary||null!==(i=t.metadata)&&void 0!==i&&i.secondary?null!==(r=e.metadata)&&void 0!==r&&r.secondary||null===(o=t.metadata)||void 0===o||!o.secondary?0:-1:1}},6601:function(e,t,n){n.d(t,{Hh:function(){return r},KF:function(){return a},g0:function(){return s},s7:function(){return u}});var i=n(79592),r="unavailable",o="unknown",a="off",u=[r,o],c=[r,o,a],s=(0,i.g)(u);(0,i.g)(c)},27761:function(e,t,n){n.d(t,{jh:function(){return a},Ox:function(){return c},P9:function(){return s},v:function(){return u}});var i=n(66123),r=(n(69466),n(4187),n(53501),n(75658),n(14460),n(848),n(43859),n(68113),n(66274),n(85038),n(85767),n(45081)),o=n(91330),a=(n(66412),n(19263),function(e,t){if(t.name)return t.name;var n=e.states[t.entity_id];return n?(0,o.u)(n):t.original_name?t.original_name:t.entity_id}),u=function(e,t){return e.callWS({type:"config/entity_registry/get",entity_id:t})},c=(0,r.A)((function(e){var t,n={},r=(0,i.A)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o.entity_id]=o}}catch(a){r.e(a)}finally{r.f()}return n})),s=(0,r.A)((function(e){var t,n={},r=(0,i.A)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o.id]=o}}catch(a){r.e(a)}finally{r.f()}return n}))},77237:function(e,t,n){n.d(t,{g:function(){return a},u:function(){return r}});n(21950),n(68113),n(55888),n(56262),n(8339);var i=n(33167),r="__paste__",o=function(){return Promise.all([n.e(9578),n.e(5337),n.e(8920)]).then(n.bind(n,18920))},a=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"add-automation-element-dialog",dialogImport:o,dialogParams:t})}},20706:function(e,t,n){n.d(t,{V:function(){return r},b:function(){return o}});var i=n(63428),r=(0,i.Ik)({platform:(0,i.Yj)(),id:(0,i.lq)((0,i.Yj)()),enabled:(0,i.lq)((0,i.zM)())}),o=(0,i.Ik)({days:(0,i.lq)((0,i.ai)()),hours:(0,i.lq)((0,i.ai)()),minutes:(0,i.lq)((0,i.ai)()),seconds:(0,i.lq)((0,i.ai)())})}}]);