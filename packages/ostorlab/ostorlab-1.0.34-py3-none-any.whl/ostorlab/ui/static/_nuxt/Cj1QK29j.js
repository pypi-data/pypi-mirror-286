import{_ as $}from"./D3Krh0We.js";import{u as M}from"./NDDL-3Dc.js";import{u as R,V as S,d as U,a as I}from"./DnhbA3Nq.js";import{V as P,D as O}from"./C8qWC4yE.js";import{d as w,r as u,c as k,o as Q,t as r,v as p,z as e,a8 as a,aO as j,U as v,A as t,$ as C,B as V,y as _,x as q,V as N,P as b,aR as G,R as H,a6 as D,az as J,S as K,Q as W}from"./C0MQPl7e.js";import"./DOdzfudM.js";import"./DlAUqK2U.js";import"./wJaZcIUU.js";import"./D82FP0wN.js";import"./CuvyPPI7.js";const X=w({__name:"ScannersList",setup(h){const i=M(),d=R(),y=u(!0),o=u(!1),c=u(!1),n=u(null),B=[{title:"Name",value:"name",align:"left",width:"10%"},{title:"Endpoint",value:"endpoint",align:"left"},{title:"Actions",value:"actions",align:"center",width:"5%"}],x=[{title:"Edit",action:l=>z(l),icon:"mdi-pencil-outline",color:"primary",divider:!0},{title:"Delete",action:l=>E(l),icon:"mdi-delete",color:"red"}],F=k(()=>i.scanners),L=k(()=>n.value===null?"Are you sure you would like to delete this scanner?":`Are you sure you would like to delete the '${n.value.name}' scanner?`),z=l=>{n.value=l,c.value=!0},A=()=>{c.value=!1,n.value=null},E=l=>{n.value=l,o.value=!0},T=()=>{if(n.value!==null)try{i.deleteScanner(n.value.endpoint),d.reportSuccess("Scanner deleted successfully.")}catch{d.reportError("Failed to delete scanner. Please try again.")}finally{n.value=null}};return Q(()=>{y.value=!1}),(l,m)=>(r(),p("div",null,[e(a(O),{"model-value":a(o),"onUpdate:modelValue":m[0]||(m[0]=s=>j(o)?o.value=s:null),title:a(L),"cancel-button-text":"Cancel","confirm-button-text":"Delete","cancel-icon":"mdi-close","confirm-icon":"mdi-check","confirm-button-color":"secondary","card-icon":"mdi-trash-can-outline",onConfirm:T,onCancel:m[1]||(m[1]=s=>n.value=null)},null,8,["model-value","title"]),a(c)===!0?(r(),v(S,{key:0,variant:"outlined",class:"pa-4 mb-4"},{default:t(()=>[e($,{scanner:a(n),"is-edit-mode":!0,onCloseForm:A},null,8,["scanner"])]),_:1})):C("",!0),e(S,{variant:"outlined"},{default:t(()=>[e(P,{loading:a(y),headers:B,items:a(F),"items-per-page":-1,"hide-default-footer":"","loading-text":"Loading scanners...","no-data-text":"No scanners added",density:"compact"},{"item.name":t(({item:s})=>[V(_(s.name),1)]),"item.endpoint":t(({item:s})=>[q("code",null,_(s.endpoint),1)]),"item.actions":t(({item:s})=>[e(N,{variant:"text",size:"small",icon:!0},{default:t(()=>[e(b,{icon:"mdi-dots-vertical"}),e(G,{activator:"parent",location:"bottom"},{default:t(()=>[e(H,{density:"compact",class:"py-0"},{default:t(()=>[(r(),p(D,null,J(x,(f,g)=>(r(),p(D,{key:`item-${f.title}-${g}`},[e(K,{onClick:Y=>f.action(s)},{default:t(()=>[e(b,{start:"",size:"small",icon:f.icon},null,8,["icon"]),V(" "+_(f.title),1)]),_:2},1032,["onClick"]),g!==x.length-1?(r(),v(W,{key:0})):C("",!0)],64))),64))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["loading","items"])]),_:1})]))}}),ce=w({__name:"index",setup(h){const i=u(!1),d=[{text:"Scanners",disabled:!0,to:"/scanners",exact:!0}];return(y,o)=>(r(),p("div",null,[e(a(I),{breadcrumbs:d,class:"mb-5"}),e(S,{variant:"outlined",class:"my-4"},{default:t(()=>[e(U,null,{default:t(()=>[a(i)===!1?(r(),v(N,{key:0,color:"accent","prepend-icon":"mdi-plus",onClick:o[0]||(o[0]=c=>i.value=!a(i))},{default:t(()=>[V(" New ")]),_:1})):(r(),v($,{key:1,onCloseForm:o[1]||(o[1]=c=>i.value=!1)}))]),_:1})]),_:1}),e(X)]))}});export{ce as default};
