import{v as k,N as q,r as F,a0 as E,a1 as I,a2 as A,a3 as R,t as j,P as D,a4 as L,a5 as Q,a6 as N,a7 as O,a8 as T,j as K,c as M,a9 as U,aa as Y,_ as z,f as G,n as H,p as m,q as i,I as $,ab as g,B as b,D as _,C as J,Y as W}from"./index-BcYb4QxB.js";import{Q as X}from"./QInput-CNS_a_Sg.js";import{Q as Z}from"./QPage-iV6f14Q3.js";import"./use-key-composition-eLSyffFn.js";import"./use-id-RuhGUkFU.js";const ee=k({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(o,{slots:u,emit:f}){const l=q(),d=F(null);let s=0;const a=[];function h(e){const c=typeof e=="boolean"?e:o.noErrorFocus!==!0,v=++s,C=(t,n)=>{f(`validation${t===!0?"Success":"Error"}`,n)},P=t=>{const n=t.validate();return typeof n.then=="function"?n.then(r=>({valid:r,comp:t}),r=>({valid:!1,comp:t,err:r})):Promise.resolve({valid:n,comp:t})};return(o.greedy===!0?Promise.all(a.map(P)).then(t=>t.filter(n=>n.valid!==!0)):a.reduce((t,n)=>t.then(()=>P(n).then(r=>{if(r.valid===!1)return Promise.reject(r)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return v===s&&C(!0),!0;if(v===s){const{comp:n,err:r}=t[0];if(r!==void 0&&console.error(r),C(!1,n),c===!0){const V=t.find(({comp:B})=>typeof B.focus=="function"&&L(B.$)===!1);V!==void 0&&V.comp.focus()}}return!1})}function y(){s++,a.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&Q(e);const c=s+1;h().then(v=>{c===s&&v===!0&&(o.onSubmit!==void 0?f("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function S(e){e!==void 0&&Q(e),f("reset"),N(()=>{y(),o.autofocus===!0&&o.noResetFocus!==!0&&p()})}function p(){O(()=>{if(d.value===null)return;const e=d.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(d.value.querySelectorAll("[tabindex]"),c=>c.tabIndex!==-1);e?.focus({preventScroll:!0})})}E(T,{bindComponent(e){a.push(e)},unbindComponent(e){const c=a.indexOf(e);c!==-1&&a.splice(c,1)}});let w=!1;return I(()=>{w=!0}),A(()=>{w===!0&&o.autofocus===!0&&p()}),R(()=>{o.autofocus===!0&&p()}),Object.assign(l.proxy,{validate:h,resetValidation:y,submit:x,reset:S,focus:p,getValidationComponents:()=>a}),()=>j("form",{class:"q-form",ref:d,onSubmit:x,onReset:S},D(u.default))}}),te=K({__name:"LoginPage",setup(o,{expose:u}){u();const f=M(),l=U({username:"admin",password:null}),s={router:f,user:l,submit:async()=>{try{await Y(l),f.push("/admin")}catch(a){console.error(a)}}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),oe={class:"text-h5 text-weight-bold"},ae={class:""},ne={class:""},se={href:"http://photobooth-app.org/setup/admincenter/",target:"_blank",class:"text-weight-bold",style:{"text-decoration":"none"}};function re(o,u,f,l,d,s){return G(),H(Z,{id:"login-page",class:"flex flex-center"},{default:m(()=>[i(W,{class:"q-pa-md no-shadow login-card",bordered:""},{default:m(()=>[i($,{flat:"",color:"grey",icon:"sym_o_arrow_back_ios_new",onClick:u[0]||(u[0]=a=>o.$router.go(-1))}),i(ee,{ref:"form",class:"q-gutter-md",onSubmit:l.submit},{default:m(()=>[i(g,{class:"text-center"},{default:m(()=>[b("div",oe,_(o.$t("Sign in")),1),b("div",ae,_(o.$t("Sign in below to access the admin dashboard.")),1)]),_:1}),i(g,null,{default:m(()=>[i(X,{modelValue:l.user.password,"onUpdate:modelValue":u[1]||(u[1]=a=>l.user.password=a),filled:"",type:"password",label:"Password"},null,8,["modelValue"])]),_:1}),i(g,null,{default:m(()=>[i($,{rounded:"",color:"primary",label:"Sign in",class:"full-width",type:"submit"})]),_:1}),i(g,{class:"text-center"},{default:m(()=>[b("div",ne,[J(_(o.$t("Looking for the default password or issues signing in?"))+" ",1),b("a",se,_(o.$t("Check the documentation.")),1)])]),_:1})]),_:1},512)]),_:1})]),_:1})}const me=z(te,[["render",re],["__file","LoginPage.vue"]]);export{me as default};
