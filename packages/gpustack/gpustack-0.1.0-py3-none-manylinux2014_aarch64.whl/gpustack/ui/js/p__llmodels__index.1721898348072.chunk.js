"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[455],{41755:function(e,n,r){r.d(n,{Z:function(){return w}});var t=r(90228),a=r.n(t),l=r(87999),s=r.n(l),o=r(48305),c=r.n(o),i=r(76099),u=r(32382),d=r(18953),f=r(48157),p=r(81126),m=r(66551),h=r(50959),v="delete-modal-content___bdNBR",x="content___YptSA",g=r(11527),j=(0,h.forwardRef)((function(e,n){var r=(0,u.useIntl)(),t=(0,h.useState)(!1),l=c()(t,2),o=l[0],j=l[1],w=(0,h.useState)({}),b=c()(w,2),y=b[0],k=b[1];(0,h.useImperativeHandle)(n,(function(){return{show:function(e){k(e),j(!0)},hide:function(){j(!1)}}}));var C=function(){var e;j(!1),null===(e=y.onCancel)||void 0===e||e.call(y)},Z=function(){var e=s()(a()().mark((function e(){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=y.onOk)||void 0===n?void 0:n.call(y);case 2:d.ZP.success(r.formatMessage({id:"common.message.success"})),j(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(f.Z,{style:{top:"20%"},open:o,onOk:Z,onCancel:C,destroyOnClose:!0,closeIcon:!1,maskClosable:!1,keyboard:!1,width:460,styles:{},footer:(0,g.jsxs)(p.Z,{size:20,children:[(0,g.jsx)(m.ZP,{onClick:C,size:"middle",children:r.formatMessage({id:"common.button.cancel"})}),(0,g.jsx)(m.ZP,{type:"primary",onClick:Z,size:"middle",children:r.formatMessage({id:"common.button.delete"})})]}),children:[(0,g.jsx)("div",{className:v,children:(0,g.jsxs)("span",{className:"title",children:[(0,g.jsx)(i.Z,{}),(0,g.jsx)("span",{children:r.formatMessage({id:"common.title.delete.confirm"})})]})}),(0,g.jsx)("div",{className:x,dangerouslySetInnerHTML:{__html:y.content&&r.formatMessage({id:y.selection?"common.delete.confirm":"common.delete.single.confirm"},{type:r.formatMessage({id:y.content}),name:y.name})}})]})})),w=j},64151:function(e,n,r){var t=r(48305),a=r.n(t),l=r(26068),s=r.n(l),o=r(44255),c=r(32382),i=r(64518),u=r(66551),d=r(50364),f=r(32699),p=r.n(f),m=r(50959),h=r(11527),v=function(e){var n,r=e.items,t=e.size,l=void 0===t?"small":t,f=e.onSelect,v=(0,c.useIntl)(),x=function(e){var n=p().head(r);f(n.key,n)};return null!=r&&r.length?(0,h.jsx)(h.Fragment,{children:1===(null==r?void 0:r.length)?(0,h.jsx)(i.Z,{title:v.formatMessage({id:null===(n=p().head(r))||void 0===n?void 0:n.label}),children:(0,h.jsx)(u.ZP,s()(s()(s()({},p().head(r)),{},{icon:p().get(r,"0.icon"),size:l},p().get(r,"0.props")),{},{onClick:x}))}):(0,h.jsx)(d.Z.Button,{dropdownRender:function(e){return(0,h.jsx)("div",{className:"flex flex-column ",style:{backgroundColor:"var(--color-white-1)",padding:5,alignItems:"flex-start",borderRadius:"var(--border-radius-base)",boxShadow:"var(--ant-box-shadow-secondary)"},children:p().map(p().tail(r),(function(e){return(0,m.createElement)(u.ZP,s()(s()({},e.props),{},{type:"text",size:"middle",icon:e.icon,key:e.key,onClick:function(){return function(e){var n=p().find(r,{key:e.key});f(e.key,n)}(e)},style:{width:"100%",justifyContent:"flex-start"}}),v.formatMessage({id:e.label}))}))})},buttonsRender:function(e){var n,t,s=a()(e,2);s[0],s[1];return[(0,h.jsx)(i.Z,{title:v.formatMessage({id:null===(n=p().head(r))||void 0===n?void 0:n.label}),children:(0,h.jsx)(u.ZP,{onClick:x,size:l,icon:null===(t=p().head(r))||void 0===t?void 0:t.icon})},"leftButton"),(0,h.jsx)(u.ZP,{icon:(0,h.jsx)(o.Z,{}),size:l},"menu")]}})}):(0,h.jsx)("span",{})};n.Z=(0,m.memo)(v)},45799:function(e,n,r){var t=r(26068),a=r.n(t),l=r(32382),s=r(81126),o=r(66551),c=r(11527);n.Z=function(e){var n=e.onOk,r=e.onCancel,t=e.cancelText,i=e.okText,u=e.okBtnProps,d=e.cancelBtnProps,f=e.loading,p=e.htmlType,m=void 0===p?"button":p,h=(e.form,(0,l.useIntl)());return(0,c.jsxs)(s.Z,{size:20,children:[(0,c.jsx)(o.ZP,a()(a()({onClick:r,style:{width:"88px"}},d),{},{children:t||h.formatMessage({id:"common.button.cancel"})})),(0,c.jsx)(o.ZP,a()(a()({type:"primary",onClick:n,style:{width:"88px"},loading:f,htmlType:m},u),{},{children:i||h.formatMessage({id:"common.button.save"})}))]})}},38441:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(50959),a=r(11527),l=function(e){var n=e.left,r=e.right,l=e.marginBottom,s=void 0===l?0:l,o=e.marginTop,c=void 0===o?30:o,i=e.style,u=(0,t.useMemo)((function(){var e={};return e.marginBottom="".concat(s,"px"),e.marginTop="".concat(c,"px"),i&&Object.assign(e,i),e}),[s,c,i]);return(0,a.jsxs)("div",{className:"page-tools",style:u,children:[(0,a.jsx)("div",{className:"left",children:n}),(0,a.jsx)("div",{className:"right",children:r})]})}},94886:function(e,n,r){var t=r(26068),a=r.n(t),l=r(48305),s=r.n(l),o=r(67825),c=r.n(o),i=r(34088),u=r(79698),d=r(19392),f=r(50959),p=r(37975),m=r(11527),h=["label","placeholder","children","required","description","isInFormItems"];n.Z=function(e){var n=e.label,r=e.placeholder,t=e.children,l=e.required,o=e.description,v=e.isInFormItems,x=void 0===v||v,g=c()(e,h),j=(0,f.useState)(!1),w=s()(j,2),b=w[0],y=w[1],k=(0,f.useRef)(null),C="";if(x){var Z,S,E=null===u.Z||void 0===u.Z||null===(Z=u.Z.Item)||void 0===Z||null===(S=Z.useStatus)||void 0===S?void 0:S.call(Z);C=(null==E?void 0:E.status)||""}(0,f.useEffect)((function(){(0,i.JL)(e.value)&&y(!0)}),[e.value]);return(0,m.jsx)(p.Z,{status:C,label:n||r,isFocus:b,required:l,description:o,disabled:e.disabled,onClick:function(){var n,r;e.disabled||b||(null===(n=k.current)||void 0===n||null===(r=n.focus)||void 0===r||r.call(n),y(!0))},children:(0,m.jsx)(d.default,a()(a()({},g),{},{ref:k,onFocus:function(n){var r;y(!0),null===(r=e.onFocus)||void 0===r||r.call(e,n)},onBlur:function(n){var r;e.value||y(!1),null===(r=e.onBlur)||void 0===r||r.call(e,n)},onChange:function(n,r){var t;(0,i.JL)(n)?y(!0):y(!1),null===(t=e.onChange)||void 0===t||t.call(e,n,r)},notFoundContent:null,children:t}))})}},90326:function(e,n,r){r.d(n,{Z:function(){return f}});var t=r(48305),a=r.n(t),l=r(33398),s=r(56280),o=r(64518),c=r(82187),i=r.n(c),u=r(50959),d=r(11527),f=function(e){var n=e.statusValue,r=e.download,t=(e.type,n.text),c=n.status,f=(0,u.useState)({text:"",bg:""}),p=a()(f,2),m=p[0],h=p[1];(0,u.useEffect)((function(){h(l.zK[c])}),[c]);var v=function(){var e=(null==r?void 0:r.percent)||0;return r&&e>0&&e<100?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{className:"progress",children:[(null==r?void 0:r.percent)||0,"%"]}),(0,d.jsx)("span",{className:"download",style:{width:"".concat(e,"%")}})]}):(0,d.jsx)("span",{children:t})};return(0,d.jsx)("span",{className:i()("status-tag",{download:null==r?void 0:r.percent}),style:{color:null==m?void 0:m.text,border:"1px solid ".concat((null==m?void 0:m.border)||(null==m?void 0:m.text))},children:n.message?(0,d.jsxs)(o.Z,{title:n.message,overlayInnerStyle:{maxHeight:200,overflow:"auto"},children:[(0,d.jsx)("span",{className:"m-r-5",children:(0,d.jsx)(s.Z,{})}),v()]}):v()})}},33398:function(e,n,r){r.d(n,{Kd:function(){return t},_W:function(){return s},iE:function(){return l},tb:function(){return o},zK:function(){return a}});var t={CREATE:"create",UPDATE:"update",VIEW:"view"},a={error:{text:"var(--ant-red-6)",bg:"var(--ant-red-1)"},warning:{text:"var(--ant-orange-6)",bg:"var(--ant-orange-1)"},transitioning:{text:"var(--ant-blue-6)",bg:"var(--ant-blue-1)"},success:{text:"var(--color-progress-green)",bg:"var(--ant-green-1)"},inactive:{text:"var(--ant-color-text-tertiary)",border:"rgba(200,200,200,1)",bg:"var(--ant-color-fill)"}},l={error:"error",warning:"warning",transitioning:"transitioning",success:"success",inactive:"inactive"},s={CREATE:1,UPDATE:2,DELETE:3},o=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_])(?=\S+$).{6,12}$/},28434:function(e,n,r){r.d(n,{Z:function(){return s}});var t=r(32699),a=r.n(t),l=r(50959);function s(e,n){var r=(0,l.useRef)(!1),t=(0,l.useRef)(e),s=(0,l.useRef)(n),o=(0,l.useRef)(null==n?void 0:n.toBottom),c=a().debounce((function(){r.current=!1}),5e3),i=function e(){var n,a,l,c=(null===(n=t.current)||void 0===n?void 0:n.current)||{},i=c.scrollHeight,u=c.clientHeight,d=c.scrollTop;null!==(a=s.current)&&void 0!==a&&a.toBottom&&o.current&&i>u+d?(t.current.current.scrollTop=i,r.current=!1):!r.current&&i>u+d&&null!==(l=t.current)&&void 0!==l&&l.current&&(t.current.current.scrollTop+=10,window.requestAnimationFrame(e))};return{handleContentWheel:function(e){r.current=!0,c()},updateScrollerPosition:function(){r.current||window.requestAnimationFrame(i)},scroller:t}}},23543:function(e,n,r){r.d(n,{Z:function(){return s}});var t=r(48305),a=r.n(t),l=r(50959);function s(){var e=(0,l.useState)([]),n=a()(e,2),r=n[0],t=n[1],s={selectedRowKeys:r,clearSelections:function(){t([])},onChange:function(e){t(e)}};return s}},79822:function(e,n,r){r.d(n,{Z:function(){return s}});var t=r(48305),a=r.n(t),l=r(50959);function s(e){var n=e.defaultSortOrder,r=void 0===n?"descend":n,t=(0,l.useState)(r),s=a()(t,2),o=s[0],c=s[1];return{sortOrder:o,setSortOrder:function(e){e?c(e):"descend"===r?c("ascend"):"ascend"===r&&c("descend")}}}},82220:function(e,n,r){r.r(n),r.d(n,{default:function(){return Mn}});var t=r(90228),a=r.n(t),l=r(26068),s=r.n(l),o=r(87999),c=r.n(o),i=r(48305),u=r.n(i),d=r(50959),f=d.createContext({}),p=r(33398),m=r(32382),h=r(9532),v=r(32699),x=r.n(v),g=function(e,n){for(var r=0,t=n;t<e.length;t+=1)if("{"===e[t]?r+=1:"}"===e[t]&&(r-=1),0===r)return t;return-1},j=function(e){return function(e){for(var n=[],r=0;r<e.length;){var t=e.indexOf("{",r);if(-1===t)break;var a=g(e,t);if(-1===a)r=t+1;else{var l=e.substring(t,a+1);try{var s=JSON.parse(l);n.push(s)}catch(e){}r=a+1}}return n}(e)},w=function(){return h.Z.CancelToken.source()},b=function(e,n,r){var t=e.slice(r.current);return r.current=n,t},y=function(){var e=(0,d.useState)(3),n=u()(e,2),r=n[0],t=n[1],l=(0,d.useRef)(null),o=(0,d.useRef)({}),i=(0,d.useRef)(0),f=(0,d.useRef)(0),v=(0,d.useRef)(5),g={params:{},contentType:"json"},y=(0,d.useRef)(null),k=(0,d.useRef)(0),C=function(){i.current=0,f.current=0,k.current=0,t(3)},Z=function(e){return x().map(e,(function(e){var n;e.type===p._W.DELETE&&(e.ids=null!==(n=e.data)&&void 0!==n&&n.id?[e.data.id]:[]);return e.collection=e.data?[e.data]:[],e}))},S=function(){var e=c()(a()().mark((function e(n){var r,o,u,d,p,x,g,y,S,E;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.url,d=n.handler,n.beforeReconnect,p=n.params,x=void 0===p?{}:p,g=n.contentType,y=void 0===g?"json":g,C(),null===(r=l.current)||void 0===r||null===(o=r.cancel)||void 0===o||o.call(r),l.current=w(),e.prev=4,e.next=7,(0,m.request)(u,{params:s()(s()({},x),{},{watch:!0}),skipErrorHandler:!0,getResponse:!0,cancelToken:l.current.token,onDownloadProgress:function(e){return c()(a()().mark((function n(){var r,l,s,o,c;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.currentTarget,l=r.response,s=r.readyState,t(s),i.current=e.loaded||0,f.current=e.total||0,o=l,"","json"===y&&(c=b(l,e.loaded,k),o=j(c),o=Z(o),c),d(o);case 10:case"end":return n.stop()}}),n)})))()}});case 7:S=e.sent,E=S.request,t(null==E?void 0:E.readyState),v.current>0&&(v.current-=1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),h.Z.isCancel(e.t0)||(t(4),v.current>0&&(v.current-=1));case 17:return e.abrupt("return",l.current);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(n){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){var e=function(){var e,n;null===(e=l.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e)};return window.addEventListener("beforeunload",e),function(){var n,r;C(),o.current.beforeReconnect=null,null===(n=l.current)||void 0===n||null===(r=n.cancel)||void 0===r||r.call(n),clearTimeout(y.current),window.removeEventListener("beforeunload",e)}}),[]),(0,d.useEffect)((function(){var e,n;4===r&&v.current>0&&(null===(e=(n=o.current).beforeReconnect)||void 0===e||e.call(n),clearTimeout(y.current),y.current=setTimeout((function(){S(o.current)}),1e3*Math.pow(2,5-v.current)))}),[r]),{setChunkRequest:function(e){return o.current=s()(s()({},g),e),v.current=5,clearTimeout(y.current),S(o.current),l}}},k=r(15558),C=r.n(k);var Z=function(e){var n=(0,d.useRef)(e.dataList||[]),r=(0,d.useRef)(null);return{updateChunkedList:function(t,a){var l=(null==t?void 0:t.collection)||[];null!=e&&e.computedID&&(l=x().map(l,(function(n){var r;return n.id=null==e||null===(r=e.computedID)||void 0===r?void 0:r.call(e,n),n}))),null!=e&&e.filterFun&&(l=x().filter(null==t?void 0:t.collection,null==e?void 0:e.filterFun)),null!=e&&e.mapFun&&(l=x().map(null==t?void 0:t.collection,null==e?void 0:e.mapFun));var s,o=(null==t?void 0:t.ids)||[];if((null==t?void 0:t.type)===p._W.CREATE){var c=[];x().each(l,(function(e){if(-1===x().findIndex(n.current,(function(n){return n.id===e.id}))){var r=x().cloneDeep(e);c.push(r)}})),n.current=[].concat(c,C()(n.current))}(null==t?void 0:t.type)===p._W.DELETE&&(n.current=x().filter(n.current,(function(e){return!x().includes(o,e.id)})),null===(s=e.setDataList)||void 0===s||s.call(e,C()(n.current)));(null==t?void 0:t.type)===p._W.UPDATE&&x().each(l,(function(e){var r=x().findIndex(n.current,(function(n){return n.id===e.id}));if(r>-1){var t=x().cloneDeep(e);n.current[r]=t}else if(-1===r){var a=x().cloneDeep(e);n.current.push(a)}})),clearTimeout(r.current),r.current=setTimeout((function(){var r;null===(r=e.setDataList)||void 0===r||r.call(e,C()(n.current))}),80),null!=e&&e.callback&&(null==e||e.callback(n.current))},cacheDataListRef:n}},S=r(75487),E=r.n(S),I=r(55626),R="/models",M="/model-instances";function T(e,n){return N.apply(this,arguments)}function N(){return(N=c()(a()().mark((function e(n,r){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("".concat(R),s()(s()({methos:"GET"},r),{},{params:n})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return _.apply(this,arguments)}function _(){return(_=c()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("".concat(R),{method:"POST",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return K.apply(this,arguments)}function K(){return(K=c()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("".concat(R,"/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return O.apply(this,arguments)}function O(){return(O=c()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("".concat(R,"/").concat(n.id),{method:"PUT",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return z.apply(this,arguments)}function z(){return(z=c()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("".concat(R,"/").concat(n.id,"/instances"),{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return A.apply(this,arguments)}function A(){return(A=c()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("".concat(M,"/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return H.apply(this,arguments)}function H(){return(H=c()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("https://huggingface.co/api/quicksearch",{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return Y.apply(this,arguments)}function Y(){return(Y=c()(a()().mark((function e(n){var r,t,l,s,o,c,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],t=!1,l=!1,e.prev=3,o=E()((0,I.C7)(n));case 5:return e.next=7,o.next();case 7:if(!(t=!(c=e.sent).done)){e.next=13;break}i=c.value,r.push(i);case 10:t=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),l=!0,s=e.t0;case 19:if(e.prev=19,e.prev=20,!t||null==o.return){e.next=24;break}return e.next=24,o.return();case 24:if(e.prev=24,!l){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})))).apply(this,arguments)}var V=r(41755),G=r(64151),U=r(38441),J=r(79113),$=r(60060),Q=r(66551),X=r(25143),ee=r(4542),ne=r(56029),re=r(65863),te=r(80613),ae=r(32032),le=r(28726),se=r(82187),oe=r.n(se),ce=r(11527),ie=function(e){var n=e.title,r=e.style,t=e.align,a=e.firstCell,l=e.lastCell,o=e.sortOrder,c=e.onSort,i=e.sorter,u=e.dataIndex;return(0,ce.jsx)("div",{style:s()({},r),className:oe()("table-header",{"table-header-left":"left"===t,"table-header-center":"center"===t,"table-header-right":"right"===t,"table-header-first":a,"table-header-last":l,"table-header-sorter":i}),children:i?(0,ce.jsxs)("span",{className:"sorter-header",onClick:function(){"ascend"===o?null==c||c(u,"descend"):null==c||c(u,"ascend")},children:[(0,ce.jsx)("span",{className:"table-header-cell",children:n}),(0,ce.jsxs)("span",{className:"sorter",children:[(0,ce.jsx)(ae.Z,{className:oe()("sorter-up",{"sorter-active":"ascend"===o})}),(0,ce.jsx)(le.Z,{className:oe()("sorter-down",{"sorter-active":"descend"===o})})]})]}):(0,ce.jsx)("div",{className:"table-header-cell",children:n})})},ue=d.memo(ie),de=function(e){var n=e.onSort;return(0,ce.jsx)(re.Z,{className:"row",children:d.Children.map(e.children,(function(r,t){var a=r.props,l=a.title,s=a.dataIndex,o=a.align,c=a.span,i=a.headerStyle,u=a.sortOrder,f=a.sorter,p=a.defaultSortOrder;return d.isValidElement(r)?(0,ce.jsx)(te.Z,{span:c,children:(0,ce.jsx)(ue,{onSort:n,sorter:f,dataIndex:s,sortOrder:u,defaultSortOrder:p,title:l,style:i,firstCell:0===t,align:o,lastCell:t===e.children.length-1})},t):null}))})},fe=r(10782),pe=d.createContext({}),me=function(e){var n=e.record,r=e.rowIndex,t=e.expandable,l=e.rowSelection,o=(e.expandedRowKeys,e.rowKey),i=e.childParentKey,p=e.columns,m=e.pollingChildren,h=(e.watchChildren,e.onExpand),v=e.renderChildren,g=e.loadChildren,j=(e.loadChildrenAPI,d.useContext(f)),w=(y().setChunkRequest,(0,d.useState)(!1)),b=u()(w,2),k=b[0],S=b[1],E=(0,d.useState)(!1),I=u()(E,2),R=I[0],M=I[1],T=(0,d.useState)([]),N=u()(T,2),P=N[0],_=N[1],q=(0,d.useState)(!1),K=u()(q,2),D=K[0],O=K[1],F=(0,d.useState)(!0),z=u()(F,2),L=z[0],A=z[1],B=(0,d.useRef)(null),H=(0,d.useRef)(null),W=(0,d.useRef)([]);W.current=P;var Y=Z({dataList:P,setDataList:_}),V=Y.updateChunkedList,G=Y.cacheDataListRef;(0,d.useEffect)((function(){l&&(l.selectedRowKeys.includes(n[o])?M(!0):M(!1))}),[l]),(0,d.useEffect)((function(){return function(){var e,n;B.current&&clearInterval(B.current),null===(e=H.current)||void 0===e||null===(e=e.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e)}}),[]);var U=function(){var e=c()(a()().mark((function e(){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=11;break}return e.prev=1,e.next=4,null==g?void 0:g(n);case 4:r=e.sent,_(r||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),_([]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=c()(a()().mark((function e(){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,O(!0),e.next=5,null==g?void 0:g(n);case 5:r=e.sent,_(r||[]),O(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),_([]),O(!1);case 14:return e.prev=14,A(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=c()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!k),null==h||h(!k,n,n[o]),B.current&&clearInterval(B.current),!k){e.next=6;break}return e.abrupt("return");case 6:if(!m){e.next=12;break}return e.next=9,ne();case 9:B.current=setInterval((function(){U()}),1e3),e.next=13;break;case 12:ne();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(e){e.target.checked?null==l||l.onChange(x().uniq([].concat(C()(null==l?void 0:l.selectedRowKeys),[n[o]]))):null==l||l.onChange(null==l?void 0:l.selectedRowKeys.filter((function(e){return e!==n[o]})))};(0,d.useEffect)((function(){return!L&&k&&(G.current=P,x().each(j.allChildren||[],(function(e){x().get(e,["data",[i]])===x().get(n,[o])&&V(e)}))),function(){var e,n;null===(e=H.current)||void 0===e||null===(e=e.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e),G.current=[]}}),[L,k,j.allChildren]);return(0,ce.jsx)(pe.Provider,{value:s()(s()({},n),{},{rowIndex:r}),children:(0,ce.jsxs)("div",{className:"row-box",children:[(0,ce.jsxs)("div",{className:oe()("row-wrapper",{"row-wrapper-selected":R}),children:[t&&l?(0,ce.jsxs)("div",{className:"row-prefix-wrapper",children:[(0,ce.jsx)("span",{style:{marginRight:5},children:x().isBoolean(t)?(0,ce.jsx)(Q.ZP,{type:"text",size:"small",onClick:ae,children:k?(0,ce.jsx)(fe.Z,{}):(0,ce.jsx)(J.Z,{})}):t}),(0,ce.jsx)($.Z,{onChange:le,checked:R})]}):t?(0,ce.jsx)("div",{className:"row-prefix-wrapper",children:x().isBoolean(t)?(0,ce.jsx)(Q.ZP,{type:"text",size:"small",onClick:ae,children:k?(0,ce.jsx)(fe.Z,{}):(0,ce.jsx)(J.Z,{})}):t}):l?(0,ce.jsx)("div",{className:"row-prefix-wrapper",children:(0,ce.jsx)($.Z,{onChange:le,checked:R})}):null,(0,ce.jsx)(re.Z,{className:"seal-table-row",children:d.Children.map(p,(function(e){var n=e.props;return d.isValidElement(e)?(0,ce.jsx)(te.Z,{span:n.span,children:e},"".concat(n.dataIndex,"-").concat(r)):(0,ce.jsx)(te.Z,{span:n.span})}))})]}),k&&(0,ce.jsx)("div",{className:"expanded-row",children:(0,ce.jsx)(ee.Z,{spinning:D,children:P.length?null==v?void 0:v(P):(0,ce.jsx)(X.Z,{image:X.Z.PRESENTED_IMAGE_SIMPLE})})})]})})},he=d.memo(me),ve=function(e){var n=e.children,r=e.rowKey,t=e.childParentKey,a=e.onExpand,l=e.onSort,o=e.expandedRowKeys,c=e.loading,i=e.expandable,f=e.pollingChildren,p=e.watchChildren,m=e.rowSelection,h=e.pagination,v=e.renderChildren,g=e.loadChildren,j=e.loadChildrenAPI,w=(0,d.useState)(!1),b=u()(w,2),y=b[0],k=b[1],C=(0,d.useState)(!1),Z=u()(C,2),S=Z[0],E=Z[1],I=(0,d.useRef)(null);(0,d.useEffect)((function(){if(m){var n=m.selectedRowKeys;0===(null==n?void 0:n.length)?(k(!1),E(!1)):(null==n?void 0:n.length)===e.dataSource.length?(k(!0),E(!1)):(k(!1),E(!0))}}),[m]);var R=function(n){n.target.checked?(null==m||m.onChange(e.dataSource.map((function(e){return e[r]}))),k(!0),E(!1)):(null==m||m.onChange([]),k(!1),E(!1))},M=(0,d.useCallback)((function(){return e.dataSource.length?(0,ce.jsx)("div",{className:"seal-table-content",ref:I,children:e.dataSource.map((function(e,l){return(0,ce.jsx)(he,{record:e,rowIndex:l,columns:n,rowSelection:m,expandable:i,rowKey:r,childParentKey:t,pollingChildren:f,watchChildren:p,renderChildren:v,loadChildren:g,loadChildrenAPI:j,onExpand:a,expandedRowKeys:o},e[r])}))}):(0,ce.jsx)("div",{className:"empty-wrapper",children:(0,ce.jsx)(X.Z,{image:X.Z.PRESENTED_IMAGE_SIMPLE})})}),[e.dataSource,o,m,n]);return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{className:"seal-table-container",children:[(0,ce.jsxs)("div",{className:"header-row-wrapper",children:[i&&m?(0,ce.jsxs)("div",{className:"header-row-prefix-wrapper",children:[(0,ce.jsx)("span",{style:{marginRight:5,padding:"0 14px"}}),(0,ce.jsx)($.Z,{onChange:R,indeterminate:S,checked:y})]}):i?(0,ce.jsx)("div",{className:"header-row-prefix-wrapper",children:x().isBoolean(i)?(0,ce.jsx)(Q.ZP,{type:"text",size:"small",children:(0,ce.jsx)(J.Z,{})}):i}):m?(0,ce.jsx)("div",{className:"header-row-prefix-wrapper",children:(0,ce.jsx)($.Z,{})}):null,(0,ce.jsx)(de,{onSort:l,children:n})]}),(0,ce.jsx)(ee.Z,{spinning:c,children:M()})]}),h&&(0,ce.jsx)("div",{className:"pagination-wrapper",children:(0,ce.jsx)(ne.Z,s()(s()({},h),{},{onChange:function(e,n){var r;null==h||null===(r=h.onChange)||void 0===r||r.call(h,e,n)},onShowSizeChange:function(e,n){var r;null==h||null===(r=h.onShowSizeChange)||void 0===r||r.call(h,e,n)}}))})]})},xe=d.memo(ve),ge=function(e){var n=(0,d.useContext)(pe),r=e.dataIndex,t=e.render,a=e.align;return(0,ce.jsx)("div",{className:oe()("cell",{"cell-left":"left"===a,"cell-center":"center"===a,"cell-right":"right"===a}),children:(0,ce.jsx)("span",{className:"cell-content",children:t?t(n[r],s()(s()({},n),{},{dataIndex:r})):n[r]})})},je=d.memo(ge);var we=r(23543),be=r(79822),ye=r(34088),ke=r(86008),Ce=r(21813),Ze=r(26657),Se=r(46392),Ee=r(10822),Ie=r(67399),Re=r(18953),Me=r(81126),Te=r(99158),Ne=r(7672),Pe=r.n(Ne),_e=r(82092),qe=r.n(_e),Ke=[{label:"llama3.1",value:"llama3.1"},{label:"llama3",value:"llama3"},{label:"gemma2",value:"gemma2"},{label:"mistral",value:"mistral"},{label:"qwen2",value:"qwen2"},{label:"phi3",value:"phi3"},{label:"codellama",value:"codellama"},{label:"deepseek-coder",value:"deepseek-coder"}],De="Hugging Face",Oe="Ollama Library",Fe="huggingface",ze="initializing",Le="pending",Ae="running",Be="scheduled",He="error",We="downloading",Ye="unknown",Ve="analyzing",Ge=qe()(qe()(qe()(qe()(qe()(qe()(qe()(qe()({},ze,"Initializing"),Le,"Pending"),Ae,"Running"),Be,"Scheduled"),He,"Error"),We,"Downloading"),Ye,"Unknown"),Ve,"Analyzing"),Ue=qe()(qe()(qe()(qe()(qe()(qe()(qe()(qe()({},Ae,p.iE.success),Le,p.iE.transitioning),ze,p.iE.transitioning),Be,p.iE.transitioning),He,p.iE.error),We,p.iE.transitioning),Ye,p.iE.inactive),Ve,p.iE.transitioning),Je=(ke.Z,ke.Z,ke.Z,r(45799)),$e=r(67825),Qe=r.n($e),Xe=r(79698),en=r(37969),nn=r(37975),rn=["label","placeholder","required","description","isInFormItems","onSelect","extra","style","addAfter","loading"],tn=function(e){var n=e.label,r=e.placeholder,t=e.required,a=e.description,l=e.isInFormItems,o=void 0===l||l,c=e.onSelect,i=e.extra,f=(e.style,e.addAfter),p=e.loading,m=Qe()(e,rn),h=(0,d.useState)(!1),v=u()(h,2),x=v[0],g=v[1],j=(0,d.useRef)(null),w="";if(o){var b,y,k=null===Xe.Z||void 0===Xe.Z||null===(b=Xe.Z.Item)||void 0===b||null===(y=b.useStatus)||void 0===y?void 0:y.call(b);w=(null==k?void 0:k.status)||""}(0,d.useEffect)((function(){e.value&&g(!0)}),[e.value]);return(0,ce.jsx)(nn.Z,{status:w,extra:i,label:n||r,isFocus:x,required:t,description:a,disabled:e.disabled,addAfter:p?(0,ce.jsx)(ee.Z,{size:"small"}):f,onClick:function(){var n,r;e.disabled||x||(null===(n=j.current)||void 0===n||null===(r=n.focus)||void 0===r||r.call(n),g(!0))},children:(0,ce.jsx)(en.Z,s()(s()({},m),{},{ref:j,placeholder:x?(0,ce.jsx)("span",{style:{paddingLeft:"12px"},children:r}):"",onSelect:function(e,n){null==c||c(e,n)},onFocus:function(n){var r;g(!0),null===(r=e.onFocus)||void 0===r||r.call(e,n)},onBlur:function(n){var r;e.value||g(!1),null===(r=e.onBlur)||void 0===r||r.call(e,n)},onSearch:function(n){var r;null===(r=e.onSearch)||void 0===r||r.call(e,n)},onChange:function(n,r){var t;null===(t=e.onChange)||void 0===t||t.call(e,n,r)}}))})},an=r(99494),ln=r(94886),sn=r(21717),on=r(48157),cn=[{label:"Hugging Face",value:"huggingface",key:"huggingface"},{label:"Ollama Library",value:"ollama_library",key:"ollama_library"}],un=function(e){var n=e||{},r=n.title,t=n.action,l=n.open,o=n.onOk,i=n.onCancel,f=Xe.Z.useForm(),h=u()(f,1)[0],v=(0,m.useIntl)(),g=(0,d.useState)(!1),j=u()(g,2),w=j[0],b=j[1],y=Xe.Z.useWatch("source",h),k=(0,d.useState)([]),C=u()(k,2),Z=C[0],S=C[1],E=(0,d.useState)([]),I=u()(E,2),R=I[0],M=I[1];(0,d.useEffect)((function(){t===p.Kd.CREATE&&l&&h.setFieldsValue({source:"huggingface",replicas:1}),t===p.Kd.EDIT&&l&&h.setFieldsValue(s()({},e.data))}),[l]);var T=function(e){},N=function(e){return(0,ce.jsxs)("span",{children:[e.path,(0,ce.jsxs)("span",{style:{color:"var(--ant-color-text-tertiary)",marginLeft:"4px"},children:["(",(0,ye.hy)(e.size),")"]})]})},P=function(){var e=c()(a()().mark((function e(n){var r,t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,W({repo:n});case 4:r=e.sent,t=x().filter(r,(function(e){return x().endsWith(e.path,".gguf")})).map((function(e){return{label:N(e),value:e.path,size:e.size}})),M(t),b(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),M([]),b(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}(),_=function(e){var n=h.getFieldValue("huggingface_repo_id");P(n)},q=function(){var e=c()(a()().mark((function e(n){var r,t,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={q:"".concat(n),type:"model"},e.next=4,B(r);case 4:t=e.sent,l=x().map(t.models||[],(function(e){return{value:e.id,label:e.id}})),S(l),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),S([]);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),K=x().debounce((function(e){q(e)}),300),D=function(){h.submit()};return(0,ce.jsx)(on.Z,{title:r,open:l,centered:!0,onOk:D,onCancel:i,destroyOnClose:!0,closeIcon:!1,maskClosable:!1,keyboard:!1,width:600,styles:{},footer:(0,ce.jsx)(Je.Z,{onCancel:i,onOk:D}),children:(0,ce.jsxs)(Xe.Z,{name:"addModalForm",form:h,onFinish:o,preserve:!1,children:[(0,ce.jsx)(Xe.Z.Item,{name:"name",rules:[{required:!0,message:v.formatMessage({id:"common.form.rule.input"},{name:v.formatMessage({id:"common.table.name"})})}],children:(0,ce.jsx)(an.Z.Input,{label:v.formatMessage({id:"common.table.name"}),required:!0})}),(0,ce.jsx)(Xe.Z.Item,{name:"source",rules:[{required:!0,message:v.formatMessage({id:"common.form.rule.select"},{name:v.formatMessage({id:"models.form.source"})})}],children:(0,ce.jsx)(ln.Z,{disabled:t===p.Kd.EDIT,label:v.formatMessage({id:"models.form.source"}),options:cn,required:!0,onChange:function(e){}})}),function(){switch(y){case"huggingface":return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(Xe.Z.Item,{name:"huggingface_repo_id",rules:[{required:!0,message:v.formatMessage({id:"common.form.rule.input"},{name:v.formatMessage({id:"models.form.repoid"})})}],children:(0,ce.jsx)(tn,{label:v.formatMessage({id:"models.form.repoid"}),required:!0,showSearch:!0,onBlur:_,onSelect:_,onChange:T,onSearch:K,options:Z,disabled:t===p.Kd.EDIT,addAfter:(0,ce.jsx)("span",{style:{position:"relative",top:"2px"},children:(0,ce.jsx)(sn.Z,{})}),description:v.formatMessage({id:"models.form.repoid.desc"}),children:(0,ce.jsx)(Te.Z,{})})}),(0,ce.jsx)(Xe.Z.Item,{name:"huggingface_filename",rules:[{required:!0,message:v.formatMessage({id:"common.form.rule.input"},{name:v.formatMessage({id:"models.form.filename"})})}],children:(0,ce.jsx)(tn,{filterOption:!0,label:v.formatMessage({id:"models.form.filename"}),required:!0,options:R,loading:w,onFocus:_,disabled:t===p.Kd.EDIT})})]});case"ollama_library":return(0,ce.jsx)(ce.Fragment,{children:(0,ce.jsx)(Xe.Z.Item,{name:"ollama_library_model_name",rules:[{required:!0,message:v.formatMessage({id:"common.form.rule.input"},{name:v.formatMessage({id:"models.table.name"})})}],children:(0,ce.jsx)(tn,{filterOption:!0,disabled:t===p.Kd.EDIT,label:v.formatMessage({id:"model.form.ollama.model"}),placeholder:v.formatMessage({id:"model.form.ollamaholder"}),required:!0,options:Ke})})});case"s3":return(0,ce.jsx)(ce.Fragment,{children:(0,ce.jsx)(Xe.Z.Item,{name:"s3_address",rules:[{required:!0,message:v.formatMessage({id:"common.form.rule.input"},{name:v.formatMessage({id:"models.form.s3address"})})}],children:(0,ce.jsx)(an.Z.Input,{label:v.formatMessage({id:"models.form.s3address"}),required:!0})})});default:return null}}(),(0,ce.jsx)(Xe.Z.Item,{name:"replicas",rules:[{required:!0,message:v.formatMessage({id:"common.form.rule.input"},{name:v.formatMessage({id:"models.form.replicas"})})}],children:(0,ce.jsx)(an.Z.Number,{style:{width:"100%"},label:v.formatMessage({id:"models.form.replicas"}),required:!0,min:0})}),(0,ce.jsx)(Xe.Z.Item,{name:"description",children:(0,ce.jsx)(an.Z.TextArea,{label:v.formatMessage({id:"common.table.description"})})})]})})},dn=(0,d.memo)(un),fn=function(e){var n=e.children;return(0,ce.jsx)("div",{className:"row-children",children:n})},pn=r(90326),mn=r(57407),hn=r(56280),vn=r(64518),xn=function(e){var n=e.list,r=e.handleChildSelect,t=((0,m.useIntl)(),[{label:"common.button.viewlog",key:"viewlog",status:[Ae,He,We],icon:(0,ce.jsx)(mn.Z,{})},{label:"common.button.delete",key:"delete",props:{danger:!0},icon:(0,ce.jsx)(Ze.Z,{})}]),a=(0,d.useCallback)((function(e){return x().filter(t,(function(n){return"viewlog"!==n.key||n.status.includes(e.state)}))}),[]),l=function(e){var n="-";return e.worker_ip&&(n=e.port?"".concat(e.worker_ip,":").concat(e.port):e.worker_ip),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("div",{children:e.worker_name}),(0,ce.jsx)("div",{children:n})]})};return(0,ce.jsx)(Me.Z,{size:16,direction:"vertical",style:{width:"100%"},children:x().map(n,(function(e,t){return(0,ce.jsx)("div",{className:"_2Q2Yw",style:{borderRadius:"var(--ant-table-header-border-radius)"},children:(0,ce.jsx)(fn,{children:(0,ce.jsxs)(re.Z,{style:{width:"100%"},align:"middle",children:[(0,ce.jsx)(te.Z,{span:5,style:{paddingInline:"var(--ant-table-cell-padding-inline)"},children:(0,ce.jsxs)(vn.Z,{title:l(e),children:[(0,ce.jsx)("span",{className:"m-r-5",children:e.name}),(0,ce.jsx)(hn.Z,{})]})}),(0,ce.jsx)(te.Z,{span:6}),(0,ce.jsx)(te.Z,{span:4,children:(0,ce.jsx)("span",{style:{paddingLeft:"68px"},className:"flex justify-center",children:e.state&&(0,ce.jsx)(pn.Z,{download:e.state===We?{percent:e.download_progress}:void 0,statusValue:{status:Ue[e.state],text:Ge[e.state],message:e.state_message}})})}),(0,ce.jsx)(te.Z,{span:5,children:(0,ce.jsx)("span",{style:{paddingLeft:45},children:Pe()(e.created_at).format("YYYY-MM-DD HH:mm:ss")})}),(0,ce.jsx)(te.Z,{span:4,children:(0,ce.jsx)("div",{style:{paddingLeft:39},children:(0,ce.jsx)(G.Z,{items:a(e),onSelect:function(t){return r(t,e,n)}})})})]})},"".concat(e.id,"_row"))},"".concat(e.id))}))})},gn=d.memo(xn),jn=r(28434),wn=r(59060),bn=r.n(wn),yn=r(46056),kn=function(e){var n=e.height,r=e.content,t=e.url,l=(0,d.useState)(!1),o=u()(l,2),i=o[0],f=(o[1],(0,d.useState)(r||"")),p=u()(f,2),m=p[0],h=p[1],v=y().setChunkRequest,x=(0,d.useRef)(null),g=(0,d.useRef)(null),j=(0,jn.Z)(g,{toBottom:!0}),w=j.updateScrollerPosition,b=j.handleContentWheel,k=new(bn());(0,d.useEffect)((function(){w()}),[m]);var C=function(e){if((0,yn.Z)(e)){var n="".concat(k.toHtml(e));h(n)}else h(e)},Z=function(){var n=c()(a()().mark((function n(){var r,l;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null===(r=x.current)||void 0===r||null===(r=r.current)||void 0===r||null===(l=r.cancel)||void 0===l||l.call(r),x.current=v({url:t,params:s()(s()({},e.params),{},{watch:!0}),contentType:"text",handler:C});case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,d.useEffect)((function(){return Z(),function(){var e,n;null===(e=x.current)||void 0===e||null===(e=e.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e)}}),[t,e.params]),(0,ce.jsx)("div",{className:"logs-viewer-wrap-w2",children:(0,ce.jsx)("div",{className:"wrap",style:{height:n},ref:g,onWheel:b,children:(0,ce.jsx)("div",{className:oe()("content",{"line-break":i}),children:(0,ce.jsx)("div",{className:"text",children:m})})})})},Cn=(0,d.memo)(kn),Zn=r(9862),Sn=r(70668),En=function(e){var n=e||{},r=n.open,t=n.url,a=n.onCancel,l=(0,d.useState)({width:600,height:420}),s=u()(l,2),o=s[0],c=s[1],i=d.useRef(!1),f=(0,m.useIntl)();return(0,ce.jsx)(on.Z,{title:(0,ce.jsxs)("span",{className:"flex flex-center",children:[(0,ce.jsxs)("span",{children:[" ",f.formatMessage({id:"common.button.viewlog"})]}),(0,ce.jsx)(Q.ZP,{size:"middle",type:"text",onClick:function(){i.current=!i.current,c((function(e){return{width:600===e.width?"100%":600,height:420===e.height?"calc(100vh - 100px)":420}}))},children:i.current?(0,ce.jsx)(Zn.Z,{}):(0,ce.jsx)(Sn.Z,{})})]}),open:r,centered:!0,onCancel:a,destroyOnClose:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:o.width,footer:null,children:(0,ce.jsx)(Cn,{height:o.height,url:t,params:{follow:!0}})})},In=d.memo(En),Rn=function(e){var n,r,t=e.dataSource,l=e.handleNameChange,s=e.handleSearch,o=e.handlePageChange,i=e.queryParams,f=e.loading,h=e.total,v=(0,m.useAccess)(),g=(0,m.useIntl)(),j=(0,m.useNavigate)(),w=(0,we.Z)(),b=function(){var e=(0,d.useState)([]),n=u()(e,2),r=n[0],t=n[1],a=(0,d.useCallback)((function(e,n,r){t(e?function(e){return[].concat(C()(e),[r])}:function(e){return e.filter((function(e){return e!==r}))})}),[]);return{expandedRowKeys:r,clearExpandedRowKeys:function(){t([])},updateExpandedRowKeys:function(e){var n=r.filter((function(n){return!e.includes(n)}));t(n)},handleExpandChange:a}}(),y=b.handleExpandChange,k=b.updateExpandedRowKeys,Z=b.expandedRowKeys,S=(0,be.Z)({defaultSortOrder:"descend"}),E=S.sortOrder,I=S.setSortOrder,T=(0,d.useState)(!1),N=u()(T,2),_=N[0],K=N[1],O=(0,d.useState)(!1),z=u()(O,2),A=z[0],B=z[1],H=(0,d.useState)(p.Kd.CREATE),W=u()(H,2),Y=W[0],J=W[1],$=(0,d.useState)(""),X=u()($,2),ee=X[0],ne=X[1],re=(0,d.useState)(void 0),te=u()(re,2),ae=te[0],le=te[1],se=(0,d.useState)(""),oe=u()(se,2),ie=oe[0],ue=oe[1],de=(0,d.useRef)(null),fe=[{label:"common.button.edit",key:"edit",icon:(0,ce.jsx)(ke.Z,{})},{label:"models.openinplayground",key:"chat",icon:(0,ce.jsx)(Ce.Z,{})},{label:"common.button.delete",key:"delete",props:{danger:!0},icon:(0,ce.jsx)(Ze.Z,{})}],pe=(0,d.useCallback)((function(e){return x().filter(fe,(function(n){return"chat"!==n.key||e.ready_replicas>0}))}),[]),me=(0,d.useCallback)(function(){var e=c()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Y!==p.Kd.CREATE){e.next=4;break}return e.next=4,P({data:n});case 4:if(Y!==p.Kd.EDIT){e.next=7;break}return e.next=7,D({data:n,id:null==ae?void 0:ae.id});case 7:B(!1),Re.ZP.success(g.formatMessage({id:"common.message.success"})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}(),[Y,ae]),he=(0,d.useCallback)((function(){B(!1)}),[]),ve=(0,d.useCallback)((function(){K(!1)}),[]),ge=function(){var e=c()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de.current.show({content:"models.table.models",name:n.name,onOk:function(){return c()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(n.id);case 2:k([n.id]);case 3:case"end":return e.stop()}}),e)})))()}});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ne=function(){var e=c()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ue("".concat(M,"/").concat(n.id,"/logs")),K(!0)}catch(e){}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),_e=function(){var e=c()(a()().mark((function e(n){var r,t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:n.id,page:1,perPage:100},e.next=3,F(r);case 3:return t=e.sent,e.abrupt("return",t.items||[]);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),qe=(0,d.useCallback)((function(e,n){"edit"===e&&function(e){le(e),B(!0),J(p.Kd.EDIT),ne(g.formatMessage({id:"models.title.edit"}))}(n),"chat"===e&&function(e){j("/playground?model=".concat(e.name))}(n),"delete"===e&&ge(n)}),[]),Ke=(0,d.useCallback)((function(e,n,r){"delete"===e&&function(e,n){de.current.show({content:"models.instances",name:e.name,onOk:function(){return c()(a()().mark((function r(){return a()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L(e.id);case 2:1===n.length&&k([e.model_id]);case 3:case"end":return r.stop()}}),r)})))()}})}(n,r),"viewlog"===e&&Ne(n)}),[]),ze=(0,d.useCallback)((function(e){return(0,ce.jsx)(gn,{list:e,handleChildSelect:Ke})}),[]);return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(Ie._z,{ghost:!0,header:{title:g.formatMessage({id:"models.title"})},extra:[],children:[(0,ce.jsx)(U.Z,{marginBottom:22,left:(0,ce.jsxs)(Me.Z,{children:[(0,ce.jsx)(Te.Z,{placeholder:g.formatMessage({id:"common.filter.name"}),style:{width:300},size:"large",allowClear:!0,onChange:l}),(0,ce.jsx)(Q.ZP,{type:"text",style:{color:"var(--ant-color-text-tertiary)"},onClick:s,icon:(0,ce.jsx)(Se.Z,{})})]}),right:(0,ce.jsxs)(Me.Z,{size:20,children:[(0,ce.jsx)(Q.ZP,{icon:(0,ce.jsx)(Ee.Z,{}),type:"primary",onClick:function(){B(!0),J(p.Kd.CREATE),ne(g.formatMessage({id:"models.button.deploy"}))},children:null==g||null===(n=g.formatMessage)||void 0===n?void 0:n.call(g,{id:"models.button.deploy"})}),(0,ce.jsx)(m.Access,{accessible:v.canDelete,children:(0,ce.jsx)(Q.ZP,{icon:(0,ce.jsx)(Ze.Z,{}),danger:!0,onClick:function(){de.current.show({content:"models.table.models",selection:!0,onOk:function(){return c()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ye.D6)(w.selectedRowKeys,q);case 2:w.clearSelections(),k(w.selectedRowKeys);case 4:case"end":return e.stop()}}),e)})))()}})},disabled:!w.selectedRowKeys.length,children:null==g||null===(r=g.formatMessage)||void 0===r?void 0:r.call(g,{id:"common.button.delete"})})})]})}),(0,ce.jsxs)(xe,{dataSource:t,rowSelection:w,expandedRowKeys:Z,onExpand:y,loading:f,rowKey:"id",childParentKey:"model_id",expandable:!0,onSort:function(e,n){I(n)},pollingChildren:!1,watchChildren:!0,loadChildren:_e,loadChildrenAPI:function(e){return"".concat(R,"/").concat(e.id,"/instances")},renderChildren:ze,pagination:{showSizeChanger:!0,pageSize:i.perPage,current:i.page,total:h,hideOnSinglePage:10===i.perPage,onChange:o},children:[(0,ce.jsx)(je,{title:g.formatMessage({id:"common.table.name"}),dataIndex:"name",width:400,span:5},"name"),(0,ce.jsx)(je,{title:g.formatMessage({id:"models.form.source"}),dataIndex:"source",span:6,render:function(e,n){return(0,ce.jsx)("span",{children:n.source===Fe?"".concat(De," / ").concat(n.huggingface_filename):"".concat(Oe," / ").concat(n.ollama_library_model_name)})}},"source"),(0,ce.jsx)(je,{title:g.formatMessage({id:"models.form.replicas"}),dataIndex:"replicas",align:"center",span:4,render:function(e,n){return(0,ce.jsxs)("span",{children:[n.ready_replicas," / ",n.replicas]})}},"replicas"),(0,ce.jsx)(je,{span:5,title:g.formatMessage({id:"common.table.createTime"}),dataIndex:"created_at",defaultSortOrder:"descend",sortOrder:E,sorter:!1,render:function(e,n){return Pe()(e).format("YYYY-MM-DD HH:mm:ss")}},"created_at"),(0,ce.jsx)(je,{span:4,title:g.formatMessage({id:"common.table.operation"}),dataIndex:"operation",render:function(e,n){return(0,ce.jsx)(G.Z,{items:pe(n),onSelect:function(e){return qe(e,n)}})}},"operation")]})]}),(0,ce.jsx)(dn,{open:A,action:Y,title:ee,data:ae,onCancel:he,onOk:me}),(0,ce.jsx)(In,{url:ie,open:_,onCancel:ve}),(0,ce.jsx)(V.Z,{ref:de})]})},Mn=function(){var e=y().setChunkRequest,n=y().setChunkRequest,r=(0,d.useState)(0),t=u()(r,2),l=t[0],o=t[1],i=(0,d.useState)([]),p=u()(i,2),m=p[0],h=p[1],v=(0,d.useState)(!1),g=u()(v,2),j=g[0],b=g[1],k=(0,d.useState)([]),C=u()(k,2),S=C[0],E=C[1],I=(0,d.useState)(!0),N=u()(I,2),P=N[0],_=N[1],q=(0,d.useRef)(),K=(0,d.useRef)(),D=w(),O=(0,d.useState)({page:1,perPage:10,search:""}),F=u()(O,2),z=F[0],L=F[1],A=Z({dataList:S,setDataList:E}),B=A.updateChunkedList,H=A.cacheDataListRef,W=(0,d.useCallback)(c()(a()().mark((function e(){var n,r,t,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=D)||void 0===n||null===(r=n.cancel)||void 0===r||r.call(n),D=w(),b(!0),e.prev=3,t=s()({},x().pickBy(z,(function(e){return!!e}))),e.next=7,T(t,{cancelToken:D.token});case 7:l=e.sent,P||E(l.items),o(l.pagination.total),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),E([]);case 16:return e.prev=16,b(!1),_(!1),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[3,12,16,20]])}))),[z]),Y=(0,d.useCallback)((function(e,n){L(s()(s()({},z),{},{page:e,perPage:n||10}))}),[z]),V=function(e){x().each(e,(function(e){B(e)}))},G=function(e){h(e)},U=(0,d.useCallback)((function(e){W()}),[]),J=(0,d.useCallback)((function(e){L(s()(s()({},z),{},{search:e.target.value}))}),[z]);return(0,d.useEffect)((function(){return P||(function(){var n,r;null===(n=q.current)||void 0===n||null===(n=n.current)||void 0===n||null===(r=n.cancel)||void 0===r||r.call(n);try{q.current=e({url:"".concat(R),params:s()({},x().pickBy(z,(function(e){return!!e}))),handler:V})}catch(e){}}(),function(){var e,r;null===(e=K.current)||void 0===e||null===(e=e.current)||void 0===e||null===(r=e.cancel)||void 0===r||r.call(e);try{K.current=n({url:"".concat(M),params:{},handler:G})}catch(e){}}()),function(){var e,n,r,t;null===(e=q.current)||void 0===e||null===(e=e.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e),H.current=[],null===(r=K.current)||void 0===r||null===(r=r.current)||void 0===r||null===(t=r.cancel)||void 0===t||t.call(r)}}),[P]),(0,d.useEffect)((function(){return W(),function(){var e,n;null===(e=D)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e)}}),[z]),(0,ce.jsx)(f.Provider,{value:{allChildren:m},children:(0,ce.jsx)(Rn,{dataSource:S,handleNameChange:J,handleSearch:U,handlePageChange:Y,queryParams:z,loading:j,total:l})})}}}]);